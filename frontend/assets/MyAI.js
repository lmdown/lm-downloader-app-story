import{_ as t,F as a,S as e}from"./single-app-item.js";import{e as s,H as i,a3 as l,F as n,$ as o,a5 as p,u as r,a1 as u,k as d,a4 as m,S as c,K as y,a0 as g,a2 as v,Y as h,b as f,a8 as x,z as L,B as _,q as T,j as b}from"./vue.js";import{r as k,A,T as w}from"./index.js";import{g as I}from"./app-info.js";import{b as j,c as C}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{d as O}from"./pinia.js";import{l as M,m as $,b as U,s as V,y as D,z as R,t as S}from"./vuetify.js";import{g as F}from"./install-instance.js";import{_ as N}from"./single-installed-instance.vue_vue_type_style_index_0_lang.js";import{_ as z}from"./top-app-bar.vue_vue_type_style_index_0_lang.js";import"./lmd-system.js";import"./xterm.js";import"./debounce.js";import"./vuei18n.js";import"./lmd-locales.js";import"./DateTimeUtil.js";import"./dayjs.js";import"./AppRunningUtil.js";const E=j(),Y=O("myAIData",{state:()=>({installedInstanceList:[],onlineAppList:[],tutorialsTextList:[],favOnlineAppsCount:0,tutorialsTextCount:0,appListLoading:!1,tutorialTextListLoading:!1}),actions:{async getFavOnlineApps(){},async updateCountData(){this.favOnlineAppsCount=await(async()=>{if(E.getToken())return(await C.get("/api/fav/my-online-apps/count")).data.totalItems;return null})(),this.tutorialsTextCount=await(async()=>{if(E.getToken())return(await C.get("/api/fav/my-tut-text/count")).data.totalItems;return null})()},setInstalledLocalApps(t){this.installedInstanceList=t},setOnlineAppList(t){this.onlineAppList=t},setTutorialTextList(t){t.forEach((t=>{if("string"==typeof t.apps)return t.apps=JSON.parse(t.apps),t})),t&&t.length>0?this.tutorialsTextList=t:this.tutorialsTextList=[]},async updateOnlineAppList(){try{this.appListLoading=!0;const t=await(async()=>{if(E.getToken())return(await C.get("/api/fav/my-online-apps/?page=1&limit=20000")).data.data;return null})();this.setOnlineAppList(t)}catch(t){console.log("getList",t)}finally{this.appListLoading=!1}},async updateTutorialTextList(){try{this.tutorialTextListLoading=!0;const t=await(async()=>{if(E.getToken())return(await C.get("/api/fav/my-tut-text/?page=1&limit=20000")).data.data;return null})();t&&this.setTutorialTextList(t)}catch(t){console.log("getList",t)}finally{this.tutorialTextListLoading=!1}}}}),q={class:"article-title mb-2"},B=["onClick"],H={class:"article-summary mb-3"},J={class:"article-summary-text"},K={class:"article-actions"},P={style:{"white-space":"nowrap",overflow:"hidden",flex:"1"}},X=["onClick"],G={key:2,class:"fav-no-data",style:{"padding-bottom":"160px"}},Q=s({__name:"my-fav-tutorial-text",setup(e){const s=Y();i((()=>{f()}));const f=()=>{s.updateTutorialTextList()},x=t=>{const a=document.createElement("a");a.href=t,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)},L=async t=>{const a=(await I(t.alias)).id;k.push({name:A.AppDetail,params:{id:a}})};return(e,i)=>{const _=t;return g(),l(n,null,[r(s).tutorialTextListLoading?(g(),o(M,{key:0,class:"my-8 mx-4",style:{width:"100%"}},{default:u((()=>[d($,{color:"primary",height:"6",indeterminate:"",rounded:""})])),_:1})):p("",!0),r(s).tutorialsTextList&&r(s).tutorialsTextList.length>0?(g(),o(M,{key:1,class:"my-fav-tutorials mb-8"},{default:u((()=>[(g(!0),l(n,null,m(r(s).tutorialsTextList,((t,s)=>(g(),l("div",{class:"article-item",key:t.id},[v("div",q,[v("a",{href:"#",onClick:h((a=>(t=>{k.push({name:A.TutorialTextDetail,params:{id:t.id}})})(t)),["prevent"])},y(t.title),9,B)]),v("div",H,[t.coverUrl?(g(),o(U,{key:0,class:"article-cover mr-5",src:t.coverUrl,rounded:"lg",cover:"",width:"160",height:"96","max-width":"160","max-height":"96"},null,8,["src"])):p("",!0),v("div",J,y(t.summary),1)]),v("div",K,[d(_,{onRemoveFav:f,"res-id":t.id,"res-type":r(a).TUT_TEXT},null,8,["res-id","res-type"]),v("div",P,[c(y(e.$t("Tutorial.RelatedApps"))+": ",1),(g(!0),l(n,null,m(t.apps,((a,e)=>(g(),l(n,{key:e},[v("a",{href:"#",onClick:h((t=>(t=>{const a=t.url;t.alias?L(t):a&&x(a)})(a)),["prevent"])},y(a.name),9,X),e+1!==t.apps?.length?(g(),l(n,{key:0},[c(" , ")],64)):p("",!0)],64)))),128))])])])))),128))])),_:1})):r(s).appListLoading?p("",!0):(g(),l("div",G,[d(U,{class:"mx-auto mt-10 mb-3",width:"auto",height:"280",src:"./images/my-ai/fav-no-data.svg"}),c(" "+y(e.$t("MyAI.NoData")),1)]))],64)}}}),W=s({__name:"login-tip",setup(t){const a=j(),e=()=>{a.showLoginView()};return(t,a)=>(g(),l(n,null,[d(U,{class:"mx-auto mb-0",style:{"margin-top":"160px"},width:"auto",height:"148",src:"./images/user/user-not-login.svg"}),v("div",null,y(t.$t("MyAI.LoginToViewApp")),1),d(V,{variant:"outlined",class:"mt-6",onClick:e,color:r(w).PRIMARY_COLOR,style:{"border-radius":"8px"}},{default:u((()=>[c(y(t.$t("User.LoginOrReg")),1)])),_:1},8,["color"])],64))}}),Z={key:2,class:"fav-no-data",style:{"padding-bottom":"160px"}},tt=s({__name:"my-fav-online-app",setup(t){const a=Y(),s=j();i((()=>{v()}));const v=async()=>{a.updateOnlineAppList()};return(t,i)=>{const h=e,f=W;return g(),l(n,null,[r(a).appListLoading?(g(),o(M,{key:0,class:"my-8 mx-4",style:{width:"100%"}},{default:u((()=>[d($,{color:"primary",height:"6",indeterminate:"",rounded:""})])),_:1})):p("",!0),r(a).onlineAppList&&r(a).onlineAppList.length>0?(g(),o(D,{key:1,class:"app-list gap-2 mb-2 mt-7",style:{flex:"unset"}},{default:u((()=>[(g(!0),l(n,null,m(r(a).onlineAppList,((t,a)=>(g(),o(R,{key:t.name+a,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:u((()=>[d(h,{onRemoveFav:v,"app-data":t},null,8,["app-data"])])),_:2},1024)))),128))])),_:1})):r(a).appListLoading?p("",!0):(g(),l("div",Z,[r(s).isUserLoggedIn?(g(),l(n,{key:0},[d(U,{class:"mx-auto mt-10 mb-3",width:"auto",height:"280",src:"./images/my-ai/fav-no-data.svg"}),c(" "+y(t.$t("MyAI.NoData")),1)],64)):(g(),o(f,{key:1}))]))],64)}}}),at={class:"my-ai-nav-container ga-6 pb-5"},et=["onClick"],st={style:{flex:"1","padding-top":"16px","padding-left":"14px"}},it={class:"item-count"},lt={class:"item-name"},nt={class:"indicator"},ot=s({__name:"my-data-nav",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:a}){const e=j(),s=Y(),o=t,p=f([{name:"MyAI.MyLocalApps",value:"local",bgStyle:"nav-item-bg-style1"},{name:"MyAI.MyOnlineApps",value:"online",bgStyle:"nav-item-bg-style2"},{name:"MyAI.MyTutorials",value:"tutorial",bgStyle:"nav-item-bg-style3"}]),c=a,h=(t,a)=>o.modelValue===a?t.bgStyle:"";i((()=>{s.updateCountData()}));return(t,a)=>(g(),l("div",at,[(g(!0),l(n,null,m(r(p),((a,i)=>{return g(),l("div",{key:i,class:x(["nav-item",h(a,i)]),onClick:t=>(t=>{c("update:modelValue",t)})(i)},[d(U,{width:"120",height:"88",draggable:"false","max-width":"120","max-height":"88",class:"ml-2",src:`./images/my-ai/${a.value}.svg`},null,8,["src"]),v("div",st,[v("div",it,y((n=a.value,"local"===n?s.installedInstanceList.length:"online"===n?e.isUserLoggedIn?s.favOnlineAppsCount:"- -":"tutorial"===n?e.isUserLoggedIn?s.tutorialsTextCount:"- -":void 0)),1),v("div",lt,y(t.$t(a.name)),1)]),d(T,{name:"fade"},{default:u((()=>[L(v("div",nt,null,512),[[_,o.modelValue===i]])])),_:2},1024)],10,et);var n})),128))]))}}),pt={key:2,class:"text-center mx-auto",style:{"font-size":"16px"}},rt=s({__name:"instance-list",setup(t){const a=f(null),e=f(!1),s=Y();i((()=>{v()}));const v=async()=>{e.value=!0;const t=await F();s.setInstalledLocalApps(t),a.value=t,e.value=!1},h=()=>{v()};return(t,s)=>(g(),l(n,null,[r(e)?(g(),o(M,{key:0,class:"my-8 mx-4",style:{width:"100%"}},{default:u((()=>[d($,{color:"primary",height:"6",indeterminate:"",rounded:""})])),_:1})):p("",!0),r(a)&&r(a).length>0?(g(),o(S,{key:1,class:"mx-4 ga-2 mt-4",style:{width:"100%","max-width":"unset"}},{default:u((()=>[d(D,null,{default:u((()=>[(g(!0),l(n,null,m(r(a),((t,a)=>(g(),o(R,{key:a,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:u((()=>[d(N,{"app-icon-url":t.appIcon,"card-color-style-class":"instance-card-gray","app-version-visible":!1,"instance-data":t,onDeleted:h,"app-name-visible":!0,"icon-visible":!0},null,8,["app-icon-url","instance-data"])])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0),r(a)&&0===r(a).length?(g(),l("div",pt,[d(U,{class:"mx-auto mt-8 mb-4",width:"auto",height:"200",src:"./images/app/no-data.svg"}),c(" "+y(t.$t("InstalledApps.NoApp")),1)])):p("",!0)],64))}}),ut=s({__name:"MyAI",setup(t){const a=f(0);return(t,e)=>{const s=ot,i=tt,m=Q;return g(),l(n,null,[d(z,{"main-title":t.$t("InstalledApps.MainTitle"),"sub-title":t.$t("InstalledApps.Subtitle")},null,8,["main-title","sub-title"]),d(S,{class:"my-ai-container mt-0 pt-0 px-8 pb-8"},{default:u((()=>[d(s,{modelValue:r(a),"onUpdate:modelValue":e[0]||(e[0]=t=>b(a)?a.value=t:null)},null,8,["modelValue"]),0===r(a)?(g(),o(rt,{key:0})):p("",!0),1===r(a)?(g(),o(i,{key:1})):p("",!0),2===r(a)?(g(),o(m,{key:2})):p("",!0)])),_:1})],64)}}});export{ut as default};
