import{T as t,r as a,A as e}from"./index.js";import{b as s,c as i}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{b as l,s as n,l as o,m as p,y as r,z as u,t as d}from"./vuetify.js";import{e as m,a3 as c,F as y,k as g,a2 as v,K as h,u as f,a1 as x,S as L,a0 as _,H as T,$ as k,a5 as A,a4 as b,Y as w,b as I,a8 as j,z as C,B as M,q as O,j as $}from"./vue.js";import{_ as U,F as V,S as D}from"./single-app-item.js";import{g as R}from"./app-info.js";import{d as S}from"./pinia.js";import{g as F}from"./install-instance.js";import{_ as N}from"./single-installed-instance.vue_vue_type_style_index_0_lang.js";import{_ as z}from"./top-app-bar.vue_vue_type_style_index_0_lang.js";import"./xterm.js";import"./debounce.js";import"./vuei18n.js";import"./lmd-locales.js";import"./lmd-system.js";import"./DateTimeUtil.js";import"./dayjs.js";import"./AppRunningUtil.js";const E=m({__name:"login-tip",props:{tip:{}},setup(a){const e=s(),i=()=>{e.showLoginView()};return(a,e)=>(_(),c(y,null,[g(l,{class:"mx-auto mb-0",style:{"margin-top":"160px"},width:"auto",height:"148",src:"./images/user/user-not-login.svg"}),v("div",null,h(a.tip),1),g(n,{variant:"outlined",class:"mt-6",onClick:i,color:f(t).PRIMARY_COLOR,style:{"border-radius":"8px"}},{default:x((()=>[L(h(a.$t("User.LoginOrReg")),1)])),_:1},8,["color"])],64))}}),Y=s(),q=S("myAIData",{state:()=>({installedInstanceList:[],onlineAppList:[],tutorialsTextList:[],favOnlineAppsCount:0,tutorialsTextCount:0,appListLoading:!1,tutorialTextListLoading:!1}),actions:{async getFavOnlineApps(){},async updateCountData(){this.favOnlineAppsCount=await(async()=>{if(Y.getToken())return(await i.get("/api/fav/my-online-apps/count")).data.totalItems;return null})(),this.tutorialsTextCount=await(async()=>{if(Y.getToken())return(await i.get("/api/fav/my-tut-text/count")).data.totalItems;return null})()},setInstalledLocalApps(t){this.installedInstanceList=t},setOnlineAppList(t){this.onlineAppList=t},setTutorialTextList(t){t.forEach((t=>{if("string"==typeof t.apps)return t.apps=JSON.parse(t.apps),t})),t&&t.length>0?this.tutorialsTextList=t:this.tutorialsTextList=[]},async updateOnlineAppList(){try{this.appListLoading=!0;const t=await(async()=>{if(Y.getToken())return(await i.get("/api/fav/my-online-apps/?page=1&limit=20000")).data.data;return null})();this.setOnlineAppList(t)}catch(t){console.log("getList",t)}finally{this.appListLoading=!1}},async updateTutorialTextList(){try{this.tutorialTextListLoading=!0;const t=await(async()=>{if(Y.getToken())return(await i.get("/api/fav/my-tut-text/?page=1&limit=20000")).data.data;return null})();t&&this.setTutorialTextList(t)}catch(t){console.log("getList",t)}finally{this.tutorialTextListLoading=!1}}}}),B={class:"article-title mb-2"},H=["onClick"],J={class:"article-summary mb-3"},K={class:"article-summary-text"},P={class:"article-actions"},X={style:{"white-space":"nowrap",overflow:"hidden",flex:"1"}},G=["onClick"],Q={key:2,class:"fav-no-data",style:{"padding-bottom":"160px"}},W=m({__name:"my-fav-tutorial-text",setup(t){const i=q(),n=s();T((()=>{r()}));const r=()=>{i.updateTutorialTextList()},u=t=>{const a=document.createElement("a");a.href=t,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)},d=async t=>{const s=(await R(t.alias)).id;a.push({name:e.AppDetail,params:{id:s}})};return(t,s)=>{const m=U,T=E;return _(),c(y,null,[f(i).tutorialTextListLoading?(_(),k(o,{key:0,class:"my-8 mx-4",style:{width:"100%"}},{default:x((()=>[g(p,{color:"primary",height:"6",indeterminate:"",rounded:""})])),_:1})):A("",!0),f(i).tutorialsTextList&&f(i).tutorialsTextList.length>0?(_(),k(o,{key:1,class:"my-fav-tutorials mb-8"},{default:x((()=>[(_(!0),c(y,null,b(f(i).tutorialsTextList,((s,i)=>(_(),c("div",{class:"article-item",key:s.id},[v("div",B,[v("a",{href:"#",onClick:w((t=>(t=>{a.push({name:e.TutorialTextDetail,params:{id:t.id}})})(s)),["prevent"])},h(s.title),9,H)]),v("div",J,[s.coverUrl?(_(),k(l,{key:0,class:"article-cover mr-5",src:s.coverUrl,rounded:"lg",cover:"",width:"160",height:"96","max-width":"160","max-height":"96"},null,8,["src"])):A("",!0),v("div",K,h(s.summary),1)]),v("div",P,[g(m,{onRemoveFav:r,"res-id":s.id,"res-type":f(V).TUT_TEXT},null,8,["res-id","res-type"]),v("div",X,[L(h(t.$t("Tutorial.RelatedApps"))+": ",1),(_(!0),c(y,null,b(s.apps,((t,a)=>(_(),c(y,{key:a},[v("a",{href:"#",onClick:w((a=>(t=>{const a=t.url;t.alias?d(t):a&&u(a)})(t)),["prevent"])},h(t.name),9,G),a+1!==s.apps?.length?(_(),c(y,{key:0},[L(" , ")],64)):A("",!0)],64)))),128))])])])))),128))])),_:1})):f(i).appListLoading?A("",!0):(_(),c("div",Q,[f(n).isUserLoggedIn?(_(),c(y,{key:0},[g(l,{class:"mx-auto mt-10 mb-3",width:"auto",height:"280",src:"./images/my-ai/fav-no-data.svg"}),L(" "+h(t.$t("MyAI.NoData")),1)],64)):(_(),k(T,{key:1,tip:t.$t("MyAI.LoginToViewTut")},null,8,["tip"]))]))],64)}}}),Z={key:2,class:"fav-no-data",style:{"padding-bottom":"160px"}},tt=m({__name:"my-fav-online-app",setup(t){const a=q(),e=s();T((()=>{i()}));const i=async()=>{a.updateOnlineAppList()};return(t,s)=>{const n=D,d=E;return _(),c(y,null,[f(a).appListLoading?(_(),k(o,{key:0,class:"my-8 mx-4",style:{width:"100%"}},{default:x((()=>[g(p,{color:"primary",height:"6",indeterminate:"",rounded:""})])),_:1})):A("",!0),f(a).onlineAppList&&f(a).onlineAppList.length>0?(_(),k(r,{key:1,class:"app-list gap-2 mb-2 mt-7",style:{flex:"unset"}},{default:x((()=>[(_(!0),c(y,null,b(f(a).onlineAppList,((t,a)=>(_(),k(u,{key:t.name+a,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:x((()=>[g(n,{onRemoveFav:i,"app-data":t},null,8,["app-data"])])),_:2},1024)))),128))])),_:1})):f(a).appListLoading?A("",!0):(_(),c("div",Z,[f(e).isUserLoggedIn?(_(),c(y,{key:0},[g(l,{class:"mx-auto mt-10 mb-3",width:"auto",height:"280",src:"./images/my-ai/fav-no-data.svg"}),L(" "+h(t.$t("MyAI.NoData")),1)],64)):(_(),k(d,{key:1,tip:t.$t("MyAI.LoginToViewApp")},null,8,["tip"]))]))],64)}}}),at={class:"my-ai-nav-container ga-6 pb-5"},et=["onClick"],st={style:{flex:"1","padding-top":"16px","padding-left":"14px"}},it={class:"item-count"},lt={class:"item-name"},nt={class:"indicator"},ot=m({__name:"my-data-nav",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:a}){const e=s(),i=q(),n=t,o=I([{name:"MyAI.MyLocalApps",value:"local",bgStyle:"nav-item-bg-style1"},{name:"MyAI.MyOnlineApps",value:"online",bgStyle:"nav-item-bg-style2"},{name:"MyAI.MyTutorials",value:"tutorial",bgStyle:"nav-item-bg-style3"}]),p=a,r=(t,a)=>n.modelValue===a?t.bgStyle:"";T((()=>{i.updateCountData()}));return(t,a)=>(_(),c("div",at,[(_(!0),c(y,null,b(f(o),((a,s)=>{return _(),c("div",{key:s,class:j(["nav-item",r(a,s)]),onClick:t=>(t=>{p("update:modelValue",t)})(s)},[g(l,{width:"120",height:"88",draggable:"false","max-width":"120","max-height":"88",class:"ml-2",src:`./images/my-ai/${a.value}.svg`},null,8,["src"]),v("div",st,[v("div",it,h((o=a.value,"local"===o?i.installedInstanceList.length:"online"===o?e.isUserLoggedIn?i.favOnlineAppsCount:"- -":"tutorial"===o?e.isUserLoggedIn?i.tutorialsTextCount:"- -":void 0)),1),v("div",lt,h(t.$t(a.name)),1)]),g(O,{name:"fade"},{default:x((()=>[C(v("div",nt,null,512),[[M,n.modelValue===s]])])),_:2},1024)],10,et);var o})),128))]))}}),pt={key:2,class:"text-center mx-auto",style:{"font-size":"16px"}},rt=m({__name:"instance-list",setup(t){const a=I(null),e=I(!1),s=q();T((()=>{i()}));const i=async()=>{e.value=!0;const t=await F();s.setInstalledLocalApps(t),a.value=t,e.value=!1},n=()=>{i()};return(t,s)=>(_(),c(y,null,[f(e)?(_(),k(o,{key:0,class:"my-8 mx-4",style:{width:"100%"}},{default:x((()=>[g(p,{color:"primary",height:"6",indeterminate:"",rounded:""})])),_:1})):A("",!0),f(a)&&f(a).length>0?(_(),k(d,{key:1,class:"mx-4 ga-2 mt-4",style:{width:"100%","max-width":"unset"}},{default:x((()=>[g(r,null,{default:x((()=>[(_(!0),c(y,null,b(f(a),((t,a)=>(_(),k(u,{key:a,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:x((()=>[g(N,{"app-icon-url":t.appIcon,"card-color-style-class":"instance-card-gray","app-version-visible":!1,"instance-data":t,onDeleted:n,"app-name-visible":!0,"icon-visible":!0},null,8,["app-icon-url","instance-data"])])),_:2},1024)))),128))])),_:1})])),_:1})):A("",!0),f(a)&&0===f(a).length?(_(),c("div",pt,[g(l,{class:"mx-auto mt-8 mb-4",width:"auto",height:"200",src:"./images/app/no-data.svg"}),L(" "+h(t.$t("InstalledApps.NoApp")),1)])):A("",!0)],64))}}),ut=m({__name:"MyAI",setup(t){const a=I(0);return(t,e)=>{const s=ot,i=tt,l=W;return _(),c(y,null,[g(z,{"main-title":t.$t("InstalledApps.MainTitle"),"sub-title":t.$t("InstalledApps.Subtitle")},null,8,["main-title","sub-title"]),g(d,{class:"my-ai-container mt-0 pt-0 px-8 pb-8"},{default:x((()=>[g(s,{modelValue:f(a),"onUpdate:modelValue":e[0]||(e[0]=t=>$(a)?a.value=t:null)},null,8,["modelValue"]),0===f(a)?(_(),k(rt,{key:0})):A("",!0),1===f(a)?(_(),k(i,{key:1})):A("",!0),2===f(a)?(_(),k(l,{key:2})):A("",!0)])),_:1})],64)}}});export{ut as default};
