import{L as e,k as r,I as n}from"./index.js";const a=(e,r)=>{const n=e.__vccOpts||e;for(const[a,t]of r)n[a]=t;return n},t="http://localhost:19312/api",s=axios.create({baseURL:t,timeout:6e3});s.interceptors.request.use((n=>{if(n.url){const a=e.getCurrentLocale();n.url=r(n.url,{locale:a})}return n}),(e=>(console.error("Request Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e)),(e=>{if(console.error("Response Error:",e),e.response)switch(e.response.status){case 401:console.warn("Unauthorized access. Redirecting to login...");break;case 403:console.warn("Forbidden access.");break;case 404:console.warn("Resource not found.");break;case 500:console.error("Server internal error.");break;default:console.error("Unexpected error occurred.")}return Promise.reject(e)}));const i={STOP_AI_RUNNING_INSTANCE:"stop-ai-running-instance",RUNNING_STATUS_CHANGE:"running-status-change",OPEN_GLOBAL_CONFIG_DIALOG:"open-global-config-dialog"},o=async(e,r=!1)=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(n.SELECT_DIR,e,r))},c=async e=>{let r=!1;if(window.ipcRenderer){try{r=await(window.ipcRenderer?.invoke(n.SUPPORT_SHOW_ITEM_IN_FOLDER,e))}catch(a){console.error("err",a.message)}return r?await(window.ipcRenderer?.invoke(n.SHOW_ITEM_IN_FOLDER,e)):(await(window.ipcRenderer?.invoke(n.OPEN_PATH,e)),!0)}return r};class l{static checkModelsDirValid(e,r){if(e.subdirs=this.filterSpecialFiles(e.subdirs),e.files=this.filterSpecialFiles(e.files),!(e.subdirs&&0!==e.subdirs.length||e.files&&0!==e.files.length))return!0;const n=new Set(e.subdirs);return r.every((e=>n.has(e)))}static filterSpecialFiles(e){if(!e)return e;const r=["desktop.ini",".ds_store","thumbs.db"];return e.filter((e=>{const n=e.toLowerCase();return!r.includes(n)}))}}const d=async e=>{try{return(await s.post("/self-manage/common-util/app-running-base-env-info",{keys:e})).data}catch(r){return void console.log("err",r)}},u=async e=>{try{return(await s.post("/self-manage/common-util/save-app-running-base-env-info",{envObj:e})).data}catch(r){return void console.log("err",r)}},w=async()=>{let e;try{const r=await s.get("/self-manage/common-util/lan-ip");e=r.data?.ip}catch(r){console.log("err",r)}return e},p=async()=>{let e;try{const r=await s.get("/self-manage/common-util/user-home-dir");e=r.data?.userHomeDir}catch(r){console.log("err",r)}return e},g=async e=>{let r={};try{r=(await s.get(`/self-manage/common-util/dir-and-disk-info?dirPath=${e}`)).data}catch(n){console.log("err",n)}return r},f=async e=>{let r=[];try{const n=await s.get(`/self-manage/common-util/installed-model-files/${e}`);r=n.data?.models}catch(n){console.log("err",n)}return r},m=async e=>{let r=!1;try{const n=await s.get(`/self-manage/common-util/dir-exists?dirPath=${e}`);r=n.data?.exists}catch(n){console.log("err",n)}return r},R=async()=>{let e=null;try{e=(await s.get("/self-manage/common-util/check-docker")).data}catch(r){console.log("err",r)}return e},y=async()=>{let e=null;try{e=(await s.get("/self-manage/common-util/update-global-env")).data}catch(r){console.log("err",r)}return e},_=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(n.RESTART_APP))},h=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(n.EXIT_APP))},N=async e=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(n.KILL_PROCESSES,e))},S=async()=>{const e=await s.get("/self-manage/common-util/get-git-bash-in-root-dir-exist");if(console.log("response?.data?.dir",e?.data?.dir),e?.data?.dir)return!0;if(window.ipcRenderer)try{return await(window.ipcRenderer?.invoke(n.CHECK_GIT))}catch(r){return console.error("check git error",r),!0}},k=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(n.INSTALL_GIT))},I=async e=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(n.CLOSE_RUNNING_WINDOW,e))},b=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.send(n.RUNNING_STATUS_CHANGE,!0))},v=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.send(n.RUNNING_STATUS_CHANGE,!1))};export{l as D,i as I,a as _,s as a,S as b,R as c,I as d,w as e,o as f,d as g,p as h,k as i,h as j,m as k,b as l,v as m,g as n,f as o,N as p,t as q,c as r,u as s,_ as t,y as u};
