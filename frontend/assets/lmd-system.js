import{I as e,a as n}from"./index.js";const r={STOP_AI_RUNNING_INSTANCE:"stop-ai-running-instance",RUNNING_STATUS_CHANGE:"running-status-change",OPEN_GLOBAL_CONFIG_DIALOG:"open-global-config-dialog"},i=async(n,r=!1)=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(e.SELECT_DIR,n,r))};class a{static checkModelsDirValid(e,n){if(e.subdirs=this.filterSpecialFiles(e.subdirs),e.files=this.filterSpecialFiles(e.files),!(e.subdirs&&0!==e.subdirs.length||e.files&&0!==e.files.length))return!0;const r=new Set(e.subdirs);return n.every((e=>r.has(e)))}static filterSpecialFiles(e){if(!e)return e;const n=["desktop.ini",".ds_store","thumbs.db"];return e.filter((e=>{const r=e.toLowerCase();return!n.includes(r)}))}}const t=async e=>{try{return(await n.post("/self-manage/common-util/app-running-base-env-info",{keys:e})).data}catch(r){return void console.log("err",r)}},s=async e=>{try{return(await n.post("/self-manage/common-util/save-app-running-base-env-info",{envObj:e})).data}catch(r){return void console.log("err",r)}},o=async()=>{let e;try{const r=await n.get("/self-manage/common-util/lan-ip");e=r.data?.ip}catch(r){console.log("err",r)}return e},c=async()=>{let e;try{const r=await n.get("/self-manage/common-util/user-home-dir");e=r.data?.userHomeDir}catch(r){console.log("err",r)}return e},d=async e=>{let r={};try{r=(await n.get(`/self-manage/common-util/dir-and-disk-info?dirPath=${e}`)).data}catch(i){console.log("err",i)}return r},l=async e=>{let r=[];try{const i=await n.get(`/self-manage/common-util/installed-model-files/${e}`);r=i.data?.models}catch(i){console.log("err",i)}return r},w=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(e.RESTART_APP))},u=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(e.EXIT_APP))},f=async n=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(e.KILL_PROCESSES,n))},p=async()=>{if(window.ipcRenderer)try{return await(window.ipcRenderer?.invoke(e.CHECK_GIT))}catch(n){return console.error("check git error",n),!0}},g=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(e.INSTALL_GIT))},m=async n=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(e.CLOSE_RUNNING_WINDOW,n))};export{a as D,r as I,m as a,t as b,p as c,o as d,i as e,u as f,c as g,d as h,g as i,l as j,f as k,w as r,s};
