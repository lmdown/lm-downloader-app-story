import{z as a,A as e,o as t,l,b as n,E as s,F as i,q as o,J as r,d as p,n as d,p as c,G as m}from"./vuetify.js";import{e as u,b as f,l as v,$ as g,a0 as y,u as D,j as h,a1 as x,k as _,S as A,K as w,a2 as b,a3 as C,a5 as k,F as V,m as R,Y as $,a8 as M}from"./vue.js";import{_ as I}from"./lmd-system.js";import{A as j,a as B}from"./install-instance.js";import{A as T}from"./AppRunningUtil.js";import{D as L}from"./DateTimeUtil.js";import{r as N,A as F,o as U}from"./index.js";const z={style:{"font-size":"20px","font-weight":"bold",color:"#F2313F"}},P={key:0,style:{"font-size":"16px"},class:"mt-2"},S=I(u({__name:"delete-confirm-dialog-with-loading",props:{modelValue:{type:Boolean},itemName:{},extraTip:{},waitingDeleteResult:{type:Boolean},inProgress:{type:Boolean}},emits:["update:modelValue","confirm"],setup(r,{emit:p}){const d=r,c=p,m=f(!1);v((()=>m.value),(a=>{c("update:modelValue",a)})),v((()=>d.modelValue),(a=>{m.value=a}));const u=()=>{m.value=!1},V=async()=>{c("confirm"),d.waitingDeleteResult||u()};return(r,p)=>(y(),g(a,{modelValue:D(m),"onUpdate:modelValue":p[0]||(p[0]=a=>h(m)?m.value=a:null),"max-width":"660"},{default:x((()=>[_(e,null,{default:x((()=>[_(t,{class:"headline"},{default:x((()=>[A(w(r.$t("AppRunningWindow.ConfirmDelete")),1)])),_:1}),_(l,{class:"d-flex flex-row px-10",style:{"padding-bottom":"60px","padding-top":"60px"}},{default:x((()=>[b("div",null,[_(n,{src:"./images/my-ai/del-tip.svg",width:"164",height:"120"})]),_(l,{style:{flex:"1"}},{default:x((()=>[_(s,null,{default:x((()=>[b("div",z,w(r.itemName)+" "+w(r.$t("LocalApps.ConfirmDeleteTip")),1),r.extraTip?(y(),C("div",P,w(r.extraTip),1)):k("",!0)])),_:1})])),_:1})])),_:1}),_(i,{class:"justify-center mb-2 pt-3",style:{"border-top":"1px solid #EBEBF7"}},{default:x((()=>[_(o,{variant:"outlined",onClick:u},{default:x((()=>[A(w(r.$t("AppRunningWindow.Cancel")),1)])),_:1}),_(o,{variant:"flat",color:"#F2313F",onClick:V,loading:r.inProgress},{default:x((()=>[A(w(r.$t("AppRunningWindow.ModelDeleteBtnLabel")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"]))}}),[["__scopeId","data-v-9762749d"]]),E=I(u({__name:"app-more-controls",props:{instanceData:{}},emits:["deleted"],setup(a,{emit:e}){const t=f(!1),s=a,i=e,d=f(!1),c=()=>{console.log("onMoreClick")},m=()=>{d.value=!0},u=async()=>{console.log("removeApp");try{t.value=!0,T.openAppRunningWindow(s.instanceData.id,j.REMOVE,s.instanceData.installName),await B(s.instanceData.id),console.log("checkDeleteResult 等待结束")}catch(a){console.log(a)}finally{t.value=!1,d.value=!1}i("deleted")};return(a,e)=>{const s=S;return y(),C(V,null,[a.instanceData?.id&&a.instanceData.appRemoveMethod?(y(),g(r,{key:0,location:"bottom"},{activator:x((({props:a})=>[b("div",R({onClick:$(c,["stop"])},a,{class:"more-controls-icon"}),[_(p,{icon:"mdi-dots-horizontal"})],16)])),default:x((()=>[_(l,{style:{"border-radius":"8px"},elevation:"2"},{default:x((()=>[_(o,{onClick:m,size:"large",class:"pr-7"},{default:x((()=>[_(n,{src:"./images/my-ai/del.svg",width:"32",height:"32","max-width":"32","max-height":"32"}),A(" "+w(a.$t("StorageDialog.Delete")),1)])),_:1})])),_:1})])),_:1})):k("",!0),_(s,{"waiting-delete-result":!0,"in-progress":D(t),"model-value":D(d),"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),"extra-tip":a.$t("LocalApps.RemoveTip"),itemName:a.instanceData.name,onConfirm:u},null,8,["in-progress","model-value","extra-tip","itemName"])],64)}}}),[["__scopeId","data-v-71c9d692"]]),W={style:{flex:"1",overflow:"hidden"}},q={class:"small-title-for-version"},G={class:"app-info-item align-center"},J={class:"mx-1"},K={style:{flex:"1"},class:"text-left mx-1"},O={class:"app-info-item align-center"},Y={class:"mx-1"},H=u({__name:"single-installed-instance",props:{appNameVisible:{type:Boolean},iconVisible:{type:Boolean},appVersionVisible:{type:Boolean},appIconUrl:{},cardColorStyleClass:{},instanceData:{}},emits:["deleted"],setup(a,{emit:e}){const i=a,o=f(""),r=e,p=()=>{"instance-card-gray"===i.cardColorStyleClass&&(o.value="instance-card-gray-hover")},u=()=>{o.value=""},v=()=>{console.log("gotoDetailPage",i.instanceData.appId);N.currentRoute.value.name!==F.AppDetail&&N.push({name:F.AppDetail,params:{id:i.instanceData.appId}})},h=()=>{r("deleted")},I=()=>{i.instanceData.appInstallPath&&U(i.instanceData.appInstallPath)};return(a,e)=>{const r=E;return a.instanceData?(y(),g(l,{key:0,class:M(["single-instance-card","rounded-lg",a.cardColorStyleClass||"instance-card-default",D(o)])},{default:x((()=>[_(r,{"instance-data":a.instanceData,onDeleted:h},null,8,["instance-data"]),a.iconVisible&&a.appIconUrl?(y(),g(s,{key:0,style:{display:"flex"}},{default:x((()=>[b("div",null,[_(n,{width:"68",height:"68",cover:"",style:{"border-radius":"8px",cursor:"pointer"},onClick:v,alt:a.instanceData.name,src:a.appIconUrl},null,8,["alt","src"])]),b("div",W,[a.appNameVisible?(y(),g(t,{key:0,onClick:v,style:{"font-size":"1.125rem","font-weight":"bold",color:"rgba(0,0,0,0.75)","padding-right":"0px"}},{default:x((()=>[A(w(a.instanceData.name)+" ",1),_(d,{"open-delay":"900",activator:"parent",location:"bottom",transition:"false"},{default:x((()=>[A(w(a.instanceData.name),1)])),_:1})])),_:1})):k("",!0),_(c,null,{default:x((()=>[A(w(a.$t("LMAppDetail.version"))+" "+w(a.instanceData.version),1)])),_:1})])])),_:1})):k("",!0),a.appVersionVisible?(y(),C(V,{key:1},[e[1]||(e[1]=b("div",{style:{height:"8px"},class:"mt-1"},null,-1)),b("div",q,w(a.$t("LMAppDetail.version"))+" "+w(a.instanceData.version),1)],64)):k("",!0),b("div",G,[_(d,{text:a.$t("LMAppDetail.installedAt"),location:"top"},{activator:x((({props:a})=>[b("div",J,[_(n,R({width:"1.8rem",height:"1.8rem"},a,{src:"./images/app/install-time-gray.svg"}),null,16)])])),_:1},8,["text"]),b("div",K,w(D(L).format(a.instanceData.createTime)),1)]),b("div",O,[b("div",Y,[_(n,{width:"1.8rem",height:"1.8rem",src:"./images/app/model-dir-gray.svg"})]),b("a",{href:"#",style:{flex:"1"},class:"text-left mx-1",onClick:$(I,["prevent"])},[A(w(a.$t("LMAppDetail.appDirectory"))+" > ",1),_(d,{activator:"parent",location:"top"},{default:x((()=>[A(w(a.instanceData.appInstallPath),1)])),_:1})])]),_(m,{class:"mt-6"}),b("a",{href:"#",variant:"flat",class:"control-btn",onClick:e[0]||(e[0]=$((e=>{return t=a.instanceData.id,void T.openAppRunningWindow(t,j.START,i.instanceData.installName);var t}),["prevent"])),onMouseenter:p,onMouseleave:u},w(a.$t("LMAppDetail.RunApp")),33)])),_:1},8,["class"])):k("",!0)}}});export{H as _};
