import{z as a,A as e,o as t,E as l,F as n,q as s,J as i,l as o,b as r,d as p,n as c,p as d,G as m}from"./vuetify.js";import{e as u,b as v,l as f,$ as g,a0 as D,u as y,j as h,a1 as _,k as x,S as A,K as C,a2 as b,a3 as w,a5 as k,F as V,m as R,Y as $,a8 as M}from"./vue.js";import{_ as I}from"./lmd-system.js";import{d as j,A as T}from"./install-instance.js";import{D as B}from"./DateTimeUtil.js";import{A as L}from"./AppRunningUtil.js";import{r as N,A as U,o as P}from"./index.js";const S={key:0,style:{"font-size":"14px",color:"#7D86A4"},class:"mt-2"},z=I(u({__name:"delete-confirm-dialog-with-loading",props:{modelValue:{type:Boolean},itemName:{},extraTip:{},waitingDeleteResult:{type:Boolean},inProgress:{type:Boolean}},emits:["update:modelValue","confirm"],setup(i,{emit:o}){const r=i,p=o,c=v(!1);f((()=>c.value),(a=>{p("update:modelValue",a)})),f((()=>r.modelValue),(a=>{c.value=a}));const d=()=>{c.value=!1},m=async()=>{p("confirm"),r.waitingDeleteResult||d()};return(i,o)=>(D(),g(a,{modelValue:y(c),"onUpdate:modelValue":o[0]||(o[0]=a=>h(c)?c.value=a:null),"max-width":"400"},{default:_((()=>[x(e,null,{default:_((()=>[x(t,{class:"headline"},{default:_((()=>[A(C(i.$t("AppRunningWindow.ConfirmDelete")),1)])),_:1}),x(l,null,{default:_((()=>[b("div",null,C(i.$t("AppRunningWindow.ConfirmDeleteMsg")),1),b("div",null,C(i.itemName),1),i.extraTip?(D(),w("div",S,C(i.extraTip),1)):k("",!0)])),_:1}),x(n,{class:"justify-center mb-2"},{default:_((()=>[x(s,{variant:"outlined",onClick:d},{default:_((()=>[A(C(i.$t("AppRunningWindow.Cancel")),1)])),_:1}),x(s,{variant:"flat",color:"#F2313F",onClick:m,loading:i.inProgress},{default:_((()=>[A(C(i.$t("AppRunningWindow.ModelDeleteBtnLabel")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"]))}}),[["__scopeId","data-v-afc17a70"]]),W=I(u({__name:"app-more-controls",props:{instanceData:{}},emits:["deleted"],setup(a,{emit:e}){const t=v(!1),l=a,n=e,c=v(!1),d=()=>{console.log("onMoreClick")},m=()=>{c.value=!0},u=async()=>{console.log("removeApp");try{t.value=!0,await j(l.instanceData.id)}catch(a){console.log(a)}finally{t.value=!1,c.value=!1}n("deleted")};return(a,e)=>{const l=z;return D(),w(V,null,[a.instanceData?.id&&a.instanceData.appRemoveMethod?(D(),g(i,{key:0,location:"bottom"},{activator:_((({props:a})=>[b("div",R({onClick:$(d,["stop"])},a,{class:"more-controls-icon"}),[x(p,{icon:"mdi-dots-horizontal"})],16)])),default:_((()=>[x(o,{style:{"border-radius":"8px"},elevation:"2"},{default:_((()=>[x(s,{onClick:m,size:"large",class:"pr-7"},{default:_((()=>[x(r,{src:"./images/my-ai/del.svg",width:"32",height:"32","max-width":"32","max-height":"32"}),A(" "+C(a.$t("StorageDialog.Delete")),1)])),_:1})])),_:1})])),_:1})):k("",!0),x(l,{"waiting-delete-result":!0,"in-progress":y(t),"model-value":y(c),"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),"extra-tip":a.$t("LocalApps.RemoveTip"),itemName:a.instanceData.name,onConfirm:u},null,8,["in-progress","model-value","extra-tip","itemName"])],64)}}}),[["__scopeId","data-v-4d43be28"]]),F={style:{flex:"1",overflow:"hidden"}},q={class:"small-title-for-version"},E={class:"app-info-item align-center"},G={class:"mx-1"},J={style:{flex:"1"},class:"text-left mx-1"},K={class:"app-info-item align-center"},Y={class:"mx-1"},H=u({__name:"single-installed-instance",props:{appNameVisible:{type:Boolean},iconVisible:{type:Boolean},appVersionVisible:{type:Boolean},appIconUrl:{},cardColorStyleClass:{},instanceData:{}},emits:["deleted"],setup(a,{emit:e}){const n=a,s=v(""),i=e,p=()=>{"instance-card-gray"===n.cardColorStyleClass&&(s.value="instance-card-gray-hover")},u=()=>{s.value=""},f=()=>{console.log("gotoDetailPage",n.instanceData.appId);N.currentRoute.value.name!==U.AppDetail&&N.push({name:U.AppDetail,params:{id:n.instanceData.appId}})},h=()=>{i("deleted")},I=()=>{n.instanceData.appInstallPath&&P(n.instanceData.appInstallPath)};return(a,e)=>{const i=W;return a.instanceData?(D(),g(o,{key:0,class:M(["single-instance-card","rounded-lg",a.cardColorStyleClass||"instance-card-default",y(s)])},{default:_((()=>[x(i,{"instance-data":a.instanceData,onDeleted:h},null,8,["instance-data"]),a.iconVisible&&a.appIconUrl?(D(),g(l,{key:0,style:{display:"flex"}},{default:_((()=>[b("div",null,[x(r,{width:"68",height:"68",cover:"",style:{"border-radius":"8px",cursor:"pointer"},onClick:f,alt:a.instanceData.name,src:a.appIconUrl},null,8,["alt","src"])]),b("div",F,[a.appNameVisible?(D(),g(t,{key:0,onClick:f,style:{"font-size":"1.125rem","font-weight":"bold",color:"rgba(0,0,0,0.75)","padding-right":"0px"}},{default:_((()=>[A(C(a.instanceData.name)+" ",1),x(c,{"open-delay":"900",activator:"parent",location:"bottom",transition:"false"},{default:_((()=>[A(C(a.instanceData.name),1)])),_:1})])),_:1})):k("",!0),x(d,null,{default:_((()=>[A(C(a.$t("LMAppDetail.version"))+" "+C(a.instanceData.version),1)])),_:1})])])),_:1})):k("",!0),a.appVersionVisible?(D(),w(V,{key:1},[e[1]||(e[1]=b("div",{style:{height:"8px"},class:"mt-1"},null,-1)),b("div",q,C(a.$t("LMAppDetail.version"))+" "+C(a.instanceData.version),1)],64)):k("",!0),b("div",E,[x(c,{text:a.$t("LMAppDetail.installedAt"),location:"top"},{activator:_((({props:a})=>[b("div",G,[x(r,R({width:"1.8rem",height:"1.8rem"},a,{src:"./images/app/install-time-gray.svg"}),null,16)])])),_:1},8,["text"]),b("div",J,C(y(B).format(a.instanceData.createTime)),1)]),b("div",K,[b("div",Y,[x(r,{width:"1.8rem",height:"1.8rem",src:"./images/app/model-dir-gray.svg"})]),b("a",{href:"#",style:{flex:"1"},class:"text-left mx-1",onClick:$(I,["prevent"])},[A(C(a.$t("LMAppDetail.appDirectory"))+" > ",1),x(c,{activator:"parent",location:"top"},{default:_((()=>[A(C(a.instanceData.appInstallPath),1)])),_:1})])]),x(m,{class:"mt-6"}),b("a",{href:"#",variant:"flat",class:"control-btn",onClick:e[0]||(e[0]=$((e=>{return t=a.instanceData.id,void L.openAppRunningWindow(t,T.START,n.instanceData.installName);var t}),["prevent"])),onMouseenter:p,onMouseleave:u},C(a.$t("LMAppDetail.RunApp")),33)])),_:1},8,["class"])):k("",!0)}}});export{H as _};
