import{z as a,A as e,o as t,l,b as s,E as n,F as i,q as o,D as r,J as p,d as c,n as d,p as m,G as u}from"./vuetify.js";import{e as v,b as f,l as g,$ as D,a0 as y,u as h,j as _,a1 as x,k as A,S as R,K as b,a2 as w,a3 as C,a5 as T,c as k,F as V,m as L,Y as M,a8 as S}from"./vue.js";import{_ as B}from"./lmd-system.js";import{O as I,d as $,A as j,a as N}from"./OSUtil.js";import{A as U}from"./AppRunningUtil.js";import{D as F}from"./DateTimeUtil.js";import{r as O,A as P,o as z}from"./index.js";const E={style:{"font-size":"20px","font-weight":"bold",color:"#F2313F"}},G={key:0,style:{"font-size":"16px"},class:"mt-2"},W=B(v({__name:"delete-confirm-dialog-with-loading",props:{modelValue:{type:Boolean},itemName:{},extraTip:{},waitingDeleteResult:{type:Boolean},inProgress:{type:Boolean},remvoeBtnLabel:{}},emits:["update:modelValue","confirm"],setup(r,{emit:p}){const c=r,d=p,m=f(!1);g((()=>m.value),(a=>{d("update:modelValue",a)})),g((()=>c.modelValue),(a=>{m.value=a}));const u=()=>{m.value=!1},v=async()=>{d("confirm"),c.waitingDeleteResult||u()};return(r,p)=>(y(),D(a,{modelValue:h(m),"onUpdate:modelValue":p[0]||(p[0]=a=>_(m)?m.value=a:null),"max-width":"660"},{default:x((()=>[A(e,null,{default:x((()=>[A(t,{class:"headline"},{default:x((()=>[R(b(r.$t("AppRunningWindow.ConfirmDelete")),1)])),_:1}),A(l,{class:"d-flex flex-row px-10",style:{"padding-bottom":"60px","padding-top":"60px"}},{default:x((()=>[w("div",null,[A(s,{src:"./images/my-ai/del-tip.svg",width:"164",height:"120"})]),A(l,{style:{flex:"1"}},{default:x((()=>[A(n,null,{default:x((()=>[w("div",E,b(r.itemName)+" "+b(r.$t("LocalApps.ConfirmDeleteTip")),1),r.extraTip?(y(),C("div",G,b(r.extraTip),1)):T("",!0)])),_:1})])),_:1})])),_:1}),A(i,{class:"justify-center mb-2 pt-3",style:{"border-top":"1px solid #EBEBF7"}},{default:x((()=>[A(o,{variant:"outlined",onClick:u},{default:x((()=>[R(b(r.$t("AppRunningWindow.Cancel")),1)])),_:1}),A(o,{variant:"flat",color:"#F2313F",onClick:v,loading:r.inProgress},{default:x((()=>[R(b(r.remvoeBtnLabel||r.$t("LocalApps.Delete")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"]))}}),[["__scopeId","data-v-a5960fb1"]]);class H{static SCRIPT="script";static DRAG_TO_TRASH="drag_to_trash"}const q=B(v({__name:"app-more-controls",props:{instanceData:{}},emits:["deleted"],setup(a,{emit:e}){const{t:t}=r(),n=f(!1),i=a,d=e,m=f(!1),u=()=>{console.log("onMoreClick")},v=()=>{m.value=!0},g=()=>{const a=i.instanceData.appRemoveMethod;let e="";return e=I.isWindows()?a.windows:a.mac,e},_=k((()=>{let a=t("LocalApps.Delete");return g()===H.DRAG_TO_TRASH&&(a=t("LocalApps.RemoveRecord")),a})),S=k((()=>{let a=t("LocalApps.RemoveTip");return g()===H.DRAG_TO_TRASH&&(a=t("LocalApps.ManualRemoveTip")+t("LocalApps.RemoveTip")),a})),B=async()=>{try{n.value=!0,g()===H.DRAG_TO_TRASH?await $(i.instanceData.id):(U.openAppRunningWindow(i.instanceData.id,j.REMOVE,i.instanceData.installName),await N(i.instanceData.id))}catch(a){console.log(a)}finally{n.value=!1,m.value=!1}d("deleted")};return(a,e)=>{const t=W;return y(),C(V,null,[a.instanceData?.id&&a.instanceData.appRemoveMethod?(y(),D(p,{key:0,location:"bottom"},{activator:x((({props:a})=>[w("div",L({onClick:M(u,["stop"])},a,{class:"more-controls-icon"}),[A(c,{icon:"mdi-dots-horizontal"})],16)])),default:x((()=>[A(l,{style:{"border-radius":"8px"},elevation:"2"},{default:x((()=>[A(o,{onClick:v,size:"large",class:"pr-7"},{default:x((()=>[A(s,{src:"./images/my-ai/del.svg",width:"32",height:"32","max-width":"32","max-height":"32"}),R(" "+b(a.$t("StorageDialog.Delete")),1)])),_:1})])),_:1})])),_:1})):T("",!0),A(t,{"waiting-delete-result":!0,"in-progress":h(n),"model-value":h(m),"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),"extra-tip":h(S),"remvoe-btn-label":h(_),itemName:a.instanceData.name,onConfirm:B},null,8,["in-progress","model-value","extra-tip","remvoe-btn-label","itemName"])],64)}}}),[["__scopeId","data-v-f7da6c42"]]),J={style:{flex:"1",overflow:"hidden"}},K={class:"small-title-for-version"},Y={class:"app-info-item align-center"},Q={class:"mx-1"},X={style:{flex:"1"},class:"text-left mx-1"},Z={class:"app-info-item align-center"},aa={class:"mx-1"},ea=v({__name:"single-installed-instance",props:{appNameVisible:{type:Boolean},iconVisible:{type:Boolean},appVersionVisible:{type:Boolean},appIconUrl:{},cardColorStyleClass:{},instanceData:{},showMoreControls:{type:Boolean}},emits:["deleted"],setup(a,{emit:e}){const i=a,o=f(""),r=e,p=()=>{"instance-card-gray"===i.cardColorStyleClass&&(o.value="instance-card-gray-hover")},c=()=>{o.value=""},v=()=>{console.log("gotoDetailPage",i.instanceData.appId);O.currentRoute.value.name!==P.AppDetail&&O.push({name:P.AppDetail,params:{id:i.instanceData.appId}})},g=()=>{r("deleted")},_=()=>{i.instanceData.appInstallPath&&z(i.instanceData.appInstallPath)};return(a,e)=>{const r=q;return a.instanceData?(y(),D(l,{key:0,class:S(["single-instance-card","rounded-lg",a.cardColorStyleClass||"instance-card-default",h(o)])},{default:x((()=>[a.showMoreControls?(y(),D(r,{key:0,"instance-data":a.instanceData,onDeleted:g},null,8,["instance-data"])):T("",!0),a.iconVisible&&a.appIconUrl?(y(),D(n,{key:1,style:{display:"flex"}},{default:x((()=>[w("div",null,[A(s,{width:"68",height:"68",cover:"",style:{"border-radius":"8px",cursor:"pointer"},onClick:v,alt:a.instanceData.name,src:a.appIconUrl},null,8,["alt","src"])]),w("div",J,[a.appNameVisible?(y(),D(t,{key:0,onClick:v,style:{"font-size":"1.125rem","font-weight":"bold",color:"rgba(0,0,0,0.75)","padding-right":"0px"}},{default:x((()=>[R(b(a.instanceData.name)+" ",1),A(d,{"open-delay":"900",activator:"parent",location:"bottom",transition:"false"},{default:x((()=>[R(b(a.instanceData.name),1)])),_:1})])),_:1})):T("",!0),A(m,null,{default:x((()=>[R(b(a.$t("LMAppDetail.version"))+" "+b(a.instanceData.version),1)])),_:1})])])),_:1})):T("",!0),a.appVersionVisible?(y(),C(V,{key:2},[e[1]||(e[1]=w("div",{style:{height:"8px"},class:"mt-1"},null,-1)),w("div",K,b(a.$t("LMAppDetail.version"))+" "+b(a.instanceData.version),1)],64)):T("",!0),w("div",Y,[A(d,{text:a.$t("LMAppDetail.installedAt"),location:"top"},{activator:x((({props:a})=>[w("div",Q,[A(s,L({width:"1.8rem",height:"1.8rem"},a,{src:"./images/app/install-time-gray.svg"}),null,16)])])),_:1},8,["text"]),w("div",X,b(h(F).format(a.instanceData.createTime)),1)]),w("div",Z,[w("div",aa,[A(s,{width:"1.8rem",height:"1.8rem",src:"./images/app/model-dir-gray.svg"})]),w("a",{href:"#",style:{flex:"1"},class:"text-left mx-1",onClick:M(_,["prevent"])},[R(b(a.$t("LMAppDetail.appDirectory"))+" > ",1),A(d,{activator:"parent",location:"top"},{default:x((()=>[R(b(a.instanceData.appInstallPath),1)])),_:1})])]),A(u,{class:"mt-6"}),w("a",{href:"#",variant:"flat",class:"control-btn",onClick:e[0]||(e[0]=M((e=>{return t=a.instanceData.id,void U.openAppRunningWindow(t,j.START,i.instanceData.installName);var t}),["prevent"])),onMouseenter:p,onMouseleave:c},b(a.$t("LMAppDetail.RunApp")),33)])),_:1},8,["class"])):T("",!0)}}});export{ea as _};
