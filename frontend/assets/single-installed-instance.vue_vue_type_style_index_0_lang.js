import{U as Ye,W as be,X as ke,Y as de,d as ve,Z as Ie,J as De,r as Te,e as re,i as H,F as Ce,g as M,V as E,w as Y,H as z,t as T,c as le,Q as fe,z as Le,u as ye,O as Ve,B as Ae,D as Me,p as L,L as _e,$ as Oe,E as Ne,b as X,K as He,a0 as Pe,k as ue,G as xe,I as Re,a1 as Ue,a2 as je,l as pe,A as he}from"./index.js";import{a as Se,d as Fe}from"./_commonjsHelpers.js";class We{static openAppRunningWindow(S,f){let m=Ye.AppRunning.replace(":id",S);m=be(m,{script:f}),window.ipcRenderer?.invoke(ke.OPEN_RUNNING_WINDOW,S,m)}}var ae={exports:{}},Be=ae.exports,me;function we(){return me||(me=1,function(V,S){(function(f,h){V.exports=h()})(Be,function(){var f=1e3,h=6e4,m=36e5,v="millisecond",u="second",_="minute",$="hour",r="day",l="week",c="month",F="quarter",A="year",O="date",P="Invalid Date",q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,J={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var n=["th","st","nd","rd"],e=s%100;return"["+s+(n[(e-20)%10]||n[e]||n[0])+"]"}},Q=function(s,n,e){var a=String(s);return!a||a.length>=n?s:""+Array(n+1-a.length).join(e)+s},x={s:Q,z:function(s){var n=-s.utcOffset(),e=Math.abs(n),a=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+Q(a,2,"0")+":"+Q(t,2,"0")},m:function s(n,e){if(n.date()<e.date())return-s(e,n);var a=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(a,c),i=e-t<0,o=n.clone().add(a+(i?-1:1),c);return+(-(a+(e-t)/(i?t-o:o-t))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:c,y:A,w:l,d:r,D:O,h:$,m:_,s:u,ms:v,Q:F}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},b="en",k={};k[b]=J;var W="$isDayjsObject",R=function(s){return s instanceof te||!(!s||!s[W])},ee=function s(n,e,a){var t;if(!n)return b;if(typeof n=="string"){var i=n.toLowerCase();k[i]&&(t=i),e&&(k[i]=e,t=i);var o=n.split("-");if(!t&&o.length>1)return s(o[0])}else{var p=n.name;k[p]=n,t=p}return!a&&t&&(b=t),t||!a&&b},D=function(s,n){if(R(s))return s.clone();var e=typeof n=="object"?n:{};return e.date=s,e.args=arguments,new te(e)},d=x;d.l=ee,d.i=R,d.w=function(s,n){return D(s,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var te=function(){function s(e){this.$L=ee(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[W]=!0}var n=s.prototype;return n.parse=function(e){this.$d=function(a){var t=a.date,i=a.utc;if(t===null)return new Date(NaN);if(d.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var o=t.match(q);if(o){var p=o[2]-1||0,g=(o[7]||"0").substring(0,3);return i?new Date(Date.UTC(o[1],p,o[3]||1,o[4]||0,o[5]||0,o[6]||0,g)):new Date(o[1],p,o[3]||1,o[4]||0,o[5]||0,o[6]||0,g)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return d},n.isValid=function(){return this.$d.toString()!==P},n.isSame=function(e,a){var t=D(e);return this.startOf(a)<=t&&t<=this.endOf(a)},n.isAfter=function(e,a){return D(e)<this.startOf(a)},n.isBefore=function(e,a){return this.endOf(a)<D(e)},n.$g=function(e,a,t){return d.u(e)?this[a]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,a){var t=this,i=!!d.u(a)||a,o=d.p(e),p=function(j,I){var N=d.w(t.$u?Date.UTC(t.$y,I,j):new Date(t.$y,I,j),t);return i?N:N.endOf(r)},g=function(j,I){return d.w(t.toDate()[j].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(I)),t)},y=this.$W,w=this.$M,C=this.$D,B="set"+(this.$u?"UTC":"");switch(o){case A:return i?p(1,0):p(31,11);case c:return i?p(1,w):p(0,w+1);case l:var U=this.$locale().weekStart||0,G=(y<U?y+7:y)-U;return p(i?C-G:C+(6-G),w);case r:case O:return g(B+"Hours",0);case $:return g(B+"Minutes",1);case _:return g(B+"Seconds",2);case u:return g(B+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,a){var t,i=d.p(e),o="set"+(this.$u?"UTC":""),p=(t={},t[r]=o+"Date",t[O]=o+"Date",t[c]=o+"Month",t[A]=o+"FullYear",t[$]=o+"Hours",t[_]=o+"Minutes",t[u]=o+"Seconds",t[v]=o+"Milliseconds",t)[i],g=i===r?this.$D+(a-this.$W):a;if(i===c||i===A){var y=this.clone().set(O,1);y.$d[p](g),y.init(),this.$d=y.set(O,Math.min(this.$D,y.daysInMonth())).$d}else p&&this.$d[p](g);return this.init(),this},n.set=function(e,a){return this.clone().$set(e,a)},n.get=function(e){return this[d.p(e)]()},n.add=function(e,a){var t,i=this;e=Number(e);var o=d.p(a),p=function(w){var C=D(i);return d.w(C.date(C.date()+Math.round(w*e)),i)};if(o===c)return this.set(c,this.$M+e);if(o===A)return this.set(A,this.$y+e);if(o===r)return p(1);if(o===l)return p(7);var g=(t={},t[_]=h,t[$]=m,t[u]=f,t)[o]||1,y=this.$d.getTime()+e*g;return d.w(y,this)},n.subtract=function(e,a){return this.add(-1*e,a)},n.format=function(e){var a=this,t=this.$locale();if(!this.isValid())return t.invalidDate||P;var i=e||"YYYY-MM-DDTHH:mm:ssZ",o=d.z(this),p=this.$H,g=this.$m,y=this.$M,w=t.weekdays,C=t.months,B=t.meridiem,U=function(I,N,K,ne){return I&&(I[N]||I(a,i))||K[N].slice(0,ne)},G=function(I){return d.s(p%12||12,I,"0")},j=B||function(I,N,K){var ne=I<12?"AM":"PM";return K?ne.toLowerCase():ne};return i.replace(Z,function(I,N){return N||function(K){switch(K){case"YY":return String(a.$y).slice(-2);case"YYYY":return d.s(a.$y,4,"0");case"M":return y+1;case"MM":return d.s(y+1,2,"0");case"MMM":return U(t.monthsShort,y,C,3);case"MMMM":return U(C,y);case"D":return a.$D;case"DD":return d.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return U(t.weekdaysMin,a.$W,w,2);case"ddd":return U(t.weekdaysShort,a.$W,w,3);case"dddd":return w[a.$W];case"H":return String(p);case"HH":return d.s(p,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return j(p,g,!0);case"A":return j(p,g,!1);case"m":return String(g);case"mm":return d.s(g,2,"0");case"s":return String(a.$s);case"ss":return d.s(a.$s,2,"0");case"SSS":return d.s(a.$ms,3,"0");case"Z":return o}return null}(I)||o.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,a,t){var i,o=this,p=d.p(a),g=D(e),y=(g.utcOffset()-this.utcOffset())*h,w=this-g,C=function(){return d.m(o,g)};switch(p){case A:i=C()/12;break;case c:i=C();break;case F:i=C()/3;break;case l:i=(w-y)/6048e5;break;case r:i=(w-y)/864e5;break;case $:i=w/m;break;case _:i=w/h;break;case u:i=w/f;break;default:i=w}return t?i:d.a(i)},n.daysInMonth=function(){return this.endOf(c).$D},n.$locale=function(){return k[this.$L]},n.locale=function(e,a){if(!e)return this.$L;var t=this.clone(),i=ee(e,a,!0);return i&&(t.$L=i),t},n.clone=function(){return d.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},s}(),ce=te.prototype;return D.prototype=ce,[["$ms",v],["$s",u],["$m",_],["$H",$],["$W",r],["$M",c],["$y",A],["$D",O]].forEach(function(s){ce[s[1]]=function(n){return this.$g(n,s[0],s[1])}}),D.extend=function(s,n){return s.$i||(s(n,te,D),s.$i=!0),D},D.locale=ee,D.isDayjs=R,D.unix=function(s){return D(1e3*s)},D.en=k[b],D.Ls=k,D.p={},D})}(ae)),ae.exports}var ze=we();const se=Se(ze);var ie={exports:{}},Ee=ie.exports,ge;function qe(){return ge||(ge=1,function(V,S){(function(f,h){V.exports=h(we())})(Ee,function(f){function h(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var m=h(f),v={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(u,_){return _==="W"?u+"周":u+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(u,_){var $=100*u+_;return $<600?"凌晨":$<900?"早上":$<1100?"上午":$<1300?"中午":$<1800?"下午":"晚上"}};return m.default.locale(v,null,!0),v})}(ie)),ie.exports}qe();var oe={exports:{}},Ze=oe.exports,$e;function Je(){return $e||($e=1,function(V,S){(function(f,h){V.exports=h()})(Ze,function(){return function(f,h,m){f=f||{};var v=h.prototype,u={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function _(r,l,c,F){return v.fromToBase(r,l,c,F)}m.en.relativeTime=u,v.fromToBase=function(r,l,c,F,A){for(var O,P,q,Z=c.$locale().relativeTime||u,J=f.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],Q=J.length,x=0;x<Q;x+=1){var b=J[x];b.d&&(O=F?m(r).diff(c,b.d,!0):c.diff(r,b.d,!0));var k=(f.rounding||Math.round)(Math.abs(O));if(q=O>0,k<=b.r||!b.r){k<=1&&x>0&&(b=J[x-1]);var W=Z[b.l];A&&(k=A(""+k)),P=typeof W=="string"?W.replace("%d",k):W(k,l,b.l,q);break}}if(l)return P;var R=q?Z.future:Z.past;return typeof R=="function"?R(P):R.replace("%s",P)},v.to=function(r,l){return _(r,l,this,!0)},v.from=function(r,l){return _(r,l,this)};var $=function(r){return r.$u?m.utc():m()};v.toNow=function(r){return this.to($(this),r)},v.fromNow=function(r){return this.from($(this),r)}}})}(oe)),oe.exports}var Qe=Je();const Ge=Se(Qe);se.extend(Ge);class Ke{static getLocaleStr(){const S=de.getCurrentLocale();return{en:"en-US",zhHans:"zh-CN"}[S]||"en-US"}static format(S){if(S===void 0)return"";let f;return typeof S=="string"?f=new Date(S):f=S,de.localeIsEn()?se.locale("en"):se.locale("zh-cn"),se(f).fromNow()}}const Xe=ve({__name:"storage-simple-btn",props:{installedInstance:{}},emits:["deleted"],setup(V,{emit:S}){const f=Ie("showToastMessage"),{t:h}=De(),m=V,v=S,u=Te(!1),_=async()=>{try{await Fe(m.installedInstance.id),f&&f(h("StorageDialog.DeleteFinished"),"success"),v("deleted"),u.value=!1}catch(r){const l=r;let c="Error";c=l.response?.data?.error,f&&c&&f(h(`Api.${c}`),"error")}},$=()=>{m.installedInstance.appInstallPath?Oe(m.installedInstance.appInstallPath):u.value=!0};return(r,l)=>(H(),re(Ce,null,[M(E,{variant:"flat",color:"amber-lighten-5",onClick:$},{prepend:Y(()=>[m.installedInstance.appInstallPath?(H(),le(fe,{key:1,icon:"mdi-folder-outline"})):(H(),le(fe,{key:0,color:"error",icon:"mdi-folder-alert-outline"}))]),default:Y(()=>[z(" "+T(r.$t("StorageDialog.installDir")),1)]),_:1}),M(Le,{modelValue:ye(u),"onUpdate:modelValue":l[1]||(l[1]=c=>Ve(u)?u.value=c:null),"max-width":"400"},{default:Y(()=>[M(Ae,{"prepend-icon":"mdi-folder-alert-outline",title:r.$t("StorageDialog.MissingFiles")},{actions:Y(()=>[M(_e),M(E,{onClick:l[0]||(l[0]=c=>u.value=!1)},{default:Y(()=>[L("p",null,T(r.$t("StorageDialog.Cancel")),1)]),_:1}),M(E,{color:"error",onClick:_},{default:Y(()=>[L("p",null,T(r.$t("StorageDialog.Delete")),1)]),_:1})]),default:Y(()=>[M(Me,null,{default:Y(()=>[L("p",null,T(r.$t("StorageDialog.FilesErrorTip")),1),L("p",null,T(r.$t("StorageDialog.FilesDeleteTip")),1)]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64))}}),et={key:0},tt={style:{flex:"1"}},nt={key:0,class:"small-title-for-version"},rt={class:"app-info-item align-center"},at={style:{flex:"1","text-align":"center"}},st={class:"app-info-item align-center"},it={key:1,style:{"text-align":"center"}},ut=ve({__name:"single-installed-instance",props:{appNameVisible:{type:Boolean},iconVisible:{type:Boolean},appVersionVisible:{type:Boolean},appIconUrl:{},bgColor:{},instanceData:{}},emits:["deleted","refresh"],setup(V,{emit:S}){const{t:f}=De(),h=V,m=S;Ne(()=>{const r="./images/icons/lmd-logo.png",l={};return h.instanceData?(h.instanceData.installMethod==="import"?(l.type="icon",l.value="mdi-application-import",l.installMethodStr=f("InstalledApps.Imported")):(l.type="img",l.value=r,l.installMethodStr=f("InstalledApps.InstalledByLMD")),l):null});const v=()=>{console.log("gotoDetailPage",h.instanceData.appId),pe.currentRoute.value.name!==he.AppDetail&&pe.push({name:he.AppDetail,params:{id:h.instanceData.appId}})},u=r=>{We.openAppRunningWindow(r,"start")},_=()=>{m("deleted")},$=()=>{m("refresh")};return(r,l)=>r.instanceData?(H(),le(He,{key:0,class:"single-instance-card rounded-lg",style:Pe(`background-color: ${r.bgColor||"#FFF6EE"};`)},{default:Y(()=>[M(Me,{style:{display:"flex"}},{default:Y(()=>[r.iconVisible&&r.appIconUrl?(H(),re("div",et,[M(ue,{width:"68",height:"68",cover:"",style:{"border-radius":"8px",cursor:"pointer"},onClick:v,alt:r.instanceData.name,src:r.appIconUrl},null,8,["alt","src"])])):X("",!0),L("div",tt,[r.appNameVisible?(H(),le(xe,{key:0,onClick:v,style:{"font-size":"1.125rem","font-weight":"bold",color:"rgba(0,0,0,0.75)"}},{default:Y(()=>[z(T(r.instanceData.name),1)]),_:1})):X("",!0),M(Re,null,{default:Y(()=>[z(T(r.$t("LMAppDetail.version"))+" "+T(r.instanceData.version),1)]),_:1})])]),_:1}),r.appVersionVisible?(H(),re("div",nt,T(r.$t("LMAppDetail.version"))+" "+T(r.instanceData.version),1)):X("",!0),L("div",rt,[M(je,{text:r.$t("LMAppDetail.installedAt"),location:"top"},{activator:Y(({props:c})=>[L("div",null,[M(ue,Ue({width:"32",height:"2rem"},c,{src:"./images/app/install-time.png"}),null,16)])]),_:1},8,["text"]),L("div",at,T(ye(Ke).format(r.instanceData.createTime)),1)]),L("div",st,[L("div",null,[M(ue,{width:"2rem",height:"2rem",src:"./images/app/model-dir.png"})]),M(E,{variant:"text",style:{flex:"1"}},{default:Y(()=>[z(T(r.$t("LMAppDetail.appDirectory"))+" > ",1)]),_:1})]),M(_e,{class:"mt-6"}),M(E,{variant:"flat",class:"control-btn",onClick:l[0]||(l[0]=c=>u(r.instanceData.id))},{default:Y(()=>[z(T(r.$t("LMAppDetail.RunApp")),1)]),_:1}),r.instanceData.appInstallPath?X("",!0):(H(),re("div",it,[l[2]||(l[2]=L("div",{class:"mt-2"},null,-1)),M(Xe,{onDeleted:_,"installed-instance":r.instanceData},null,8,["installed-instance"]),M(E,{variant:"flat",color:"light-green-lighten-5","prepend-icon":"mdi-folder-refresh-outline",onClick:l[1]||(l[1]=c=>$())},{default:Y(()=>[z(T(r.$t("StorageDialog.Refresh")),1)]),_:1}),l[3]||(l[3]=L("div",{class:"pb-2"},null,-1))]))]),_:1},8,["style"])):X("",!0)}});export{We as A,ut as _};
