import{b as a,c as e,u as t}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{T as s,L as l,r as o,A as i}from"./index.js";import{s as n,b as r,J as c,p as d,l as p,d as m,X as v}from"./vuetify.js";import{e as y,b as u,H as g,c as h,a3 as f,a5 as _,$ as b,u as k,a1 as w,k as D,a2 as I,K as x,a0 as T,Y as L,S as C,F as R,m as O}from"./vue.js";import{g as F}from"./app-info.js";import{_ as A}from"./lmd-system.js";class P{static LOCAL_APP=10;static ONLINE_APP=11;static TUT_TEXT=20;static TUT_VIDEO=21}const S=a(),$={key:0,class:"fav-btn-normal",style:{height:"24px",width:"68px"}},z={class:"btn-label"},E={key:1,class:"fav-btn-large"},j={class:"btn-label",style:{"margin-left":"8px"}},M=y({__name:"fav-btn-normal",props:{resType:{},resId:{},btnStyle:{}},emits:["addFav","removeFav"],setup(a,{emit:t}){const l=a,o=u(null),i=u(!1),d=t;g((()=>{p()}));const p=async()=>{i.value=!0;try{o.value=await(async(a,t)=>{if(S.getToken())return(await e.get(`/api/fav/res/${t}/type/${a}`)).data;return null})(l.resType,l.resId)}catch(a){console.error(a)}finally{i.value=!1}},m=async()=>{i.value=!0,console.log("favToggle",o.value);try{o.value&&o.value.resId?(console.log("removeFav"),await(async(a,t)=>{const s={resType:a,resId:t};return console.log("favData:",s),(await e.delete(`/api/fav/res/${t}/type/${a}`)).data})(l.resType,l.resId),console.log("emit removeFav "),d("removeFav")):(console.log("addFav"),await(async(a,t)=>{const s={resType:a,resId:t};return console.log("favData:",s),(await e.post("/api/fav",s)).data})(l.resType,l.resId))}catch(a){console.error(a)}finally{i.value=!1}p()},v=h((()=>o.value?.resId===l.resId));return(a,e)=>a.btnStyle?"large"===a.btnStyle?(T(),f("div",E,[k(i)?(T(),b(c,{key:1,size:"20",color:k(s).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(T(),b(n,{key:0,size:"large",variant:"text",class:"action-btn",onClick:m},{default:w((()=>[D(r,{src:k(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg",width:"20",height:"20","max-width":"20","max-height":"20"},null,8,["src"]),I("span",j,x(k(v)?a.$t("Tutorial.Unstar"):a.$t("Tutorial.Star")),1)])),_:1}))])):"rounded"===a.btnStyle?(T(),f("div",{key:2,class:"fav-btn-rounded",onClick:m},[k(i)?(T(),b(c,{key:1,size:"20",color:k(s).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(T(),b(r,{key:0,width:"20",height:"20","max-width":"20","max-height":"20",src:k(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg"},null,8,["src"]))])):"noborder"===a.btnStyle?(T(),f("div",{key:3,class:"fav-btn-noborder",onClick:m},[k(i)?(T(),b(c,{key:1,size:"32",color:k(s).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(T(),b(r,{key:0,width:"32",height:"32","max-width":"32","max-height":"32",src:k(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg"},null,8,["src"]))])):_("",!0):(T(),f("div",$,[k(i)?(T(),b(c,{key:1,size:"16",color:k(s).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(T(),b(n,{key:0,variant:"text",density:"compact",class:"action-btn",onClick:m},{default:w((()=>[D(r,{src:k(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg",width:"16",height:"16","max-width":"16","max-height":"16"},null,8,["src"]),I("span",z,x(a.$t("Tutorial.Star")),1)])),_:1}))]))}});class N{static getLocaleDesc(a){return l.localeIsEn()?a.desc_en:a.desc_zh}static getLocaleDescByLocalVal(a,e){return l.localeIsEnByVal(e)?a.desc_en:a.desc_zh}static checkIsDownloadable(a){return!!a.alias}}const Y={style:{width:"40px",height:"40px",display:"block"}},U={class:"app-title-container"},V={class:"app-title"},B={key:0,class:"app-short-desc"},J=A(y({__name:"single-app-item",props:{appData:{}},emits:["removeFav"],setup(a,{emit:e}){const s=a,l=e,n=t(),c=h((()=>N.getLocaleDescByLocalVal(s.appData,n.currentLocale))),y=h((()=>N.checkIsDownloadable(s.appData))),u=async()=>{const{refLinks:a,url:e}=s.appData;let t;if(s.appData.alias)g();else{if(a){t=JSON.parse(a)[0].homepage}else e&&(t=e);A(t)}},g=async()=>{const a=(await F(s.appData.alias)).id;o.push({name:i.AppDetail,params:{id:a}})},A=a=>{const e=document.createElement("a");e.href=a,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)},S=()=>{console.log("onMoreClick")},$=()=>{console.log("onFavRemove"),l("removeFav")};return(a,e)=>{const t=M;return T(),f("div",{class:"app-item",onClick:L(u,["prevent"])},[k(y)?(T(),b(r,{key:0,class:"downloadable-icon",transition:"false",width:"36",height:"36",src:"./images/icons/downloadable.png"},{default:w((()=>[D(d,{activator:"parent",location:"top",transition:"false"},{default:w((()=>[C(x(a.$t("UniversalApps.Downloadable")),1)])),_:1})])),_:1})):(T(),f(R,{key:1},[a.appData.id?(T(),b(v,{key:0,location:"bottom"},{activator:w((({props:a})=>[I("div",O({onClick:L(S,["stop"])},a,{class:"more-controls-icon"}),[D(m,{icon:"mdi-dots-horizontal"})],16)])),default:w((()=>[D(p,{style:{"border-radius":"8px"},elevation:"2"},{default:w((()=>[D(t,{"btn-style":"large","res-id":a.appData.id,onRemoveFav:$,"res-type":k(P).ONLINE_APP},null,8,["res-id","res-type"])])),_:1})])),_:1})):_("",!0)],64)),I("div",Y,[D(r,{width:"40",height:"40",src:a.appData.icon,transition:"false"},null,8,["src"])]),I("div",U,[I("div",V,[C(x(a.appData.name)+" ",1),D(d,{"open-delay":"1000",activator:"parent",location:"top",transition:"false"},{default:w((()=>[C(x(a.appData.name),1)])),_:1})]),k(c)?(T(),f("div",B,[C(x(k(c))+" ",1),D(d,{"open-delay":"700",activator:"parent",location:"bottom",transition:"false"},{default:w((()=>[C(x(k(c)),1)])),_:1})])):_("",!0)])])}}}),[["__scopeId","data-v-ea103fa4"]]);export{P as F,J as S,M as _};
