import{c as a,e,T as t,L as s,r as l,A as o}from"./index.js";import{q as i,b as n,H as r,n as c,l as d,d as p,X as m}from"./vuetify.js";import{e as v,b as y,H as u,c as g,a3 as h,a5 as f,$ as _,u as b,a1 as k,k as w,a2 as D,K as I,a0 as x,Y as T,S as L,F as C,m as R}from"./vue.js";import{g as O}from"./app-info.js";import{u as F}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{_ as A}from"./lmd-system.js";class P{static LOCAL_APP=10;static ONLINE_APP=11;static TUT_TEXT=20;static TUT_VIDEO=21}const S=a(),$={key:0,class:"fav-btn-normal",style:{height:"24px",width:"68px"}},z={class:"btn-label"},E={key:1,class:"fav-btn-large"},j={class:"btn-label",style:{"margin-left":"8px"}},M=v({__name:"fav-btn-normal",props:{resType:{},resId:{},btnStyle:{}},emits:["addFav","removeFav"],setup(a,{emit:s}){const l=a,o=y(null),c=y(!1),d=s;u((()=>{p()}));const p=async()=>{c.value=!0;try{o.value=await(async(a,t)=>{if(S.getToken())return(await e.get(`/api/fav/res/${t}/type/${a}`)).data;return null})(l.resType,l.resId)}catch(a){console.error(a)}finally{c.value=!1}},m=async()=>{c.value=!0,console.log("favToggle",o.value);try{o.value&&o.value.resId?(console.log("removeFav"),await(async(a,t)=>{const s={resType:a,resId:t};return console.log("favData:",s),(await e.delete(`/api/fav/res/${t}/type/${a}`)).data})(l.resType,l.resId),console.log("emit removeFav "),d("removeFav")):(console.log("addFav"),await(async(a,t)=>{const s={resType:a,resId:t};return console.log("favData:",s),(await e.post("/api/fav",s)).data})(l.resType,l.resId))}catch(a){console.error(a)}finally{c.value=!1}p()},v=g((()=>o.value?.resId===l.resId));return(a,e)=>a.btnStyle?"large"===a.btnStyle?(x(),h("div",E,[b(c)?(x(),_(r,{key:1,size:"20",color:b(t).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(x(),_(i,{key:0,size:"large",variant:"text",class:"action-btn",onClick:m},{default:k((()=>[w(n,{src:b(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg",width:"20",height:"20","max-width":"20","max-height":"20"},null,8,["src"]),D("span",j,I(b(v)?a.$t("Tutorial.Unstar"):a.$t("Tutorial.Star")),1)])),_:1}))])):"rounded"===a.btnStyle?(x(),h("div",{key:2,class:"fav-btn-rounded",onClick:m},[b(c)?(x(),_(r,{key:1,size:"20",color:b(t).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(x(),_(n,{key:0,width:"20",height:"20","max-width":"20","max-height":"20",src:b(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg"},null,8,["src"]))])):"noborder"===a.btnStyle?(x(),h("div",{key:3,class:"fav-btn-noborder",onClick:m},[b(c)?(x(),_(r,{key:1,size:"32",color:b(t).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(x(),_(n,{key:0,width:"32",height:"32","max-width":"32","max-height":"32",src:b(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg"},null,8,["src"]))])):f("",!0):(x(),h("div",$,[b(c)?(x(),_(r,{key:1,size:"16",color:b(t).PRIMARY_COLOR,indeterminate:""},null,8,["color"])):(x(),_(i,{key:0,variant:"text",density:"compact",class:"action-btn",onClick:m},{default:k((()=>[w(n,{src:b(v)?"./images/my-ai/star1-fill.svg":"./images/my-ai/star1-outline.svg",width:"16",height:"16","max-width":"16","max-height":"16"},null,8,["src"]),D("span",z,I(a.$t("Tutorial.Star")),1)])),_:1}))]))}});class N{static getLocaleDesc(a){return s.localeIsEn()?a.desc_en:a.desc_zh}static getLocaleDescByLocalVal(a,e){return s.localeIsEnByVal(e)?a.desc_en:a.desc_zh}static checkIsDownloadable(a){return!!a.alias}}const Y={style:{width:"40px",height:"40px",display:"block"}},U={class:"app-title-container"},V={class:"app-title"},B={key:0,class:"app-short-desc"},H=A(v({__name:"single-app-item",props:{appData:{}},emits:["removeFav"],setup(a,{emit:e}){const t=a,s=e,i=F(),r=g((()=>N.getLocaleDescByLocalVal(t.appData,i.currentLocale))),v=g((()=>N.checkIsDownloadable(t.appData))),y=async()=>{const{refLinks:a,url:e}=t.appData;let s;if(t.appData.alias)u();else{if(a){s=JSON.parse(a)[0].homepage}else e&&(s=e);A(s)}},u=async()=>{const a=(await O(t.appData.alias)).id;l.push({name:o.AppDetail,params:{id:a}})},A=a=>{const e=document.createElement("a");e.href=a,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)},S=()=>{console.log("onMoreClick")},$=()=>{console.log("onFavRemove"),s("removeFav")};return(a,e)=>{const t=M;return x(),h("div",{class:"app-item",onClick:T(y,["prevent"])},[b(v)?(x(),_(n,{key:0,class:"downloadable-icon",transition:"false",width:"36",height:"36",src:"./images/icons/downloadable.png"},{default:k((()=>[w(c,{activator:"parent",location:"top",transition:"false"},{default:k((()=>[L(I(a.$t("UniversalApps.Downloadable")),1)])),_:1})])),_:1})):(x(),h(C,{key:1},[a.appData.id?(x(),_(m,{key:0,location:"bottom"},{activator:k((({props:a})=>[D("div",R({onClick:T(S,["stop"])},a,{class:"more-controls-icon"}),[w(p,{icon:"mdi-dots-horizontal"})],16)])),default:k((()=>[w(d,{style:{"border-radius":"8px"},elevation:"2"},{default:k((()=>[w(t,{"btn-style":"large","res-id":a.appData.id,onRemoveFav:$,"res-type":b(P).ONLINE_APP},null,8,["res-id","res-type"])])),_:1})])),_:1})):f("",!0)],64)),D("div",Y,[w(n,{width:"40",height:"40",src:a.appData.icon,transition:"false"},null,8,["src"])]),D("div",U,[D("div",V,[L(I(a.appData.name)+" ",1),w(c,{"open-delay":"1000",activator:"parent",location:"top",transition:"false"},{default:k((()=>[L(I(a.appData.name),1)])),_:1})]),b(r)?(x(),h("div",B,[L(I(b(r))+" ",1),w(c,{"open-delay":"700",activator:"parent",location:"bottom",transition:"false"},{default:k((()=>[L(I(b(r)),1)])),_:1})])):f("",!0)])])}}}),[["__scopeId","data-v-ea103fa4"]]);export{P as F,H as S,M as _};
