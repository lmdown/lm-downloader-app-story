import{a as e,i as l,c as a,b as t,_ as s,u as n}from"./lmd-system.js";import{b as i,g as o,T as p,L as r}from"./index.js";import{z as d,A as u,B as c,o as m,l as f,b as g,p as A,C as D,D as y,E as v,q as h,s as _,F as L,G as b,H as x,I as k,J as w,n as M,d as T,w as I,x as C,y as V,K as $,r as R}from"./vuetify.js";import{f as F,b as O,v as S,a3 as j,a5 as B,k as U,X as E,O as N,l as H,a8 as z,a4 as q,a6 as W,F as G,u as P,y as K,a7 as Y,ab as J,L as X,e as Q,x as Z,m as ee,E as le,ac as ae,ad as te}from"./vue.js";import{A as se,a as ne,I as ie,g as oe,c as pe,O as re}from"./OSUtil.js";import{u as de}from"./index2.js";import{d as ue}from"./pinia.js";import{A as ce}from"./AppInfoUtil.js";import{N as me}from"./vue-easy-lightbox.js";import{a as fe,C as ge,u as Ae,_ as De}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{_ as ye}from"./single-installed-instance.vue_vue_type_style_index_0_lang.js";import"./xterm.js";import"./debounce.js";import"./vuei18n.js";import"./lmd-locales.js";import"./delete-confirm-dialog-with-loading.js";import"./DateTimeUtil.js";import"./dayjs.js";const ve=ue("installedInstance",{state:()=>({installCurrentApp:!1,instancesForApp:[],instancesForAppLoading:!1,instanceForRunning:{}}),actions:{async getInstalledInstanceForApp(l){try{this.instancesForAppLoading=!0;const a=await e.get(`/self-manage/installed-instance/app/${l}`);this.instancesForApp=a.data,this.instancesForAppLoading=!1}catch(a){console.error("Failed to fetch app:",a)}},async getInstalledInstanceForRunning(l){try{const a=await e.get(`/self-manage/installed-instance/${l}`);this.instanceForRunning=a.data}catch(a){console.error("Failed to fetch app:",a)}},installAppTrigger(){this.installCurrentApp=!0,setTimeout((()=>{this.installCurrentApp=!1}),100)}}}),he=F({__name:"install-confirm-dialog",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},title2:{type:String,default:""},message:{type:String,default:""},cancelBtnLabel:{type:String,default:""},confirmBtnLabel:{type:String,default:""}},emits:["update:modelValue","confirm","cancel"],setup(e,{emit:a}){const{addToast:t}=i(),{t:s}=d(),n=e,o=a,p=O(n.modelValue),r=O(!1);S((()=>n.modelValue),(e=>{p.value=e})),S(p,(e=>{o("update:modelValue",e)}));const _=()=>{p.value=!1,o("cancel")},L=async()=>{r.value=!0;const e=await l();if(!e)return t(s("LMAppDetail.InstallToolDialogErrorMsg"),"error"),void(r.value=!1);console.log("installResult",e),p.value=!1,r.value=!1,o("confirm")};return(l,a)=>(q(),j(u,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),"max-width":"680","min-width":"400",persistent:r.value},{default:B((()=>[U(c,{class:"px-0"},{default:B((()=>[U(m,{class:"dialog-title"},{default:B((()=>[E(N(e.title),1)])),_:1}),U(f,{class:"d-flex flex-row px-10",style:{"padding-bottom":"64px","padding-top":"64px"}},{default:B((()=>[H("div",null,[U(g,{src:"./images/app/task.svg",width:"164",height:"120"})]),U(f,{style:{flex:"1"}},{default:B((()=>[U(A,{class:"dialog-title2"},{default:B((()=>[E(N(e.title2),1)])),_:1}),U(D,null,{default:B((()=>[E(N(e.message),1)])),_:1})])),_:1})])),_:1}),U(y,{class:"confirm-actions"},{default:B((()=>[U(v),r.value?z("",!0):(q(),j(h,{key:0,variant:"outlined",onClick:_},{default:B((()=>[E(N(e.cancelBtnLabel),1)])),_:1})),U(h,{variant:"flat",color:"primary",onClick:L,disabled:r.value,loading:r.value},{default:B((()=>[E(N(e.confirmBtnLabel),1)])),_:1},8,["disabled","loading"]),U(v)])),_:1})])),_:1})])),_:1},8,["modelValue","persistent"]))}}),_e=F({__name:"model-download-btn",props:{lmAppData:{},modelReq:{}},setup(e){const l=O(!1),a=ve(),{t:t}=d(),s=e,n=()=>{const e=a.instancesForApp;e&&e.length>0?g():i()},i=()=>{l.value=!0},o=()=>{l.value=!1},p=()=>{if(s.modelReq?.displaySubtitle)return s.modelReq?.displaySubtitle},r=()=>{o()},u=()=>{o(),setTimeout((()=>{c()}),500)},c=()=>{a.installAppTrigger()},g=()=>{const e=a.instancesForApp;e&&e.length>0&&se.openAppRunningWindow(e[0].id,ne.DOWNLOAD_MODEL,s.lmAppData.installName,s.modelReq)};return(e,a)=>{const i=he;return q(),W(G,null,[U(f,{class:"model-download-btn mt-10",onClick:n},{default:B((()=>[U(m,null,{default:B((()=>[E(N(s.modelReq?.displayTitle?s.modelReq?.displayTitle:t("LMAppDetail.ModelDownloadTitle")),1)])),_:1}),U(A,null,{default:B((()=>[E(N(p()||e.$t("LMAppDetail.ModelDownloadSubtitle",{appName:e.lmAppData.name}))+" > ",1)])),_:1})])),_:1}),U(i,{modelValue:P(l),"onUpdate:modelValue":a[0]||(a[0]=e=>K(l)?l.value=e:null),title:e.$t("LMAppDetail.InstallAppDialogTitle"),title2:e.$t("LMAppDetail.InstallAppDialogTitle2"),message:e.$t("LMAppDetail.InstallAppDialogMsg",{appName:s.lmAppData.name}),"cancel-btn-label":e.$t("LMAppDetail.Cancel"),"confirm-btn-label":e.$t("LMAppDetail.install"),onConfirm:u,onCancel:r},null,8,["modelValue","title","title2","message","cancel-btn-label","confirm-btn-label"])],64)}}}),Le=F({__name:"model-download-btn-list",props:{lmAppData:{}},setup:e=>(e,l)=>{const a=_e;return e.lmAppData.id&&P(ce).appIsOllama(e.lmAppData.installName)?(q(),j(a,{key:0,lmAppData:e.lmAppData},null,8,["lmAppData"])):z("",!0)}}),be=F({__name:"app-snapshot-slide",props:{snapshots:{}},setup(e){const l=O(!1),a=O(!1),t=O(""),s=O(0),n=e;S(s,(e=>{void 0===e&&(e=0);const l=n.snapshots[e];i(l)}));const i=e=>{null!==e&&(a.value=!0,t.value=e)};return(e,n)=>(q(),W(G,null,[U(_,{"show-arrows":"",class:"pa-0",style:{"margin-left":"0rem","margin-right":"0"},"selected-class":"bg-success",modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e)},{default:B((()=>[(q(!0),W(G,null,Y(e.snapshots,((e,l)=>(q(),j(b,{key:l},{default:B((({isSelected:l,toggle:a,selectedClass:t})=>[U(c,{class:"my-3 ma-4",width:"265",height:"160",onClick:a},{default:B((()=>[U(g,{cover:"",width:"100%",height:"100%",src:e},null,8,["src"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1},8,["modelValue"]),U(u,{class:"mx-10 my-16",modelValue:l.value,"onUpdate:modelValue":n[2]||(n[2]=e=>l.value=e),width:"auto","min-width":"1200px","max-width":"1800px"},{default:B((()=>[U(c,null,{default:B((()=>[U(g,{src:t.value},null,8,["src"])])),_:1}),U(L,{icon:"mdi-close",location:"bottom center",absolute:"",elevation:"6",offset:"",onClick:n[1]||(n[1]=e=>l.value=!1)})])),_:1},8,["modelValue"]),U(P(me),{class:"window-no-drag",visible:a.value,imgs:e.snapshots,index:s.value,onHide:n[3]||(n[3]=e=>a.value=!1)},null,8,["visible","imgs","index"])],64))}}),xe=["innerHTML"],ke=F({__name:"common-msg-dialog",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},title2:{type:String,default:""},message:{type:String,default:""},closeBtnLabel:{type:String,default:""}},emits:["update:modelValue","confirm","close"],setup(e,{emit:l}){const a=e,t=l,s=O(a.modelValue);S((()=>a.modelValue),(e=>{s.value=e})),S(s,(e=>{t("update:modelValue",e)}));const n=()=>{s.value=!1,t("close")};return(l,a)=>(q(),j(u,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),"max-width":"680","min-width":"400"},{default:B((()=>[U(c,{class:"px-0"},{default:B((()=>[U(m,{class:"dialog-title"},{default:B((()=>[E(N(e.title),1)])),_:1}),U(f,{class:"d-flex flex-row px-10",style:{"padding-bottom":"64px","padding-top":"64px"}},{default:B((()=>[H("div",null,[U(g,{src:"./images/app/task.svg",width:"164",height:"120"})]),U(f,{style:{flex:"1"}},{default:B((()=>[U(A,{class:"dialog-title2"},{default:B((()=>[E(N(e.title2),1)])),_:1}),U(D,null,{default:B((()=>[e.message?(q(),W("div",{key:0,innerHTML:e.message},null,8,xe)):z("",!0),J(l.$slots,"default")])),_:3})])),_:3})])),_:3}),U(y,{class:"confirm-actions"},{default:B((()=>[U(v),U(h,{variant:"outlined",onClick:n},{default:B((()=>[E(N(e.closeBtnLabel),1)])),_:1}),U(v)])),_:1})])),_:3})])),_:3},8,["modelValue"]))}}),we=F({__name:"global-setting-confirm-dialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue","confirm","cancel"],setup(e,{emit:l}){const a=fe(),t=e,s=l,n=O(!1),i=O("");X((async()=>{const e=await o();i.value=e.LMD_DATA_ROOT})),S((()=>n.value),(e=>{s("update:modelValue",e)})),S((()=>t.modelValue),(e=>{n.value=e})),S((()=>a.showDialog),(e=>{e&&(n.value=!0)}));const p=()=>{s("cancel"),n.value=!1},r=async()=>{n.value=!1,s("confirm")};return(e,l)=>(q(),j(u,{modelValue:P(n),"onUpdate:modelValue":l[0]||(l[0]=e=>K(n)?n.value=e:null),"max-width":"400"},{default:B((()=>[U(c,null,{default:B((()=>[U(m,{class:"headline"},{default:B((()=>[E(N(e.$t("LMAppDetail.ChangeStorageDirTitle")),1)])),_:1}),U(D,null,{default:B((()=>[E(N(e.$t("LMAppDetail.ChangeStorageDirMsg"))+" ",1),l[1]||(l[1]=H("br",null,null,-1)),E(" "+N(P(i)),1)])),_:1}),U(y,{class:"justify-center mb-2"},{default:B((()=>[U(h,{variant:"outlined",onClick:p},{default:B((()=>[E(N(e.$t("LMAppDetail.UseThisDir")),1)])),_:1}),U(h,{variant:"flat",color:"primary",onClick:r},{default:B((()=>[E(N(e.$t("LMAppDetail.ChangeStorageDirBtn")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]))}}),Me=["href"],Te=F({__name:"simple-install-btn",props:{lmAppData:{},installType:{}},setup(e){const l=ve(),s=O(!1),n=O(!1),o=O(!1),r=O(!1),u=O(""),c=fe(),{t:m}=d(),{addToast:f}=i(),g=e,A=()=>{s.value=!1},D=()=>{A()},y=()=>{A(),setTimeout((()=>{v()}),500)},v=()=>{n.value?M():C()},_=async e=>{(g.installType!==ie.DOCKER||await L())&&(n.value=e,await k()||w())},L=async()=>{const e=await a();return e?.installed?(console.log("docker installed"),!!e?.running||(console.log("docker is not running"),f(m("LMAppDetail.DockerNotRunning"),"error"),r.value=!0,u.value=m("LMAppDetail.DockerNotRunning"),!1)):(f(m("LMAppDetail.DockerNotInstalled"),"error"),u.value=m("LMAppDetail.DockerNotInstalled"),r.value=!0,!1)},b=()=>{c.showDialogTrigger()},k=async()=>{const e=await oe();return!(e&&e.length>0)&&(o.value=!0,!0)},w=async()=>{await t()?v():s.value=!0},M=async()=>{await pe(g.lmAppData,g.installType),T()},T=async()=>{await l.getInstalledInstanceForApp(g.lmAppData?.id),I()},I=()=>{if(console.log("openRunningWindow currentTypeInstallInstance",$.value),$.value)if($.value){const e=$.value.id;se.openAppRunningWindow(e,ne.INSTALL,$.value.installName)}else console.error("data err firstInstallInstance",$)},C=()=>{$.value&&se.openAppRunningWindow($.value.id,ne.INSTALL,$.value.installName)};S((()=>l.installCurrentApp),(e=>{e&&M()}));const V=()=>{w()},$=Q((()=>{if(l.instancesForApp?.length>0){return l.instancesForApp.find((e=>e.installMethod===g.installType))}}));return(e,a)=>{const t=ke;return q(),W(G,null,[H("div",null,[P(l).instancesForAppLoading?(q(),j(x,{key:0,color:"primary",indeterminate:""})):(q(),W(G,{key:1},[P($)?(q(),j(h,{key:0,variant:"flat",color:"primary",style:{"min-width":"80px"},onClick:a[0]||(a[0]=e=>_(!1))},{default:B((()=>[E(N(e.$t("LMAppDetail.Reinstall")),1)])),_:1})):z("",!0),P($)?z("",!0):(q(),j(h,{key:1,variant:"flat",color:"primary",style:{"min-width":"80px"},onClick:a[1]||(a[1]=e=>_(!0))},{default:B((()=>[E(N(e.$t("LMAppDetail.install")),1)])),_:1}))],64))]),U(he,{modelValue:P(s),"onUpdate:modelValue":a[2]||(a[2]=e=>K(s)?s.value=e:null),title:e.$t("LMAppDetail.InstallToolDialogTitle"),title2:e.$t("LMAppDetail.InstallToolDialogTitle2"),message:e.$t("LMAppDetail.InstallToolDialogMsg"),"cancel-btn-label":e.$t("LMAppDetail.Cancel"),"confirm-btn-label":e.$t("LMAppDetail.InstallGitBtnLabel"),onConfirm:y,onCancel:D},null,8,["modelValue","title","title2","message","cancel-btn-label","confirm-btn-label"]),U(we,{modelValue:P(o),"onUpdate:modelValue":a[3]||(a[3]=e=>K(o)?o.value=e:null),onConfirm:b,onCancel:V},null,8,["modelValue"]),U(t,{title:P(m)("LMAppDetail.DockerMode"),title2:P(u),"close-btn-label":e.$t("LMAppDetail.Close"),modelValue:P(r),"onUpdate:modelValue":a[4]||(a[4]=e=>K(r)?r.value=e:null)},{default:B((()=>[E(N(e.$t("LMAppDetail.DockerInstallTip"))+" ",1),H("a",{href:e.$t("LMAppDetail.DockerInstallLink"),target:"_blank",style:Z({color:P(p).PRIMARY_COLOR})},N(e.$t("LMAppDetail.DockerInstallTitle")),13,Me)])),_:1},8,["title","title2","close-btn-label","modelValue"])],64)}}}),Ie=["href"],Ce=F({__name:"install-btn-group",props:{lmAppData:{}},setup(e){const l=e,a=ve(),t=O("default"),s=O(!0),n=e=>{if(a.instancesForApp?.length>0){return a.instancesForApp.find((l=>l.installMethod===e))}};S((()=>a.instancesForAppLoading),(()=>{i()})),X((()=>{i()}));const i=()=>{console.log("updateOptins installedInstanceStore.instancesForAppLoading",a.instancesForAppLoading),console.log("appHasDefaultMode",o.value),!1===a.instancesForAppLoading&&(o.value?(t.value=ie.DEFAULT,s.value=!0):(t.value=ie.DOCKER,s.value=!1))},o=Q((()=>{const e=l.lmAppData.downloadInfo;if(e?.length>0){const l=e[0];if(l?.downloadType?.includes(ie.DEFAULT))return!0}return!1}));return(e,l)=>{const i=Te;return q(),j(D,{class:"d-flex flex-row",style:{"padding-top":"0rem"}},{default:B((()=>[U(i,{"install-type":P(t),"lm-app-data":e.lmAppData},null,8,["install-type","lm-app-data"]),P(a).instancesForAppLoading?z("",!0):(q(),j(k,{key:0,modelValue:P(t),"onUpdate:modelValue":l[0]||(l[0]=e=>K(t)?t.value=e:null),class:"install-btn-group ml-1"},{default:B((()=>[P(s)?(q(),j(w,{key:0,value:P(ie).DEFAULT,color:P(p).PRIMARY_COLOR},{label:B((()=>[E(N(e.$t("LMAppDetail.DefaultMode"))+" ",1),n(P(ie).DEFAULT)?(q(),W(G,{key:0},[E(" ("+N(e.$t("LMAppDetail.AppInstalled"))+") ",1)],64)):z("",!0)])),_:1},8,["value","color"])):z("",!0),U(w,{value:P(ie).DOCKER,color:P(p).PRIMARY_COLOR},{label:B((()=>[E(N(e.$t("LMAppDetail.DockerMode"))+" ",1),n(P(ie).DOCKER)?(q(),W(G,{key:0},[E(" ("+N(e.$t("LMAppDetail.AppInstalled"))+") ",1)],64)):z("",!0),U(M,{interactive:"",location:"top"},{activator:B((({props:e})=>[U(T,ee(e,{class:"ml-1",style:{opacity:"1"},color:P(p).PRIMARY_COLOR,icon:"mdi-information"}),null,16,["color"])])),default:B((()=>[E(" "+N(e.$t("LMAppDetail.DockerInstallTip"))+" ",1),H("a",{href:e.$t("LMAppDetail.DockerInstallLink"),target:"_blank",style:Z({color:P(p).PRIMARY_COLOR})},N(e.$t("LMAppDetail.DockerInstallTitle")),13,Ie)])),_:1})])),_:1},8,["value","color"])])),_:1},8,["modelValue"]))])),_:1})}}}),Ve={class:"mr-2"},$e={style:{flex:"1"}},Re={key:0,class:"d-flex ga-3 mx-4"},Fe=s(F({__name:"basic-info-and-tags",props:{lmAppData:{}},setup(e){const l=e,a=O(!0);ve(),X((async()=>{const e=await o();a.value=ge.checkDirCharsIsValid(e.LMD_DATA_ROOT)}));const t=Q((()=>{let e="";e=re.isWindows()?"docker_win":"docker_mac";const a=l.lmAppData.downloadInfo;if(a?.length>0){const l=a[0];if(l?.downloadType?.includes(e))return!0}return!1})),s=Q((()=>{const e=l.lmAppData.downloadInfo,a="default_mac",t="default_win";if(e?.length>0){const l=e[0],s=l?.downloadType;if(s?.includes("default_")){if(re.isMacOS()&&s.includes(t)&&!s.includes(a))return!1;if(re.isWindows()&&!s.includes(t)&&s.includes(a))return!1}}return!0}));return(e,l)=>{const n=Ce;return q(),W(G,null,[U(I,{class:"mt-1 mx-1"},{default:B((()=>[H("div",Ve,[U(g,{src:e.lmAppData.icon,width:"7.5rem",height:"7.5rem",style:{"border-radius":"8px"}},null,8,["src"])]),H("div",$e,[U(m,{class:"",style:{"font-size":"1.375rem","font-weight":"bold","padding-bottom":"0.2rem","padding-top":"0.0rem"}},{default:B((()=>[E(N(e.lmAppData.name),1)])),_:1}),U(A,{class:"",style:{"font-size":"1rem",color:"#111",opacity:"1","white-space":"break-spaces"}},{default:B((()=>[E(N(e.lmAppData.shortDesc),1)])),_:1}),U(v,{class:"pt-4"}),P(s)?(q(),W(G,{key:0},[P(t)?z("",!0):(q(),j(D,{key:0,class:"d-flex flex-row",style:{"padding-top":"0rem"}},{default:B((()=>[U(Te,{"install-type":"default","lm-app-data":e.lmAppData},null,8,["lm-app-data"])])),_:1})),P(t)?(q(),j(n,{key:1,"lm-app-data":e.lmAppData},null,8,["lm-app-data"])):z("",!0)],64)):(q(),j(D,{key:1,class:"d-flex flex-row",style:{"padding-top":"0rem"}},{default:B((()=>[E(N(e.$t("LMAppDetail.NotSupportThisOS")),1)])),_:1})),P(a)?z("",!0):(q(),j(D,{key:2,class:"py-0 d-flex",style:{color:"red","justify-items":"center"}},{default:B((()=>[U(T,{style:{opacity:"1"},color:"#F00",icon:"mdi-information-slab-circle-outline"}),E(" "+N(e.$t("ConfigDialog.DirCharsNotValidTip")),1)])),_:1}))])])),_:1}),U(I,null,{default:B((()=>[U(C,null,{default:B((()=>[U(V,{class:"mt-0 mb-3 mx-4",style:{opacity:"1"},color:"#EBEBF7"}),U(m,{"primary-title":"",style:{"font-weight":"bold"}},{default:B((()=>[E(N(e.$t("LMAppDetail.AppFeatures")),1)])),_:1}),e.lmAppData.tags?(q(),W("div",Re,[(q(!0),W(G,null,Y(e.lmAppData.tags,((e,l)=>(q(),W("div",{class:"app-feature-tag px-4",key:l},N(e),1)))),128))])):z("",!0),U(V,{class:"mt-6 mb-2 mx-4",style:{opacity:"1"},color:"#EBEBF7"})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-8faef03b"]]),Oe={class:"text-medium-emphasis mr-3"},Se=["href"],je={key:1},Be={class:"text-medium-emphasis mr-2"},Ue={key:2},Ee={class:"text-medium-emphasis mr-2"},Ne={key:3},He={class:"text-medium-emphasis mr-2"},ze={key:4},qe={class:"text-medium-emphasis mr-2"},We={key:5},Ge={class:"text-medium-emphasis mr-2"},Pe={key:6},Ke={class:"text-medium-emphasis mr-2"},Ye={key:7},Je={class:"text-medium-emphasis mr-2"},Xe=F({__name:"extra-info",props:{lmAppData:{}},setup(e){const{t:l}=d(),a=e=>{let a=l("LMAppDetail.refLinkOther");return"homepage"===e.type?a=l("LMAppDetail.refLinkHomePage"):"github"===e.type?a=l("LMAppDetail.refLinkGithub"):"demo"===e.type&&(a=l("LMAppDetail.refLinkDemo")),a};return(e,l)=>(q(),j(f,{class:"mx-3 extra-info mt-3 mb-2"},{default:B((()=>[e.lmAppData.refLinks&&e.lmAppData.refLinks.length>0?(q(!0),W(G,{key:0},Y(e.lmAppData.refLinks,((e,l)=>(q(),W("p",{key:l},[H("span",Oe,N(a(e)),1),H("a",{class:"ref-link",href:e.url,target:"_blank"},N(e.url),9,Se)])))),128)):z("",!0),e.lmAppData?.newVersion?(q(),W("p",je,[H("span",Be,N(e.$t("LMAppDetail.newVersion")),1),E(" "+N(e.lmAppData.newVersion),1)])):z("",!0),e.lmAppData?.releaseTime?(q(),W("p",Ue,[H("span",Ee,N(e.$t("LMAppDetail.releaseTime")),1),E(" "+N(e.lmAppData.releaseTime),1)])):z("",!0),e.lmAppData?.licenseInfo?.licenseType?(q(),W("p",Ne,[H("span",He,N(e.$t("LMAppDetail.licenseType")),1),E(" "+N(e.lmAppData?.licenseInfo?.licenseType),1)])):z("",!0),e.lmAppData?.licenseInfo?.isOpenSource?(q(),W("p",ze,[H("span",qe,N(e.$t("LMAppDetail.isOpenSource")),1),E(" "+N(e.lmAppData?.licenseInfo?.isOpenSource),1)])):z("",!0),e.lmAppData?.licenseInfo?.isFullOpenSource?(q(),W("p",We,[H("span",Ge,N(e.$t("LMAppDetail.isFullOpenSource")),1),E(" "+N(e.lmAppData?.licenseInfo?.isFullOpenSource),1)])):z("",!0),e.lmAppData?.licenseInfo?.isFree?(q(),W("p",Pe,[H("span",Ke,N(e.$t("LMAppDetail.isFree")),1),E(" "+N(e.lmAppData?.licenseInfo?.isFree),1)])):z("",!0),e.lmAppData?.licenseInfo?.sourceCodeRepo?(q(),W("p",Ye,[H("span",Je,N(e.$t("LMAppDetail.sourceCodeRepo")),1),E(" "+N(e.lmAppData?.licenseInfo?.sourceCodeRepo),1)])):z("",!0)])),_:1}))}}),Qe={style:{"font-size":"14px",color:"#7D7D7D"},class:"text-center"},Ze=F({__name:"installed-info-list",props:{lmAppData:{}},setup(e){const l=ve(),a=O(),t=Ae(),s=e;X((async()=>{n()}));const n=async()=>{await l.getInstalledInstanceForApp(s.lmAppData?.id)};S((()=>l.instancesForApp),(async e=>{a.value=e})),S((()=>t.currentLocale),n);const i=async()=>{n()},o=async()=>{n()};return(e,l)=>(q(),W(G,null,[U(v,{class:"my-2"}),P(a)&&P(a).length>0?(q(),j(f,{key:0,class:"d-flex flex-column ga-2",style:{width:"100%"}},{default:B((()=>[U(I,null,{default:B((()=>[(q(!0),W(G,null,Y(P(a),((l,a)=>(q(),j(C,{key:a},{default:B((()=>[U(ye,{"app-version-visible":!0,"lm-app-data":e.lmAppData,"instance-data":l,onDeleted:i,onRefresh:o,"app-name-visible":!0,"icon-visible":!1},null,8,["lm-app-data","instance-data"])])),_:2},1024)))),128))])),_:1})])),_:1})):z("",!0),P(a)&&0===P(a).length?(q(),j(f,{key:1,class:"d-flex flex-column ga-2 text-center justify-center"},{default:B((()=>[U(g,{width:"100%",height:"160",src:"./images/app/no-data.svg"}),H("div",Qe,N(e.$t("LMAppDetail.notInstalled")),1)])),_:1})):z("",!0)],64))}});class el{static getCUDAGuideLink(){return r.localeIsEn()?"https://daiyl.com/install-cuda.html":"https://seemts.com/zh/install-cuda.html"}}const ll={class:"fullDescBlock overflow-y-hidden mx-6 mt-1 mb-4",style:{"max-height":"220px"}},al=["innerHTML"],tl={class:"fullDescBlock overflow-y-hidden mx-6 mt-1 mb-4",style:{"max-height":"250px"}},sl=["innerHTML"],nl={class:"text-right justify-end mr-2",style:{width:"100%","margin-top":"-1rem",overflow:"visible",height:"1rem"}},il=["innerHTML"],ol=F({__name:"full-desc-text",props:{lmAppData:{}},setup(e){const l=O(!1),a=O(null),t=O(!1),{t:s}=d();let n;const i=e;X((()=>{n=new ResizeObserver((e=>{for(const l of e)l.target===a.value&&(t.value=l.contentRect.height>=200)})),a.value&&n.observe(a.value),a.value&&(t.value=a.value.scrollHeight>=200)})),le((()=>{n&&n.unobserve(a.value)}));const o=Q((()=>{let e=i.lmAppData?.systemRequirements;if(e&&e.includes("driver-notice-label")){e+=`<a href="${el.getCUDAGuideLink()}" target="_blank" class="install-guide-link">${s("LMAppDetail.InstallationGuide")}</a>`}return e}));return(e,s)=>(q(),W(G,null,[U(I,null,{default:B((()=>[U(C,{class:"px-0 py-0"},{default:B((()=>[U(m,{class:"mb-0 mx-2",style:{"font-weight":"bold"}},{default:B((()=>[E(N(e.$t("LMAppDetail.SysReq")),1)])),_:1}),H("div",ll,[H("p",{style:{"white-space":"pre-wrap"},innerHTML:P(o)},null,8,al)]),U(V,{class:"mt-4 mb-2 mx-4",style:{opacity:"1"},color:"#EBEBF7"}),U(m,{class:"mb-0 mx-2",style:{"font-weight":"bold"}},{default:B((()=>[E(N(e.$t("LMAppDetail.AboutTheApp")),1)])),_:1}),H("div",tl,[H("p",{ref_key:"visibleText",ref:a,innerHTML:e.lmAppData.desc},null,8,sl)]),H("div",nl,[P(t)?(q(),j(h,{key:0,class:"mr-4",variant:"text",size:"small",active:!0,onClick:s[0]||(s[0]=e=>l.value=!0),"prepend-icon":"mdi-unfold-more-horizontal",text:e.$t("LMAppDetail.More")},null,8,["text"])):z("",!0)])])),_:1})])),_:1}),U(u,{"min-width":"1000px","max-width":"1300px","max-height":"80%",modelValue:P(l),"onUpdate:modelValue":s[2]||(s[2]=e=>K(l)?l.value=e:null),width:"auto"},{default:B((()=>[U(c,{"prepend-icon":"mdi-text-box-outline",title:e.lmAppData.name},{actions:B((()=>[U(h,{class:"ms-auto",text:e.$t("LMAppDetail.Close"),onClick:s[1]||(s[1]=e=>l.value=!1)},null,8,["text"])])),default:B((()=>[U(D,{class:"mx-6 my-2 fullDescBlock"},{default:B((()=>[H("p",{innerHTML:e.lmAppData.desc},null,8,il)])),_:1})])),_:1},8,["title"])])),_:1},8,["modelValue"])],64))}}),pl={style:{"font-size":"20px"}},rl={class:"mt-4"},dl={style:{"font-size":"1.25rem","font-weight":"bold"}},ul=F({__name:"AppDetail",setup(e){const l=ae(),a=de(),t=O({}),s=te(),i=Ae();X((async()=>{o()}));const o=async()=>{const e=l.params.id;await a.fetchApp(e),t.value=a.currentLmApp,n()};S((()=>i.currentLocale),o);const p=()=>{s.go(-1)};return(e,l)=>{const a=Le;return q(),W(G,null,[U($,{elevation:"0",class:"window-drag",height:"80"},{prepend:B((()=>[U(h,{class:"window-no-drag mt-4",onClick:p,variant:"plain"},{default:B((()=>[U(T,{class:"lmd-back-icon mr-3",style:{"font-size":"1.4rem"},size:"36",icon:"mdi-chevron-left",color:"#FB6C00"}),H("span",pl,N(e.$t("LMAppDetail.goBack")),1)])),_:1})])),append:B((()=>[H("div",rl,[U(De)])])),_:1}),U(R,{class:"px-0 py-0",style:{"max-width":"none"}},{default:B((()=>[U(I,{class:"app-detail mt-0 mb-4 mx-6"},{default:B((()=>[U(C,{cols:"12",md:"8",lg:"9"},{default:B((()=>[U(Fe,{lmAppData:P(t)},null,8,["lmAppData"]),P(t).snapshots?(q(),j(be,{key:0,snapshots:P(t).snapshots},null,8,["snapshots"])):z("",!0),U(v,{class:"mb-1"}),U(ol,{"lm-app-data":P(t)},null,8,["lm-app-data"]),U(Xe,{lmAppData:P(t)},null,8,["lmAppData"])])),_:1}),U(C,{class:"app-detail-container-sidebar px-4",cols:"12",md:"4",lg:"3"},{default:B((()=>[H("div",dl,N(e.$t("LMAppDetail.InstallRecord")),1),P(t).id?(q(),j(Ze,{key:0,lmAppData:P(t)},null,8,["lmAppData"])):z("",!0),P(t).id?(q(),j(a,{key:1,lmAppData:P(t)},null,8,["lmAppData"])):z("",!0)])),_:1})])),_:1})])),_:1})],64)}}});export{ul as default};
