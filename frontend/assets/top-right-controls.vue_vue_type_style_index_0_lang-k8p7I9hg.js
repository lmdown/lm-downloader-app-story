import{d as l,x as e,g as a,G as t,h as o,M as n,N as i,r as s,o as u,i as d,b as r,w as c,u as g,c as m,e as v,t as f,v as h,O as _,k as p,F as b,P as w,Q as D,a as y,R as V,L as C,p as O}from"./index-DmcRzV4m.js";import{I as R}from"./IPCChannelName-ChmutG-C.js";const x=l({__name:"global-config-btn",setup(l){const{t:y}=e(),V=a(!1),C=a({}),O=a({}),x=a(!1),L=a(!1),G=t("showToastMessage");o((()=>{window.ipcRenderer?.on(R.OPEN_GLOBAL_CONFIG_DIALOG,((l,...e)=>{k()}))}));const I=async()=>{if(L.value&&C){x.value=!0;try{await w(C.value),await D(O.value)}catch(l){console.error(l)}finally{x.value=!1;const l=y("Common.saveSuccess");console.log("showToastMessage",G),G&&G(l,"success")}}},T=l=>!!l||y("Common.fieldRequired"),k=async()=>{V.value=!0,window.ipcRenderer&&(C.value=await n(),O.value=await i(),console.log("envVars",O.value))};return(l,e)=>{const a=s("v-img"),t=s("v-btn"),o=s("v-card-title"),n=s("v-card-subtitle"),i=s("v-text-field"),w=s("v-card-actions"),D=s("v-form"),y=s("v-card"),R=s("v-dialog");return u(),d(b,null,[r(t,{class:"hover-border",width:"38",height:"38",icon:"",onClick:k},{default:c((()=>[r(a,{width:"36",height:"36",src:"./images/icons/icon-config.png",transition:!1})])),_:1}),r(R,{modelValue:g(V),"onUpdate:modelValue":e[7]||(e[7]=l=>h(V)?V.value=l:null),"min-width":"400","max-width":"800"},{default:c((()=>[r(y,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:l.$t("ConfigDialog.globalConfigTitle")},{append:c((()=>[r(t,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:e[0]||(e[0]=l=>V.value=!1)})])),default:c((()=>[g(C)?(u(),m(D,{key:0,class:"pt-0 pb-3 px-6",modelValue:g(L),"onUpdate:modelValue":e[6]||(e[6]=l=>h(L)?L.value=l:null),onSubmit:_(I,["prevent"])},{default:c((()=>[r(o,null,{default:c((()=>[v(f(l.$t("ConfigDialog.DefaultStorageTitle")),1)])),_:1}),r(n,null,{default:c((()=>[v(f(l.$t("ConfigDialog.DefaultStorageSubtitle")),1)])),_:1}),r(i,{modelValue:g(C).LMD_DATA_ROOT,"onUpdate:modelValue":e[1]||(e[1]=l=>g(C).LMD_DATA_ROOT=l),readonly:g(x),rules:[T],label:l.$t("ConfigDialog.DefaultStoragePathLabel")},null,8,["modelValue","readonly","rules","label"]),r(o,null,{default:c((()=>[v(f(l.$t("ConfigDialog.GlobalVariablesTitle")),1)])),_:1}),r(n,null,{default:c((()=>[v(f(l.$t("ConfigDialog.GlobalVariablesSubtitle")),1)])),_:1}),r(i,{readonly:g(x),rules:[T],modelValue:g(O).NODE_JS_DIR,"onUpdate:modelValue":e[2]||(e[2]=l=>g(O).NODE_JS_DIR=l),label:"NODE_JS_DIR"},null,8,["readonly","rules","modelValue"]),r(i,{readonly:g(x),rules:[T],modelValue:g(O).HF_MIRROR,"onUpdate:modelValue":e[3]||(e[3]=l=>g(O).HF_MIRROR=l),label:"HF_MIRROR"},null,8,["readonly","rules","modelValue"]),r(i,{readonly:g(x),rules:[T],modelValue:g(O).GITHUB_PROXY,"onUpdate:modelValue":e[4]||(e[4]=l=>g(O).GITHUB_PROXY=l),label:"GITHUB_PROXY"},null,8,["readonly","rules","modelValue"]),r(w,{class:"text-center justify-center"},{default:c((()=>[r(t,{variant:"outlined",onClick:e[5]||(e[5]=l=>V.value=!1)},{default:c((()=>[v(f(l.$t("ConfigDialog.close")),1)])),_:1}),r(t,{color:"primary",variant:"flat",type:"submit",loading:g(x)},{default:c((()=>[v(f(l.$t("ConfigDialog.saveConfig")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["modelValue"])):p("",!0)])),_:1},8,["title"])])),_:1},8,["modelValue"])],64)}}}),L=l({__name:"git-info-btn",setup(l){const e=a(!1),t=l=>{l.preventDefault(),e.value=!0};return(l,a)=>{const o=s("v-img"),n=s("v-btn"),i=s("v-card-text"),m=s("v-card"),_=s("v-dialog");return u(),d(b,null,[y("a",{href:"#",class:"d-flex",target:"_blank",onClick:t,style:{"align-items":"center"}},[r(o,{src:"./images/icons/icon-github.png",transition:!1,width:"36",height:"36",class:"github-icon mr-4"}),a[2]||(a[2]=v(" Github > "))]),r(_,{modelValue:g(e),"onUpdate:modelValue":a[1]||(a[1]=l=>h(e)?e.value=l:null),"min-width":"200","max-width":"560"},{default:c((()=>[r(m,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:l.$t("GitDialog.DialogTitle")},{append:c((()=>[r(n,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:a[0]||(a[0]=l=>e.value=!1)})])),default:c((()=>[r(i,null,{default:c((()=>[y("h3",null,f(l.$t("GitDialog.CardTitle")),1),a[3]||(a[3]=y("div",null,[v("Github: "),y("a",{href:"https://github.com/lmdown",target:"_blank"},"https://github.com/lmdown")],-1)),a[4]||(a[4]=y("div",null,[v(" Gitee: "),y("a",{href:"https://gitee.com/lmdown",target:"_blank"},"https://gitee.com/lmdown")],-1))])),_:1})])),_:1},8,["title"])])),_:1},8,["modelValue"])],64)}}}),G={class:"lmd-top-right-controls ga-6 mr-12 window-no-drag"},I=l({__name:"top-right-controls",setup(l){const{locale:e}=V();o((async()=>{let l;try{l=(await n()).LMD_LOCALE}catch(e){l=C.getDefaultLocale()}a(l)}));const a=async l=>{e.value=l;const a=await n();a.LMD_LOCALE=e.value,await w(a)},t=O((()=>C.getLocaleIcon(e.value)));return(l,o)=>{const n=s("VDivider"),i=s("v-img"),m=s("v-btn");return u(),d("div",G,[r(L),r(n,{vertical:"",style:{opacity:"1"},color:"#EBEBF7"}),r(x),r(m,{class:"hover-border",style:{"margin-left":"-6px"},width:"38",height:"38",icon:"",onClick:o[0]||(o[0]=l=>{"zhHans"===e.value?a("en"):a("zhHans")})},{default:c((()=>[r(i,{style:{"margin-left":"16px"},width:"56",height:"36",transition:!1,src:g(t)},null,8,["src"])])),_:1})])}}});export{I as _};
