import{d as a,L as l,r as e,Z as t,l as o,a2 as n,a3 as s,o as i,n as u,b as d,w as r,V as c,m as g,i as m,z as h,c as f,f as _,g as p,t as v,h as w,a4 as b,a5 as D,I as y,a6 as V,a7 as C,s as O,J as R,F as x,a8 as I,a9 as L,a as G,G as T,aa as k,Y as S,E as U,e as $}from"./index-D8LzgPVj.js";import{I as E}from"./IPCChannelName-ChmutG-C.js";const M=a({__name:"global-config-btn",setup(a){const{t:G}=l(),T=e(!1),k=e({}),S=e({}),U=e(!1),$=e(!1),M=t("showToastMessage");o((()=>{window.ipcRenderer?.on(E.OPEN_GLOBAL_CONFIG_DIALOG,((a,...l)=>{B()}))}));const A=async()=>{if($.value&&k){U.value=!0;try{await I(k.value),await L(S.value)}catch(a){console.error(a)}finally{U.value=!1;const a=G("Common.saveSuccess");console.log("showToastMessage",M),M&&M(a,"success")}}},H=a=>!!a||G("Common.fieldRequired"),B=async()=>{T.value=!0,window.ipcRenderer&&(k.value=await n(),S.value=await s(),console.log("envVars",S.value))};return(a,l)=>(i(),u(x,null,[d(g,{class:"hover-border",width:"38",height:"38",icon:"",onClick:B},{default:r((()=>[d(c,{width:"36",height:"36",src:"./images/icons/icon-config.png",transition:!1})])),_:1}),d(R,{modelValue:h(T),"onUpdate:modelValue":l[7]||(l[7]=a=>y(T)?T.value=a:null),"min-width":"400","max-width":"800"},{default:r((()=>[d(m,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:a.$t("ConfigDialog.globalConfigTitle")},{append:r((()=>[d(g,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:l[0]||(l[0]=a=>T.value=!1)})])),default:r((()=>[h(k)?(i(),f(C,{key:0,class:"pt-0 pb-3 px-6",modelValue:h($),"onUpdate:modelValue":l[6]||(l[6]=a=>y($)?$.value=a:null),onSubmit:V(A,["prevent"])},{default:r((()=>[d(_,null,{default:r((()=>[p(v(a.$t("ConfigDialog.DefaultStorageTitle")),1)])),_:1}),d(w,null,{default:r((()=>[p(v(a.$t("ConfigDialog.DefaultStorageSubtitle")),1)])),_:1}),d(b,{modelValue:h(k).LMD_DATA_ROOT,"onUpdate:modelValue":l[1]||(l[1]=a=>h(k).LMD_DATA_ROOT=a),readonly:h(U),rules:[H],label:a.$t("ConfigDialog.DefaultStoragePathLabel")},null,8,["modelValue","readonly","rules","label"]),d(_,null,{default:r((()=>[p(v(a.$t("ConfigDialog.GlobalVariablesTitle")),1)])),_:1}),d(w,null,{default:r((()=>[p(v(a.$t("ConfigDialog.GlobalVariablesSubtitle")),1)])),_:1}),d(b,{readonly:h(U),rules:[H],modelValue:h(S).NODE_JS_DIR,"onUpdate:modelValue":l[2]||(l[2]=a=>h(S).NODE_JS_DIR=a),label:"NODE_JS_DIR"},null,8,["readonly","rules","modelValue"]),d(b,{readonly:h(U),rules:[H],modelValue:h(S).HF_MIRROR,"onUpdate:modelValue":l[3]||(l[3]=a=>h(S).HF_MIRROR=a),label:"HF_MIRROR"},null,8,["readonly","rules","modelValue"]),d(b,{readonly:h(U),rules:[H],modelValue:h(S).GITHUB_PROXY,"onUpdate:modelValue":l[4]||(l[4]=a=>h(S).GITHUB_PROXY=a),label:"GITHUB_PROXY"},null,8,["readonly","rules","modelValue"]),d(D,{class:"text-center justify-center"},{default:r((()=>[d(g,{variant:"outlined",onClick:l[5]||(l[5]=a=>T.value=!1)},{default:r((()=>[p(v(a.$t("ConfigDialog.close")),1)])),_:1}),d(g,{color:"primary",variant:"flat",type:"submit",loading:h(U)},{default:r((()=>[p(v(a.$t("ConfigDialog.saveConfig")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["modelValue"])):O("",!0)])),_:1},8,["title"])])),_:1},8,["modelValue"])],64))}}),A=a({__name:"git-info-btn",setup(a){const l=e(!1),t=a=>{a.preventDefault(),l.value=!0};return(a,e)=>(i(),u(x,null,[G("a",{href:"#",class:"d-flex",target:"_blank",onClick:t,style:{"align-items":"center"}},[d(c,{src:"./images/icons/icon-github.png",transition:!1,width:"36",height:"36",class:"github-icon mr-4"}),e[2]||(e[2]=p(" Github > "))]),d(R,{modelValue:h(l),"onUpdate:modelValue":e[1]||(e[1]=a=>y(l)?l.value=a:null),"min-width":"200","max-width":"560"},{default:r((()=>[d(m,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:a.$t("GitDialog.DialogTitle")},{append:r((()=>[d(g,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:e[0]||(e[0]=a=>l.value=!1)})])),default:r((()=>[d(T,null,{default:r((()=>[G("h3",null,v(a.$t("GitDialog.CardTitle")),1),e[3]||(e[3]=G("div",null,[p("Github: "),G("a",{href:"https://github.com/lmdown",target:"_blank"},"https://github.com/lmdown")],-1)),e[4]||(e[4]=G("div",null,[p(" Gitee: "),G("a",{href:"https://gitee.com/lmdown",target:"_blank"},"https://gitee.com/lmdown")],-1))])),_:1})])),_:1},8,["title"])])),_:1},8,["modelValue"])],64))}}),H={class:"lmd-top-right-controls ga-6 mr-12 window-no-drag"},B=a({__name:"top-right-controls",setup(a){const{locale:l}=k();o((async()=>{let a;try{a=(await n()).LMD_LOCALE}catch(l){a=S.getDefaultLocale()}e(a)}));const e=async a=>{l.value=a;const e=await n();e.LMD_LOCALE=l.value,await I(e)},t=U((()=>S.getLocaleIcon(l.value)));return(a,o)=>(i(),u("div",H,[d(A),d($,{vertical:"",style:{opacity:"1"},color:"#EBEBF7"}),d(M),d(g,{class:"hover-border",style:{"margin-left":"-6px"},width:"38",height:"38",icon:"",onClick:o[0]||(o[0]=a=>{"zhHans"===l.value?e("en"):e("zhHans")})},{default:r((()=>[d(c,{style:{"margin-left":"16px"},width:"56",height:"36",transition:!1,src:h(t)},null,8,["src"])])),_:1})]))}});export{B as _};
