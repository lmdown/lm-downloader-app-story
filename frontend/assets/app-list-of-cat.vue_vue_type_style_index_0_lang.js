import{f as e,b as a,L as s,a0 as t,v as l,a6 as i,a8 as n,F as p,l as o,k as r,a3 as c,O as u,u as m,a5 as v,a7 as d,Z as y,X as f,a4 as g,n as _}from"./vue.js";import{L as x,k as h,r as b,A as k}from"./index.js";import{S as L}from"./single-app-item.js";import{u as A}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{s as C,w as j,x as H,d as w}from"./vuetify.js";class S{static getLocaleName(e,a){return x.localeIsEnByVal(a)?e.name_en:e.name_zh}}const z={class:"cat-title mb-4"},F={class:"main-title"},I=["onClick"],N={style:{height:"72px","padding-left":"32px",display:"flex","align-items":"center","justify-content":"start"}},O={class:"cat-title mb-6 cat-title-simple"},U={class:"main-title-simple"},B=e({__name:"app-list-of-cat",props:{catetory:{type:Object,default:null},isAppListHomepage:{type:Boolean,default:!1},appListStyle:{type:String,default:"default"},itemsLimitForHome:{type:Number,default:15}},setup(e){const x=e,B=a(!1),E=a(null),M=a(null),$=a(0),R=a([]),V=A();s((()=>{X(),D()}));const X=()=>{const e=x.catetory;M.value=e?.subCats,M.value&&M.value.length>0?E.value=M.value[0]:E.value=x.catetory};t((()=>{q&&q.value?.disconnect()}));const Z=a(null),q=a(null),D=()=>{Z.value&&(q.value=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(G(),q.value?.unobserve(e.target))}))})),q.value.observe(Z.value))},G=async()=>{if(E.value&&E.value.id){B.value=!0;const e=E.value.id;R.value=await h(e);let a=R.value;x.isAppListHomepage&&(a=R.value.slice(0,x.itemsLimitForHome)),E.value.apps=a,B.value=!1}},J=e=>S.getLocaleName(e,V.currentLocale),K=e=>{E.value=e},P=()=>{if(E.value?.id){const{name_en:e,name_zh:a}=E.value;b.push({name:k.UniversalAppCat,params:{id:E.value?.id,name_en:e,name_zh:a}})}};return l((()=>x.catetory),(()=>{console.log("catetory changed"),X(),G()})),(a,s)=>(g(),i("div",{class:"cat-item-container mx-0",ref_key:"catItemContainerRef",ref:Z,style:{"scroll-margin-top":"80px"}},["default"===e.appListStyle?(g(),i(p,{key:0},[o("div",z,[o("div",F,u(J(e.catetory)),1),m(M)?(g(),c(C,{key:0,"show-arrows":"",class:"sub-cats"},{default:v((()=>[(g(!0),i(p,null,d(m(M),((e,a)=>{return g(),i("div",{key:a+e.name_en,class:_(["sub-cats-item",(s=a,$.value===s?"active":"")]),onClick:s=>((e,a)=>{$.value=a,K(e),G()})(e,a)},u(J(e)),11,I);var s})),128))])),_:1})):n("",!0)]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(E)?.apps,(e=>(g(),c(H,{key:e.name,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[r(L,{"app-data":e},null,8,["app-data"])])),_:2},1024)))),128)),m(R).length>e.itemsLimitForHome&&e.isAppListHomepage?(g(),c(H,{key:0,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[o("div",N,[o("a",{style:{color:"rgb(var(--v-theme-primary))"},href:"#",onClick:s[0]||(s[0]=y((e=>P()),["prevent"]))},u(a.$t("UniversalApps.MoreApps"))+" > ",1)])])),_:1})):n("",!0)])),_:1})],64)):"home-simple"===e.appListStyle?(g(),i(p,{key:1},[o("div",O,[o("div",U,u(J(e.catetory)),1),o("a",{style:{display:"inline-flex","align-items":"center",gap:"4px"},href:"#",onClick:s[1]||(s[1]=y((e=>P()),["prevent"]))},[f(u(a.$t("UniversalApps.MoreApps"))+" ",1),r(w,{size:"18",color:"#3C3535",icon:"mdi-chevron-right-circle",class:"ml-1"})])]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(E)?.apps,(e=>(g(),c(H,{key:e.name,cols:"12",xs:"12",sm:"12",md:"12",lg:"6",xl:"4",xxl:"3"},{default:v((()=>[r(L,{"app-data":e},null,8,["app-data"])])),_:2},1024)))),128))])),_:1})],64)):n("",!0)],512))}});export{S as C,B as _};
