import{e as a,b as e,H as t,X as s,l,a3 as i,a5 as n,F as p,a2 as o,k as r,$ as c,K as u,u as m,a1 as v,a4 as d,Y as y,S as f,a0 as g,a8 as _}from"./vue.js";import{L as x,k as h,r as b,A as k}from"./index.js";import{S as L}from"./single-app-item.js";import{u as A}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{s as C,w as j,x as H,q as S,d as w}from"./vuetify.js";class z{static getLocaleName(a,e){return x.localeIsEnByVal(e)?a.name_en:a.name_zh}}const F={class:"cat-title mb-4"},I={class:"main-title"},N=["onClick"],U={style:{height:"72px","padding-left":"32px",display:"flex","align-items":"center","justify-content":"start"}},$={class:"cat-title mb-6 cat-title-simple"},B={class:"main-title-simple"},E=a({__name:"app-list-of-cat",props:{catetory:{type:Object,default:null},isAppListHomepage:{type:Boolean,default:!1},appListStyle:{type:String,default:"default"},itemsLimitForHome:{type:Number,default:15}},setup(a){const x=a,E=e(!1),M=e(null),O=e(null),q=e(0),K=e([]),R=A();t((()=>{V(),D()}));const V=()=>{const a=x.catetory;O.value=a?.subCats,O.value&&O.value.length>0?M.value=O.value[0]:M.value=x.catetory};s((()=>{Y&&Y.value?.disconnect()}));const X=e(null),Y=e(null),D=()=>{X.value&&(Y.value=new IntersectionObserver((a=>{a.forEach((a=>{a.isIntersecting&&(G(),Y.value?.unobserve(a.target))}))})),Y.value.observe(X.value))},G=async()=>{if(M.value&&M.value.id){E.value=!0;const a=M.value.id;K.value=await h(a);let e=K.value;x.isAppListHomepage&&(e=K.value.slice(0,x.itemsLimitForHome)),M.value.apps=e,E.value=!1}},J=a=>z.getLocaleName(a,R.currentLocale),P=a=>{M.value=a},Q=()=>{if(M.value?.id){const{name_en:a,name_zh:e}=M.value;b.push({name:k.UniversalAppCat,params:{id:M.value?.id,name_en:a,name_zh:e}})}};return l((()=>x.catetory),(()=>{console.log("catetory changed"),V(),G()})),(e,t)=>(g(),i("div",{class:"cat-item-container mx-0",ref_key:"catItemContainerRef",ref:X,style:{"scroll-margin-top":"80px"}},["default"===a.appListStyle?(g(),i(p,{key:0},[o("div",F,[o("div",I,u(J(a.catetory)),1),m(O)?(g(),c(C,{key:0,"show-arrows":"",class:"sub-cats"},{default:v((()=>[(g(!0),i(p,null,d(m(O),((a,e)=>{return g(),i("div",{key:e+a.name_en,class:_(["sub-cats-item",(t=e,q.value===t?"active":"")]),onClick:t=>((a,e)=>{q.value=e,P(a),G()})(a,e)},u(J(a)),11,N);var t})),128))])),_:1})):n("",!0)]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(M)?.apps,(a=>(g(),c(H,{key:a.name,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[r(L,{"app-data":a},null,8,["app-data"])])),_:2},1024)))),128)),m(K).length>a.itemsLimitForHome&&a.isAppListHomepage?(g(),c(H,{key:0,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[o("div",U,[o("a",{style:{color:"rgb(var(--v-theme-primary))"},href:"#",onClick:t[0]||(t[0]=y((a=>Q()),["prevent"]))},u(e.$t("UniversalApps.MoreApps"))+" > ",1)])])),_:1})):n("",!0)])),_:1})],64)):"home-simple"===a.appListStyle?(g(),i(p,{key:1},[o("div",$,[o("div",B,u(J(a.catetory)),1),r(S,{variant:"text",density:"compact",class:"px-0",rounded:"",onClick:t[1]||(t[1]=a=>Q()),style:{}},{default:v((()=>[f(u(e.$t("UniversalApps.MoreApps"))+" ",1),r(w,{size:"18",color:"#3C3535",icon:"mdi-chevron-right-circle",class:"ml-1"})])),_:1})]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(M)?.apps,(a=>(g(),c(H,{key:a.name,cols:"12",xs:"12",sm:"12",md:"12",lg:"6",xl:"4",xxl:"3"},{default:v((()=>[r(L,{"app-data":a},null,8,["app-data"])])),_:2},1024)))),128))])),_:1})],64)):n("",!0)],512))}});export{z as C,E as _};
