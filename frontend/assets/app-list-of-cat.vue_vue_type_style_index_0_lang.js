import{e as a,b as e,H as t,X as s,l,a3 as i,a5 as n,F as p,a2 as o,k as r,$ as u,K as c,u as m,a1 as v,a4 as d,Y as y,S as f,a0 as g,a8 as _}from"./vue.js";import{L as x,k as b,r as h,A as k}from"./index.js";import{S as L}from"./single-app-item.js";import{u as F}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{s as A,w as C,x as j,q as H}from"./vuetify.js";class S{static getLocaleName(a,e){return x.localeIsEnByVal(e)?a.name_en:a.name_zh}}const w={class:"cat-title mb-4"},I={class:"main-title"},z=["onClick"],N={style:{height:"72px","padding-left":"32px",display:"flex","align-items":"center","justify-content":"start"}},U={class:"cat-title mb-4 cat-title-simple"},$={class:"main-title-simple"},B=a({__name:"app-list-of-cat",props:{catetory:{type:Object,default:null},isAppListHomepage:{type:Boolean,default:!1},appListStyle:{type:String,default:"default"},itemsLimitForHome:{type:Number,default:15}},setup(a){const x=a,B=e(!1),E=e(null),M=e(null),O=e(0),q=e([]),D=F();t((()=>{K(),X()}));const K=()=>{const a=x.catetory;M.value=a?.subCats,M.value&&M.value.length>0?E.value=M.value[0]:E.value=x.catetory};s((()=>{V&&V.value?.disconnect()}));const R=e(null),V=e(null),X=()=>{R.value&&(V.value=new IntersectionObserver((a=>{a.forEach((a=>{a.isIntersecting&&(Y(),V.value?.unobserve(a.target))}))})),V.value.observe(R.value))},Y=async()=>{if(E.value&&E.value.id){B.value=!0;const a=E.value.id;q.value=await b(a);let e=q.value;x.isAppListHomepage&&(e=q.value.slice(0,x.itemsLimitForHome)),E.value.apps=e,B.value=!1}},G=a=>S.getLocaleName(a,D.currentLocale),J=a=>{E.value=a},P=()=>{if(E.value?.id){const{name_en:a,name_zh:e}=E.value;h.push({name:k.UniversalAppCat,params:{id:E.value?.id,name_en:a,name_zh:e}})}};return l((()=>x.catetory),(()=>{console.log("catetory changed"),K(),Y()})),(e,t)=>(g(),i("div",{class:"cat-item-container mx-0 my-6",ref_key:"catItemContainerRef",ref:R,style:{"scroll-margin-top":"80px"}},["default"===a.appListStyle?(g(),i(p,{key:0},[o("div",w,[o("div",I,c(G(a.catetory)),1),m(M)?(g(),u(A,{key:0,"show-arrows":"",class:"sub-cats"},{default:v((()=>[(g(!0),i(p,null,d(m(M),((a,e)=>{return g(),i("div",{key:e+a.name_en,class:_(["sub-cats-item",(t=e,O.value===t?"active":"")]),onClick:t=>((a,e)=>{O.value=e,J(a),Y()})(a,e)},c(G(a)),11,z);var t})),128))])),_:1})):n("",!0)]),r(C,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(E)?.apps,(a=>(g(),u(j,{key:a.name,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[r(L,{"app-data":a},null,8,["app-data"])])),_:2},1024)))),128)),m(q).length>a.itemsLimitForHome&&a.isAppListHomepage?(g(),u(j,{key:0,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[o("div",N,[o("a",{style:{color:"rgb(var(--v-theme-primary))"},href:"#",onClick:t[0]||(t[0]=y((a=>P()),["prevent"]))},c(e.$t("UniversalApps.MoreApps"))+" > ",1)])])),_:1})):n("",!0)])),_:1})],64)):"home-simple"===a.appListStyle?(g(),i(p,{key:1},[o("div",U,[o("div",$,c(G(a.catetory)),1),r(H,{color:"primary",variant:"flat",density:"compact",class:"px-2",rounded:"",onClick:t[1]||(t[1]=a=>P()),style:{background:"linear-gradient( 67deg, #FF4D00 0%, #FF7400 100%, #FF7400 100%)"}},{default:v((()=>[f(c(e.$t("UniversalApps.MoreApps")),1)])),_:1})]),r(C,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(E)?.apps,(a=>(g(),u(j,{key:a.name,cols:"12",xs:"12",sm:"12",md:"12",lg:"6",xl:"4",xxl:"3"},{default:v((()=>[r(L,{"app-data":a},null,8,["app-data"])])),_:2},1024)))),128))])),_:1})],64)):n("",!0)],512))}});export{S as C,B as _};
