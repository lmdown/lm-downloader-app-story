import{e,b as a,H as s,X as t,l,a3 as i,a5 as n,F as p,a2 as o,k as r,$ as c,K as u,u as m,a1 as v,a4 as d,Y as y,S as f,a0 as g,a8 as _}from"./vue.js";import{L as x,m as h,r as b,A as k}from"./index.js";import{S as L}from"./single-app-item.js";import{u as A}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{s as C,w as j,x as H,d as S}from"./vuetify.js";class w{static getLocaleName(e,a){return x.localeIsEnByVal(a)?e.name_en:e.name_zh}}const z={class:"cat-title mb-4"},F={class:"main-title"},I=["onClick"],N={style:{height:"72px","padding-left":"32px",display:"flex","align-items":"center","justify-content":"start"}},U={class:"cat-title mb-6 cat-title-simple"},$={class:"main-title-simple"},B=e({__name:"app-list-of-cat",props:{catetory:{type:Object,default:null},isAppListHomepage:{type:Boolean,default:!1},appListStyle:{type:String,default:"default"},itemsLimitForHome:{type:Number,default:15}},setup(e){const x=e,B=a(!1),E=a(null),M=a(null),O=a(0),K=a([]),R=A();s((()=>{V(),q()}));const V=()=>{const e=x.catetory;M.value=e?.subCats,M.value&&M.value.length>0?E.value=M.value[0]:E.value=x.catetory};t((()=>{Y&&Y.value?.disconnect()}));const X=a(null),Y=a(null),q=()=>{X.value&&(Y.value=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(D(),Y.value?.unobserve(e.target))}))})),Y.value.observe(X.value))},D=async()=>{if(E.value&&E.value.id){B.value=!0;const e=E.value.id;K.value=await h(e);let a=K.value;x.isAppListHomepage&&(a=K.value.slice(0,x.itemsLimitForHome)),E.value.apps=a,B.value=!1}},G=e=>w.getLocaleName(e,R.currentLocale),J=e=>{E.value=e},P=()=>{if(E.value?.id){const{name_en:e,name_zh:a}=E.value;b.push({name:k.UniversalAppCat,params:{id:E.value?.id,name_en:e,name_zh:a}})}};return l((()=>x.catetory),(()=>{console.log("catetory changed"),V(),D()})),(a,s)=>(g(),i("div",{class:"cat-item-container mx-0",ref_key:"catItemContainerRef",ref:X,style:{"scroll-margin-top":"80px"}},["default"===e.appListStyle?(g(),i(p,{key:0},[o("div",z,[o("div",F,u(G(e.catetory)),1),m(M)?(g(),c(C,{key:0,"show-arrows":"",class:"sub-cats"},{default:v((()=>[(g(!0),i(p,null,d(m(M),((e,a)=>{return g(),i("div",{key:a+e.name_en,class:_(["sub-cats-item",(s=a,O.value===s?"active":"")]),onClick:s=>((e,a)=>{O.value=a,J(e),D()})(e,a)},u(G(e)),11,I);var s})),128))])),_:1})):n("",!0)]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(E)?.apps,(e=>(g(),c(H,{key:e.name,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[r(L,{"app-data":e},null,8,["app-data"])])),_:2},1024)))),128)),m(K).length>e.itemsLimitForHome&&e.isAppListHomepage?(g(),c(H,{key:0,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[o("div",N,[o("a",{style:{color:"rgb(var(--v-theme-primary))"},href:"#",onClick:s[0]||(s[0]=y((e=>P()),["prevent"]))},u(a.$t("UniversalApps.MoreApps"))+" > ",1)])])),_:1})):n("",!0)])),_:1})],64)):"home-simple"===e.appListStyle?(g(),i(p,{key:1},[o("div",U,[o("div",$,u(G(e.catetory)),1),o("a",{style:{display:"inline-flex","align-items":"center",gap:"4px"},href:"#",onClick:s[1]||(s[1]=y((e=>P()),["prevent"]))},[f(u(a.$t("UniversalApps.MoreApps"))+" ",1),r(S,{size:"18",color:"#3C3535",icon:"mdi-chevron-right-circle",class:"ml-1"})])]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(E)?.apps,(e=>(g(),c(H,{key:e.name,cols:"12",xs:"12",sm:"12",md:"12",lg:"6",xl:"4",xxl:"3"},{default:v((()=>[r(L,{"app-data":e},null,8,["app-data"])])),_:2},1024)))),128))])),_:1})],64)):n("",!0)],512))}});export{w as C,B as _};
