import{e,b as a,H as s,Z as t,l,a4 as i,a6 as n,F as p,a3 as o,k as r,a0 as c,K as u,u as m,a2 as v,a5 as d,V as y,S as f,a1 as g,a9 as _}from"./vue.js";import{L as x,l as h,r as b,A as k}from"./index.js";import{S as L}from"./single-app-item.js";import{u as A}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import{s as C,w as j,x as H,d as S}from"./vuetify.js";class w{static getLocaleName(e,a){return x.localeIsEnByVal(a)?e.name_en:e.name_zh}}const z={class:"cat-title mb-4"},F={class:"main-title"},I=["onClick"],N={style:{height:"72px","padding-left":"32px",display:"flex","align-items":"center","justify-content":"start"}},U={class:"cat-title mb-6 cat-title-simple"},B={class:"main-title-simple"},E=e({__name:"app-list-of-cat",props:{catetory:{type:Object,default:null},isAppListHomepage:{type:Boolean,default:!1},appListStyle:{type:String,default:"default"},itemsLimitForHome:{type:Number,default:15}},setup(e){const x=e,E=a(!1),M=a(null),O=a(null),V=a(0),$=a([]),K=A();s((()=>{R(),D()}));const R=()=>{const e=x.catetory;O.value=e?.subCats,O.value&&O.value.length>0?M.value=O.value[0]:M.value=x.catetory};t((()=>{q&&q.value?.disconnect()}));const Z=a(null),q=a(null),D=()=>{Z.value&&(q.value=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(G(),q.value?.unobserve(e.target))}))})),q.value.observe(Z.value))},G=async()=>{if(M.value&&M.value.id){E.value=!0;const e=M.value.id;$.value=await h(e);let a=$.value;x.isAppListHomepage&&(a=$.value.slice(0,x.itemsLimitForHome)),M.value.apps=a,E.value=!1}},J=e=>w.getLocaleName(e,K.currentLocale),P=e=>{M.value=e},Q=()=>{if(M.value?.id){const{name_en:e,name_zh:a}=M.value;b.push({name:k.UniversalAppCat,params:{id:M.value?.id,name_en:e,name_zh:a}})}};return l((()=>x.catetory),(()=>{console.log("catetory changed"),R(),G()})),(a,s)=>(g(),i("div",{class:"cat-item-container mx-0",ref_key:"catItemContainerRef",ref:Z,style:{"scroll-margin-top":"80px"}},["default"===e.appListStyle?(g(),i(p,{key:0},[o("div",z,[o("div",F,u(J(e.catetory)),1),m(O)?(g(),c(C,{key:0,"show-arrows":"",class:"sub-cats"},{default:v((()=>[(g(!0),i(p,null,d(m(O),((e,a)=>{return g(),i("div",{key:a+e.name_en,class:_(["sub-cats-item",(s=a,V.value===s?"active":"")]),onClick:s=>((e,a)=>{V.value=a,P(e),G()})(e,a)},u(J(e)),11,I);var s})),128))])),_:1})):n("",!0)]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(M)?.apps,(e=>(g(),c(H,{key:e.name,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[r(L,{"app-data":e},null,8,["app-data"])])),_:2},1024)))),128)),m($).length>e.itemsLimitForHome&&e.isAppListHomepage?(g(),c(H,{key:0,cols:"12",xs:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:v((()=>[o("div",N,[o("a",{style:{color:"rgb(var(--v-theme-primary))"},href:"#",onClick:s[0]||(s[0]=y((e=>Q()),["prevent"]))},u(a.$t("UniversalApps.MoreApps"))+" > ",1)])])),_:1})):n("",!0)])),_:1})],64)):"home-simple"===e.appListStyle?(g(),i(p,{key:1},[o("div",U,[o("div",B,u(J(e.catetory)),1),o("a",{style:{display:"inline-flex","align-items":"center",gap:"4px"},href:"#",onClick:s[1]||(s[1]=y((e=>Q()),["prevent"]))},[f(u(a.$t("UniversalApps.MoreApps"))+" ",1),r(S,{size:"18",color:"#3C3535",icon:"mdi-chevron-right-circle",class:"ml-1"})])]),r(j,{class:"app-list gap-2 mb-2"},{default:v((()=>[(g(!0),i(p,null,d(m(M)?.apps,(e=>(g(),c(H,{key:e.name,cols:"12",xs:"12",sm:"12",md:"12",lg:"6",xl:"4",xxl:"3"},{default:v((()=>[r(L,{"app-data":e},null,8,["app-data"])])),_:2},1024)))),128))])),_:1})],64)):n("",!0)],512))}});export{w as C,E as _};
