import{d as h,K as U,r as p,l as $,a4 as D,a5 as M,n as y,F as B,a as e,q as V,w as n,V as R,G,z as t,R as _,f as S,c as N,m as A,a6 as F,a7 as H,g as I,h as f,t as m,i as T,a8 as b,a9 as P,a2 as z,o as w,aa as x,ab as J,b as c,I as q,ac as X,a1 as k,J as Y,e as j}from"./index.js";import{I as K}from"./IPCChannelName.js";const Q=h({__name:"global-config-btn",setup(O){const{t:r}=U(),g=p(!1),i=p({}),l=p({}),o=p(!1),d=p(!1),C=z("showToastMessage");$(()=>{window.ipcRenderer?.on(K.OPEN_GLOBAL_CONFIG_DIALOG,(s,...a)=>{L()})});const E=async()=>{if(d.value&&i){o.value=!0;try{const s=await x(i.value),a=await J(l.value)}catch(s){console.error(s)}finally{o.value=!1;const s=r("Common.saveSuccess");C&&C(s,"success")}}},v=s=>!!s||r("Common.fieldRequired"),L=async()=>{g.value=!0,window.ipcRenderer&&(i.value=await D(),l.value=await M(),console.log("envVars",l.value))};return(s,a)=>(w(),y(B,null,[e(V,{class:"hover-border",width:"38",height:"38",icon:"",onClick:L},{default:n(()=>[e(R,{width:"36",height:"36",src:"./images/icons/icon-config.png",transition:!1})]),_:1}),e(G,{modelValue:t(g),"onUpdate:modelValue":a[7]||(a[7]=u=>_(g)?g.value=u:null),"min-width":"400","max-width":"800"},{default:n(()=>[e(S,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:s.$t("ConfigDialog.globalConfigTitle")},{append:n(()=>[e(V,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:a[0]||(a[0]=u=>g.value=!1)})]),default:n(()=>[t(i)?(w(),N(F,{key:0,class:"pt-0 pb-3 px-6",modelValue:t(d),"onUpdate:modelValue":a[6]||(a[6]=u=>_(d)?d.value=u:null),onSubmit:H(E,["prevent"])},{default:n(()=>[e(I,null,{default:n(()=>[f(m(s.$t("ConfigDialog.DefaultStorageTitle")),1)]),_:1}),e(T,null,{default:n(()=>[f(m(s.$t("ConfigDialog.DefaultStorageSubtitle")),1)]),_:1}),e(b,{modelValue:t(i).LMD_DATA_ROOT,"onUpdate:modelValue":a[1]||(a[1]=u=>t(i).LMD_DATA_ROOT=u),readonly:t(o),rules:[v],label:s.$t("ConfigDialog.DefaultStoragePathLabel")},null,8,["modelValue","readonly","rules","label"]),e(I,null,{default:n(()=>[f(m(s.$t("ConfigDialog.GlobalVariablesTitle")),1)]),_:1}),e(T,null,{default:n(()=>[f(m(s.$t("ConfigDialog.GlobalVariablesSubtitle")),1)]),_:1}),e(b,{readonly:t(o),rules:[v],modelValue:t(l).NODE_JS_DIR,"onUpdate:modelValue":a[2]||(a[2]=u=>t(l).NODE_JS_DIR=u),label:"NODE_JS_DIR"},null,8,["readonly","rules","modelValue"]),e(b,{readonly:t(o),rules:[v],modelValue:t(l).HF_MIRROR,"onUpdate:modelValue":a[3]||(a[3]=u=>t(l).HF_MIRROR=u),label:"HF_MIRROR"},null,8,["readonly","rules","modelValue"]),e(b,{readonly:t(o),rules:[v],modelValue:t(l).GITHUB_PROXY,"onUpdate:modelValue":a[4]||(a[4]=u=>t(l).GITHUB_PROXY=u),label:"GITHUB_PROXY"},null,8,["readonly","rules","modelValue"]),e(P,{class:"text-center justify-center"},{default:n(()=>[e(V,{variant:"outlined",onClick:a[5]||(a[5]=u=>g.value=!1)},{default:n(()=>[f(m(s.$t("ConfigDialog.close")),1)]),_:1}),e(V,{color:"primary",variant:"flat",type:"submit",loading:t(o)},{default:n(()=>[f(m(s.$t("ConfigDialog.saveConfig")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["modelValue"])):A("",!0)]),_:1},8,["title"])]),_:1},8,["modelValue"])],64))}}),W=h({__name:"git-info-btn",setup(O){const r=p(!1),g=i=>{i.preventDefault(),r.value=!0};return(i,l)=>(w(),y(B,null,[c("a",{href:"#",class:"d-flex",target:"_blank",onClick:g,style:{"align-items":"center"}},[e(R,{src:"./images/icons/icon-github.png",transition:!1,width:"36",height:"36",class:"github-icon mr-4"}),l[2]||(l[2]=f(" Github > "))]),e(G,{modelValue:t(r),"onUpdate:modelValue":l[1]||(l[1]=o=>_(r)?r.value=o:null),"min-width":"200","max-width":"560"},{default:n(()=>[e(S,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:i.$t("GitDialog.DialogTitle")},{append:n(()=>[e(V,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:l[0]||(l[0]=o=>r.value=!1)})]),default:n(()=>[e(q,null,{default:n(()=>[c("h3",null,m(i.$t("GitDialog.CardTitle")),1),l[3]||(l[3]=c("div",null,[f("Github: "),c("a",{href:"https://github.com/lmdown",target:"_blank"},"https://github.com/lmdown")],-1)),l[4]||(l[4]=c("div",null,[f(" Gitee: "),c("a",{href:"https://gitee.com/lmdown",target:"_blank"},"https://gitee.com/lmdown")],-1))]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64))}}),Z={class:"lmd-top-right-controls ga-6 mr-12 window-no-drag"},ae=h({__name:"top-right-controls",setup(O){const{locale:r}=X();$(async()=>{let o;try{o=(await D()).LMD_LOCALE}catch{o=k.getDefaultLocale()}i(o)});const g=()=>{r.value==="zhHans"?i("en"):i("zhHans")},i=async o=>{r.value=o;const d=await D();d.LMD_LOCALE=r.value,await x(d)},l=Y(()=>k.getLocaleIcon(r.value));return(o,d)=>(w(),y("div",Z,[e(W),e(j,{vertical:"",style:{opacity:"1"},color:"#EBEBF7"}),e(Q),e(V,{class:"hover-border",style:{"margin-left":"-6px"},width:"38",height:"38",icon:"",onClick:d[0]||(d[0]=C=>g())},{default:n(()=>[e(R,{style:{"margin-left":"16px"},width:"56",height:"36",transition:!1,src:t(l)},null,8,["src"])]),_:1})]))}});export{ae as _};
