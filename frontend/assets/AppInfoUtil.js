import{d as e,e as a}from"./common-util.js";import{I as i}from"./index.js";const r=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(i.EXIT_APP))},l=async()=>{if(window.ipcRenderer)try{return await(window.ipcRenderer?.invoke(i.CHECK_GIT))}catch(e){return console.error("check git error",e),!0}},t=async()=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(i.INSTALL_GIT))},s=async e=>{if(window.ipcRenderer)return await(window.ipcRenderer?.invoke(i.CLOSE_RUNNING_WINDOW,e))},n="OLLAMA_HOST",m={DISPLAY_ENV:["OLLAMA_MODELS","OLLAMA_HOST","OLLAMA_ACCESS_PATH_LMD"]},p=[{displayName:"Deepseek-R1",installName:"deepseek-r1",tags:[{parameterSize:"1.5b",fileSize:"1.1GB"},{parameterSize:"7b",fileSize:"4.7GB"},{parameterSize:"8b",fileSize:"4.9GB"},{parameterSize:"14b",fileSize:"9.0GB"},{parameterSize:"32b",fileSize:"20GB"},{parameterSize:"70b",fileSize:"43GB"},{parameterSize:"671b",fileSize:"404GB"}]},{displayName:"QwQ",installName:"qwq",tags:[{parameterSize:"32b",fileSize:"20GB"}]},{displayName:"Mistral Small 3.1",installName:"mistral-small3.1",tags:[{parameterSize:"24b",fileSize:"15GB"}]},{displayName:"Gemma3",installName:"gemma3",tags:[{parameterSize:"1b",fileSize:"815MB"},{parameterSize:"4b",fileSize:"3.3GB"},{parameterSize:"12b",fileSize:"8.1GB"},{parameterSize:"27b",fileSize:"17GB"}]},{displayName:"Llama 3.1",installName:"llama3.1",tags:[{parameterSize:"8b",fileSize:"4.9GB"},{parameterSize:"70b",fileSize:"43GB"},{parameterSize:"405b",fileSize:"243GB"}]},{displayName:"Qwen 2.5",installName:"qwen2.5",tags:[{parameterSize:"0.5b",fileSize:"398MB"},{parameterSize:"1.5b",fileSize:"986MB"},{parameterSize:"3b",fileSize:"1.9GB "},{parameterSize:"7b",fileSize:"4.7GB"},{parameterSize:"14b",fileSize:"9.0GB"},{parameterSize:"32b",fileSize:"20GB"},{parameterSize:"72b",fileSize:"47GB"}]},{displayName:"Mistral",installName:"mistral",tags:[{parameterSize:"7b",fileSize:"4.1GB"}]},{displayName:"Phi-4",installName:"phi4",tags:[{parameterSize:"14b",fileSize:"9.1GB"}]},{displayName:"Qwen 2.5 Coder",installName:"qwen2.5-coder",tags:[{parameterSize:"0.5b",fileSize:"531MB"},{parameterSize:"1.5b",fileSize:"986MB"},{parameterSize:"3b",fileSize:"1.9GB"},{parameterSize:"7b",fileSize:"4.7GB"},{parameterSize:"14b",fileSize:"9.0GB"},{parameterSize:"32b",fileSize:"20GB"}]}];class S{static genModelNameAndSize(e,a){return`${e}:${a.parameterSize}`}static genModelNameAndSize2(e,a){return`${e}:${a}`}}class z{static appIsOllama(e){return"ollama"===e}static appIsSillyTavern(e){return"sillytavern"===e}static displayAccessSettingBtn(e){return this.appIsOllama(e)}static async getModelFileSize(a,i){if(console.log("getModelFileSize",a,i),this.appIsOllama(a)&&i&&i){return await e(i)}return{}}static async getModelsDir(e,a){return this.appIsOllama(e)&&a?a.OLLAMA_MODELS:""}static genModelDownloadCommand(e,a){return this.appIsOllama(e)&&a?`\nollama pull ${a}`:""}static genModelDeleteCommand(e,a){return this.appIsOllama(e)&&a?`\nollama rm ${a}`:""}static async mergeModelsList(e,i){if(e){(await a(e)).forEach((e=>{const[a,r]=e.name.split(":"),l=i.find((e=>e.installName===a)),t=S.genModelNameAndSize2(a,r);if(l){const a=l.tags.find((e=>e.parameterSize===r));a?a.installed=!0:l.tags.push({parameterSize:r,fileSize:e.size||"",installed:!0,downloadProgress:{nameAndSize:t,percent:1}})}else i.push({displayName:a,installName:a,tags:[{parameterSize:r,fileSize:e.size||"",installed:!0,downloadProgress:{nameAndSize:t,percent:1}}]})}))}return i}static killAppProcessed(e){if(this.appIsOllama(e)){(async e=>{if(window.ipcRenderer)await(window.ipcRenderer?.invoke(i.KILL_PROCESSES,e))})(["ollama.exe","ollama app.exe","ollama","Ollama"])}}static needPreStartApp(e){return!!this.appIsOllama(e)}}export{z as A,S as M,n as O,s as a,p as b,l as c,m as d,r as e,t as i};
