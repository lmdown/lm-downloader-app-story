import{g as S}from"./install-instance.js";import{D as T,_ as U,A as P}from"./storage-simple-btn.vue_vue_type_script_setup_true_lang.js";import{d as k,K as z,J as F,o,c,X as O,w as t,b as a,V as $,z as s,M as y,U as C,N as M,f as j,g as p,t as i,s as D,h as E,O as B,m as V,i as J,v as b,A as w,r as K,l as W,n as h,F as v,p as X,y as _,B as L,x as Y,j as q,Y as G}from"./index.js";import{_ as H}from"./top-right-controls.vue_vue_type_style_index_0_lang.js";import"./IPCChannelName.js";const Q=k({__name:"installed-instance-item",props:{appNameVisible:{type:Boolean},iconVisible:{type:Boolean},appIconUrl:{},instanceData:{}},emits:["deleted","refresh"],setup(I,{emit:n}){const{t:r}=z(),d=I,u=n,m=F(()=>{const e="./images/icons/lmd-logo.png",l={};return d.instanceData?(d.instanceData.installMethod==="import"?(l.type="icon",l.value="mdi-application-import",l.installMethodStr=r("InstalledApps.Imported")):(l.type="img",l.value=e,l.installMethodStr=r("InstalledApps.InstalledByLMD")),l):null}),g=()=>{console.log("gotoDetailPage",d.instanceData.appId),b.currentRoute.value.name!==w.AppDetail&&b.push({name:w.AppDetail,params:{id:d.instanceData.appId}})},A=e=>{P.openAppRunningWindow(e,"start")},N=()=>{u("deleted")},R=()=>{u("refresh")};return(e,l)=>e.instanceData?(o(),c(J,{key:0,rounded:"lg",class:"common-instance-card rounded-lg mx-auto"},O({title:t(()=>[e.appNameVisible?(o(),c(j,{key:0,onClick:g},{default:t(()=>[p(i(e.instanceData.name),1)]),_:1})):D("",!0),a(E,null,{default:t(()=>[p(i(e.$t("LMAppDetail.version"))+" "+i(e.instanceData.version)+" Â  ",1),a(y,{text:e.$t("LMAppDetail.installedAt"),location:"top"},{activator:t(({props:f})=>[a(C,M({color:"secondary"},f,{icon:"mdi-clock-time-ten-outline"}),null,16)]),_:1},8,["text"]),p(" "+i(s(T).format(e.instanceData.createTime)),1)]),_:1})]),actions:t(()=>[a(B),a(U,{onDeleted:N,"installed-instance":e.instanceData},null,8,["installed-instance"]),e.instanceData.appInstallPath?D("",!0):(o(),c(V,{key:0,variant:"flat",color:"light-green-lighten-5","prepend-icon":"mdi-folder-refresh-outline",onClick:l[0]||(l[0]=f=>R())},{default:t(()=>[p(i(e.$t("StorageDialog.Refresh")),1)]),_:1})),a(V,{variant:"flat",color:"light-green-lighten-5","prepend-icon":"mdi-application-brackets-outline",onClick:l[1]||(l[1]=f=>A(e.instanceData.id))},{default:t(()=>[p(i(e.$t("LMAppDetail.RunApp")),1)]),_:1})]),_:2},[e.iconVisible&&e.appIconUrl?{name:"prepend",fn:t(()=>[a($,{width:"68",height:"68",cover:"",style:{"border-radius":"8px",cursor:"pointer"},onClick:g,alt:e.instanceData.name,src:e.appIconUrl},null,8,["alt","src"])]),key:"0"}:void 0,s(m)?{name:"append",fn:t(()=>[a(y,{text:s(m).installMethodStr,location:"top"},{activator:t(({props:f})=>[s(m).type==="icon"?(o(),c(C,{key:0,size:"30",color:"primary",icon:s(m).value},null,8,["icon"])):(o(),c($,M({key:1,width:"30"},f,{style:{"border-radius":"8px"},alt:e.instanceData.name,src:s(m)?.value}),null,16,["alt","src"]))]),_:1},8,["text"])]),key:"1"}:void 0]),1024)):D("",!0)}}),Z={key:1,class:"text-center mx-auto"},x=k({__name:"instance-list",setup(I){const n=K(null);W(()=>{r()});const r=async()=>{const u=await S();n.value=u},d=()=>{r()};return(u,m)=>(o(),h(v,null,[s(n)&&s(n).length>0?(o(),c(L,{key:0,class:"mx-10 d-flex flex-column ga-2",style:{width:"100%"}},{default:t(()=>[a(_,null,{default:t(()=>[(o(!0),h(v,null,X(s(n),(g,A)=>(o(),c(Y,{key:A,cols:"6"},{default:t(()=>[a(Q,{"app-icon-url":g.appIcon,"instance-data":g,onDeleted:d,"app-name-visible":!0,"icon-visible":!0},null,8,["app-icon-url","instance-data"])]),_:2},1024))),128))]),_:1})]),_:1})):D("",!0),s(n)&&s(n).length===0?(o(),h("h1",Z,i(u.$t("InstalledApps.NoApp")),1)):D("",!0)],64))}}),se=k({__name:"InstalledApps",setup(I){return(n,r)=>(o(),h(v,null,[a(q,{light:"",elevation:"0",class:"pt-4 window-drag"},{prepend:t(()=>r[0]||(r[0]=[])),append:t(()=>[a(H)]),default:t(()=>[a(G,null,{default:t(()=>[p(i(n.$t("InstalledApps.MainTitle")),1)]),_:1})]),_:1}),a(L,{class:"installed-apps-page mt-10"},{default:t(()=>[a(_,{class:"mx-10"},{default:t(()=>[a(B),a(V,{"prepend-icon":"mdi-application-import"},{default:t(()=>[p(i(n.$t("InstalledApps.ImportOtherAIApp"))+" ",1),a(y,{activator:"parent",location:"bottom"},{default:t(()=>[p(i(n.$t("InstalledApps.UnderConstruction")),1)]),_:1})]),_:1})]),_:1}),a(_,null,{default:t(()=>[a(x)]),_:1})]),_:1})],64))}});export{se as default};
