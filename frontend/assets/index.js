const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MainHome.js","./lmd-system.js","./vue.js","./vuetify.js","./tut-txt-list.js","./fav-btn-normal.vue_vue_type_style_index_0_lang.js","./fav-btn-normal.css","./app-info.js","./tut-txt-list.css","./tutorial-text.js","./top-right-controls.vue_vue_type_style_index_0_lang.js","./vuei18n.js","./pinia.js","./top-right-controls.css","./app-list-data-error.vue_vue_type_style_index_0_lang.js","./app-list-data-error.css","./app-list-of-cat.vue_vue_type_style_index_0_lang.js","./single-app-item.js","./single-app-item.css","./app-list-of-cat.css","./top-app-bar.vue_vue_type_style_index_0_lang.js","./top-app-bar.css","./home-banner.js","./xterm.js","./debounce.js","./lmd-locales.js","./MainHome.css","./UniversalAppHome.js","./UniversalAppHome.css","./LocalAppsHome.js","./index2.js","./app-list.vue_vue_type_style_index_0_lang.js","./app-list.css","./lmapp.js","./LocalAppsHome.css","./AppDetail.js","./vue-easy-lightbox.js","./OSUtil.js","./InstallType.js","./single-installed-instance.vue_vue_type_style_index_0_lang.js","./DateTimeUtil.js","./dayjs.js","./single-installed-instance.css","./AppInfoUtil.js","./AppDetail.css","./StoryPostDetail.js","./StoryPostDetail.css","./TutorialTextDetail.js","./common-app-bar.vue_vue_type_script_setup_true_lang.js","./TutorialTextDetail.css","./TutorialTextList.js","./TutorialTextList.css","./MyAI.js","./MyAI.css","./MyResource.js","./AppRunningWindow.js","./delete-confirm-dialog.js","./delete-confirm-dialog.css","./pretty-bytes.js","./AppRunningWindow.css","./AppRunningWindowV2.js","./AppRunningWindowV2.css","./UniversalAppCat.js","./UniversalAppCat.css","./UniversalAppRunningWindow.js","./UniversalAppTitle.js","./UniversalAppSearch.js","./UniversalAppSearch.css"])))=>i.map(i=>d[i]);
import{Z as e,_ as t,b as a,e as r,H as s,l as n,$ as o,a0 as i,a1 as c,a2 as l,k as p,a3 as u,a4 as d,z as m,B as g,K as h,u as _,F as A,j as w,a5 as f,y as v,a6 as y,c as E,J as S,a7 as L}from"./vue.js";import{d as T,c as R}from"./pinia.js";import{g as I}from"./xterm.js";import{r as b}from"./debounce.js";import{V as D,a as O,b as P,c as U,d as k,e as N,f as C,g as V,h as x,v as M,i as j,j as q,k as F}from"./vuetify.js";import{c as G,u as H}from"./vuei18n.js";import{z as B,e as $}from"./lmd-locales.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const W={Home:"/",FastDownload:"/fast-download",UniversalAppHome:"/universal-app-home",UniversalAppCat:"/universal-app-cat/:id/:name_en/:name_zh",UniversalAppSearch:"/universal-app-cat/search",UniversalAppRunning:"/universal-app-running/:name/:icon/:url",UniversalAppTitle:"/universal-app-title/:name/:icon/:url",MyAI:"/my-ai",AppRunning:"/app/running/:id",AppRunningV2:"/app/running-v2/:id",StoryPostDetail:"/app/story-post/:id",MyResource:"/my-resources",TutorialTextList:"/tutorial-text-list",TutorialTextDetail:"/tutorial-text/:id"},K={Home:"home",FastDownload:"fast-download",UniversalAppHome:"universal-app-home",UniversalAppCat:"universal-app-cat",UniversalAppSearch:"universal-app-search",UniversalAppRunning:"universal-app-running",UniversalAppTitle:"universal-app-title",AppDetail:"app-detail",MyAI:"my-ai",AppRunning:"app-running",AppRunningV2:"app-running-v2",StoryPostDetail:"story-post-detail",MyResource:"my-resources",TutorialTextList:"tutorial-text-list",TutorialTextDetail:"tutorial-text"},z=[{name:"AppMenu.Home",icon:"./images/nav/home.svg",iconActive:"./images/nav/home-active.svg",path:W.Home,routerName:K.Home},{name:"AppMenu.UniversalApps",icon:"./images/nav/online-apps.svg",iconActive:"./images/nav/online-apps-active.svg",path:W.UniversalAppHome,routerName:K.UniversalAppHome},{name:"AppMenu.LocalApps",icon:"./images/nav/local-apps.svg",iconActive:"./images/nav/local-apps-active.svg",path:W.FastDownload,routerName:K.FastDownload},{name:"AppMenu.MyAI",icon:"./images/nav/my-apps.svg",iconActive:"./images/nav/my-apps-active.svg",path:W.MyAI,routerName:K.MyAI}],J={},Y=function(e,t,a){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),n=s?.nonce||s?.getAttribute("nonce");r=Promise.allSettled(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,a),t in J)return;J[t]=!0;const r=t.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(!!a)for(let a=e.length-1;a>=0;a--){const s=e[a];if(s.href===t&&(!r||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const o=document.createElement("link");return o.rel=r?"stylesheet":"modulepreload",r||(o.as="script"),o.crossOrigin="",o.href=t,n&&o.setAttribute("nonce",n),document.head.appendChild(o),r?new Promise(((e,a)=>{o.addEventListener("load",e),o.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))},X=[{path:W.Home,name:K.Home,component:()=>Y((()=>import("./MainHome.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.UniversalAppHome,name:K.UniversalAppHome,component:()=>Y((()=>import("./UniversalAppHome.js")),__vite__mapDeps([27,14,2,3,15,20,10,1,11,12,13,21,16,17,5,6,7,18,19,23,24,25,28]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.FastDownload,name:K.FastDownload,component:()=>Y((()=>import("./LocalAppsHome.js")),__vite__mapDeps([29,20,10,2,3,1,11,12,13,21,22,30,31,32,33,23,24,25,34]),import.meta.url),meta:{requiresSidebar:!0}},{path:"/app/:id",name:K.AppDetail,component:()=>Y((()=>import("./AppDetail.js")),__vite__mapDeps([35,36,2,3,37,30,12,38,1,10,11,13,39,40,23,41,42,33,43,24,25,44]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.StoryPostDetail,name:K.StoryPostDetail,component:()=>Y((()=>import("./StoryPostDetail.js")),__vite__mapDeps([45,7,31,3,2,32,10,1,11,12,13,23,24,25,46]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.TutorialTextDetail,name:K.TutorialTextDetail,component:()=>Y((()=>import("./TutorialTextDetail.js")),__vite__mapDeps([47,17,5,3,2,6,7,10,1,11,12,13,18,48,9,40,23,41,24,25,49]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.TutorialTextList,name:K.TutorialTextList,component:()=>Y((()=>import("./TutorialTextList.js")),__vite__mapDeps([50,4,5,3,2,6,7,1,8,48,10,11,12,13,9,23,24,25,51]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.MyAI,name:K.MyAI,component:()=>Y((()=>import("./MyAI.js")),__vite__mapDeps([52,3,2,5,6,7,12,17,10,1,11,13,18,37,39,38,40,23,41,42,20,21,24,25,53]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.MyResource,name:K.MyResource,component:()=>Y((()=>import("./MyResource.js")),__vite__mapDeps([54,10,2,3,1,11,12,13,23,24,25]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.AppRunning,name:K.AppRunning,component:()=>Y((()=>import("./AppRunningWindow.js")),__vite__mapDeps([55,2,33,12,56,23,37,1,43,3,57,58,24,11,25,59]),import.meta.url),meta:{requiresSidebar:!1}},{path:W.AppRunningV2,name:K.AppRunningV2,component:()=>Y((()=>import("./AppRunningWindowV2.js")),__vite__mapDeps([60,12,2,3,37,1,30,56,23,43,57,33,38,58,40,41,24,11,25,61]),import.meta.url),meta:{requiresSidebar:!1}},{path:W.UniversalAppCat,name:K.UniversalAppCat,component:()=>Y((()=>import("./UniversalAppCat.js")),__vite__mapDeps([62,10,2,3,1,11,12,13,16,17,5,6,7,18,19,23,24,25,63]),import.meta.url),meta:{requiresSidebar:!0}},{path:W.UniversalAppRunning,name:K.UniversalAppRunning,component:()=>Y((()=>import("./UniversalAppRunningWindow.js")),__vite__mapDeps([64,2,3]),import.meta.url),meta:{requiresSidebar:!1}},{path:W.UniversalAppTitle,name:K.UniversalAppTitle,component:()=>Y((()=>import("./UniversalAppTitle.js")),__vite__mapDeps([65,2,3]),import.meta.url),meta:{requiresSidebar:!1,liteLayout:!0}},{path:W.UniversalAppSearch,name:K.UniversalAppSearch,component:()=>Y((()=>import("./UniversalAppSearch.js")),__vite__mapDeps([66,10,2,3,1,11,12,13,17,5,6,7,18,23,24,25,67]),import.meta.url),meta:{requiresSidebar:!0}}],Z=e({history:t(),routes:X});function Q(e,t){const[a,r]=e.split("?",2),s=new URLSearchParams(r);for(const[o,i]of Object.entries(t))null!=i&&(Array.isArray(i)?i.forEach((e=>s.append(o,e.toString()))):s.append(o,i.toString()));const n=s.toString();return n?`${a}?${n}`:a}function ee(e){const t=window.location.search,a={};if(!t)return null;const r=new URLSearchParams(t);for(const[s,n]of r.entries())a.hasOwnProperty(s)?(Array.isArray(a[s])||(a[s]=[a[s]]),a[s].push(n)):a[s]=n;return a[e]}const te={OPEN_RUNNING_WINDOW:"open-running-window",CLOSE_RUNNING_WINDOW:"close-running-window",OPEN_UAPP_RUNNING_WINDOW:"open-uapp-running-window",OPEN_RUNNING_WINDOW_AND_INSTALL:"open-running-window-and-install",RUNNING_STATUS_CHANGE:"running-status-change",GET_BASE_CONFIG:"get-base-config",GET_DEFAULT_CONFIG:"get-default-config",GET_DEFAULT_ROOT_DIR:"get-default-root-dir",GET_DEFAULT_CONFIG_AND_ROOT_DIR:"get-default-config-and-root-dir",SAVE_BASE_CONFIG:"save-base-config",GET_ENV_VARIABLES:"get-env-variables",SAVE_ENV_VARIABLES:"save-env-variables",SHOW_ABOUT:"show-about",OPEN_PATH:"open-path",SELECT_DIR:"select-dir",GET_PROCESS_ENV:"get-process-env",RESTART_APP:"restart-app",EXIT_APP:"exit-app",RUN_COMMAND:"run-command",KILL_PROCESSES:"kill-processes",SUPPORT_WEBVIEW_TAG:"support-webview-tag",SUPPORT_UAPP_WIN:"support-uapp-win",CHECK_LMD_APP_INFO:"check-lmd-app-info",CHECK_GIT:"check-git",INSTALL_GIT:"install-git"};class ae{static LMD_BASE_CONFIG="lmd_base_config";static UAPP_DATA_VERSION="uapp_data_version";static LMD_USER_TOKEN="lmd_token";static LMD_USER_DATA="lmd_user_data"}const re=async()=>window.ipcRenderer?await(window.ipcRenderer?.invoke(te.GET_BASE_CONFIG)):JSON.parse(localStorage.getItem(ae.LMD_BASE_CONFIG)||"{}"),se=async()=>{let e=null;if(window.ipcRenderer)try{e=await(window.ipcRenderer?.invoke(te.GET_DEFAULT_CONFIG_AND_ROOT_DIR))||null}catch(t){return console.log(t),null}return e},ne=async()=>await(window.ipcRenderer?.invoke(te.GET_ENV_VARIABLES)),oe=async e=>{const t=JSON.stringify(e);if(localStorage.setItem(ae.LMD_BASE_CONFIG,JSON.stringify(e)),window.ipcRenderer)return window.ipcRenderer?.invoke(te.SAVE_BASE_CONFIG,t)},ie=async e=>{const t=JSON.stringify(e);return window.ipcRenderer?.invoke(te.SAVE_ENV_VARIABLES,t)},ce=async e=>await(window.ipcRenderer?.invoke(te.OPEN_PATH,e));class le{static getSystemLocale(){return navigator.language}static getDefaultLocale(){let e="en";try{const t=this.getSystemLocale();switch(t.split("-")[0]){case"en":default:e="en";break;case"zh":e="zhHans"}}catch(t){console.log("get system locale error, use default en.",t)}return e}static getLocaleIcon(e){let t="";switch(e){case"en":default:t="./images/icons/locale-en.png";break;case"zhHans":t="./images/icons/locale-zhHans.png"}return t}static saveLocaleToStorage=(e,t)=>{t.LMD_LOCALE=e,oe(t)};static getCurrentLocale(){let e="en";try{e=JSON.parse(localStorage.getItem(ae.LMD_BASE_CONFIG)||"").LMD_LOCALE}catch(t){console.error("getCurrentLocale error: ",t)}return e}static localeIsEn(){return"en"===this.getCurrentLocale()}static localeIsEnByVal(e){return"en"===e}}const pe=axios.create({baseURL:"https://d-1314735556.cos.ap-shanghai.myqcloud.com/up/",timeout:6e3});pe.interceptors.request.use((e=>{if(e.url){const t=le.getCurrentLocale();e.url=Q(e.url,{locale:t})}return e}),(e=>(console.error("Request Error:",e),Promise.reject(e)))),pe.interceptors.response.use((e=>(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e)),(e=>{if(console.error("Response Error:",e),e.response)switch(e.response.status){case 401:console.warn("Unauthorized access. Redirecting to login...");break;case 403:console.warn("Forbidden access.");break;case 404:console.warn("Resource not found.");break;case 500:console.error("Server internal error.");break;default:console.error("Unexpected error occurred.")}return Promise.reject(e)}));const ue="http://localhost:19312/api",de=axios.create({baseURL:ue,timeout:6e3});de.interceptors.request.use((e=>{if(e.url){const t=le.getCurrentLocale();e.url=Q(e.url,{locale:t})}return e}),(e=>(console.error("Request Error:",e),Promise.reject(e)))),de.interceptors.response.use((e=>(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e)),(e=>{if(console.error("Response Error:",e),e.response)switch(e.response.status){case 401:console.warn("Unauthorized access. Redirecting to login...");break;case 403:console.warn("Forbidden access.");break;case 404:console.warn("Resource not found.");break;case 500:console.error("Server internal error.");break;default:console.error("Unexpected error occurred.")}return Promise.reject(e)}));const me=T("modelDownloadInfoInstance",{state:()=>({messages:a([])}),actions:{addToast(e,t="success",a=2e3){const r={text:e,color:t,timeout:a};this.messages.push(r)}}});class ge{static saveToLS(e){localStorage.setItem(ae.LMD_USER_DATA,JSON.stringify(e))}static clearUserInfoInLS(){localStorage.setItem(ae.LMD_USER_DATA,""),localStorage.setItem(ae.LMD_USER_TOKEN,"")}}class he extends Error{response=null}const _e=T("user",{state:()=>({currentUserData:{},loginViewVisible:!1,changeNicknameViewVisible:!1,changePwdViewVisible:!1,userInfoLoading:!1,isUserLoggedIn:!1}),actions:{async updateCurrentUserData(){this.userInfoLoading=!0;try{if(!this.getToken())return;try{const e=await(async()=>(await Ae.get("/api/auth/info")).data)();e&&ge.saveToLS(e)}catch(a){a instanceof he&&403===a.response?.status&&this.logout()}}catch(a){console.log(a)}finally{this.userInfoLoading=!1}const e=localStorage.getItem(ae.LMD_USER_DATA);let t;t=e?JSON.parse(e):{},this.setCurrentUser(t)},async userRegister(e){const{addToast:t}=me();try{const a=await(async e=>(await Ae.post("/api/reg/register",e,{ignoreTokenCheck:!0})).data)(e),r=a.user;if(r.token)return this.setToken(r),r;t(a.msg,"error")}catch(a){let e="";if(a instanceof axios.AxiosError){const t=a.response?.data;e=t.msg}else e=a.message;throw t(e,"error"),a}},async userLogin(e){const{addToast:t}=me();try{const a=await(async e=>(await Ae.post("/api/auth/login",e,{ignoreTokenCheck:!0})).data)(e),r=a.user;if(r.token)return this.setToken(r),r;t(a.msg,"error")}catch(a){let e="";if(a instanceof axios.AxiosError){const t=a.response?.data;e=t.msg}else e=a.message;throw t(e,"error"),a}},getToken:()=>localStorage.getItem(ae.LMD_USER_TOKEN),setToken(e){if(e.token){localStorage.setItem(ae.LMD_USER_TOKEN,e.token);const t=Object.assign({},e);t.token=void 0,ge.saveToLS(t),this.setCurrentUser(t),setTimeout((()=>{location.reload()}),100)}},showLoginView(){this.loginViewVisible=!0,setTimeout((()=>{this.loginViewVisible=!1}),100)},showChangePwdView(){this.changePwdViewVisible=!0,setTimeout((()=>{this.changePwdViewVisible=!1}),100)},showChangeNicknameView(){this.changeNicknameViewVisible=!0,setTimeout((()=>{this.changeNicknameViewVisible=!1}),100)},setCurrentUser(e){this.currentUserData=e,this.isUserLoggedIn=!0},changePwd:async e=>await(async e=>(await Ae.post("/api/auth/chpwd",e)).data)(e),changeNickname:async e=>await(async e=>(await Ae.post("/api/auth/chname",e)).data)(e),async forgotPwd(e){try{return await(async e=>(await Ae.post("/api/auth/forgot",e,{ignoreTokenCheck:!0})).data)(e)}catch(t){const{addToast:e}=me();throw e(t?.message,"error"),t}},async resetPwd(e){try{return await(async e=>(await Ae.post("/api/auth/reset",e,{ignoreTokenCheck:!0})).data)(e)}catch(t){const{addToast:e}=me();throw e(t?.message,"error"),t}},logout(){ge.clearUserInfoInLS(),location.reload()}}}),Ae=axios.create({baseURL:undefined,timeout:6e3});Ae.interceptors.request.use((e=>{const t=_e(),a=t.getToken();if(!e.ignoreTokenCheck){if(!a)return t.showLoginView(),Promise.reject("No token");e.headers.Authorization=`Bearer ${a}`}if(e.url){const t=le.getCurrentLocale();e.url=Q(e.url,{locale:t})}return e}),(e=>(console.error("Request Error:",e),Promise.reject(e)))),Ae.interceptors.response.use((e=>{if(e.data&&"string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){console.log("parse err",t)}if(e.data?.code){const t=e.data;throw new Error(`${t.msg} (${t.code})`)}return e}),(e=>{if(console.error("Response Error:",e),e.response)switch(e.response.status){case 401:console.warn("Unauthorized access. Redirecting to login...");break;case 403:console.warn("Forbidden access.");break;case 404:console.warn("Resource not found.");break;case 500:console.error("Server internal error.");break;default:console.error("Unexpected error occurred.")}if(e instanceof axios.AxiosError){const t=e.response;if(t?.data instanceof Object&&t?.data?.msg){const e=new he(t?.data?.msg);return e.response=t,Promise.reject(e)}}return Promise.reject(e)}));const we=async e=>(await pe.get(`uapp-data/${e}.json`)).data;const fe=I(b()),ve=fe((async(e,t)=>{if(!e)return void t([]);const a=await(async e=>(await Ae.get(`/api/universal-ai-app/search?keyword=${e}`,{ignoreTokenCheck:!0})).data)(e);t(a)}),800),ye=T("universalApp",{state:()=>({version:0,allCatsData:[],loadInProgress:!1,searchKeyword:"",searchResult:[],searchInProgress:!1}),actions:{async getAllCats(){try{this.loadInProgress=!0;const e=await(async()=>(await pe.get("uapp-data/cats-ts.json")).data)();this.allCatsData=e.cats,this.version=e.ts}catch(e){console.error("Failed to fetch apps:",e)}finally{this.loadInProgress=!1}},async searchApp(e){this.searchInProgress=!0,this.searchKeyword=e,ve(e,(e=>{this.searchResult=e,this.searchInProgress=!1}))},clearKeyword(){this.searchKeyword=""}}});class Ee{static info(){window.ipcRenderer?.invoke(te.SHOW_ABOUT)}static getAppInfo(){return window.ipcRenderer?.invoke(te.CHECK_LMD_APP_INFO)}}class Se{static getCurrentIndex(e){let t=z.findIndex((t=>t.routerName===e));if(-1===t)switch(e){case K.TutorialTextDetail:t=0;break;case K.UniversalAppCat:case K.UniversalAppSearch:t=1;break;case K.AppDetail:case K.StoryPostDetail:t=2}return t}}const Le={class:"mt-12"},Te={class:"mt-10 mx-4",style:{"border-bottom":"1px solid #E2E2EE"}},Re={class:"px-4 py-0 text-center mx-auto mt-6"},Ie={class:"lmd-left-bottom-link"},be={class:"lmd-left-bottom-link"},De={href:"https://daiyl.com/zh/what-is-lm-downloader.html",target:"_blank"},Oe=r({__name:"left-nav-drawer",setup(e){const t=a([0]),r=a(""),v=a(""),y=ye();s((async()=>{const e=Z.currentRoute.value.name;if(e){const a=Se.getCurrentIndex(e.toString());t.value=[a]}const a=await Ee.getAppInfo();a&&(v.value=a.version)}));const E=(e,t)=>{let a;return a=t?e.iconActive:e.icon,a},S=()=>{r.value=""},L=e=>{e.preventDefault(),Ee.info()},T=async e=>{};Z.afterEach((e=>{const a=e.name;if(a){const e=Se.getCurrentIndex(String(a));t.value=[e],R(String(a))}})),n((()=>r.value),(async e=>{await y.searchApp(e),e&&Z.push({name:K.UniversalAppSearch})})),n((()=>y.searchKeyword),(e=>{r.value=e}));const R=e=>{e!==K.UniversalAppSearch&&S()};return(e,a)=>(i(),o(D,{app:"",width:"220",class:"lmd-bg-gray lmd-left-nav window-drag",permanent:""},{prepend:c((()=>[l("div",Le,[p(P,{height:"48",width:"167",class:"ml-6",src:"./images/nav/logo-full.svg"})]),l("div",Te,[p(N,{density:"compact",class:"search-input window-no-drag","onUpdate:focused":T,"model-value":_(r),"onUpdate:modelValue":a[0]||(a[0]=e=>w(r)?r.value=e:null),placeholder:e.$t("App.Search"),variant:"outlined",rounded:"lg"},{"prepend-inner":c((()=>[p(P,{src:"./images/icons/search.svg",width:"16",height:"16","max-width":"16","max-height":"16"})])),"append-inner":c((()=>[_(r)?(i(),o(k,{key:0,size:"20",icon:"mdi-close",style:{cursor:"pointer"},onClick:S})):f("",!0)])),_:1},8,["model-value","placeholder"])])])),append:c((()=>[p(U,{class:"mb-2 window-no-drag"},{default:c((()=>[p(O,null,{prepend:c((()=>[p(P,{src:"./images/icons/about.svg",width:"24",height:"24"})])),default:c((()=>[l("div",Ie,[l("a",{href:"#",onClick:L},h(e.$t("App.about"))+" "+h(_(v)),1)])])),_:1}),p(O,null,{prepend:c((()=>[p(P,{src:"./images/icons/help.svg",width:"24",height:"24"})])),default:c((()=>[l("div",be,[l("a",De,h(e.$t("App.help")),1)])])),_:1})])),_:1})])),default:c((()=>[l("div",Re,[p(U,{nav:"",style:{padding:"0px",overflow:"visible"},class:"d-flex flex-column ga-4",selected:_(t),"onUpdate:selected":a[1]||(a[1]=e=>w(t)?t.value=e:null)},{default:c((()=>[(i(!0),u(A,null,d(_(z),((t,a)=>(i(),o(O,{key:a,"active-class":"nav-item-active",class:"nav-item window-no-drag",draggable:"false",variant:"plain",rounded:"lg",onClick:e=>(e=>{Z.push({name:e.routerName})})(t),value:a},{default:c((a=>[m(p(P,{class:"ml-1 mr-2 nav-item-icon",draggable:"false",src:E(t,!0),transition:"false","max-width":"32","max-height":"32",width:"32",height:"32"},null,8,["src"]),[[g,a.isActive]]),m(p(P,{class:"ml-1 mr-2 nav-item-icon",draggable:"false",src:E(t,!1),transition:"false","max-width":"32","max-height":"32",width:"32",height:"32"},null,8,["src"]),[[g,!a.isActive]]),l("span",null,h(e.$t(t.name)),1)])),_:2},1032,["onClick","value"])))),128))])),_:1},8,["selected"])])])),_:1}))}});async function Pe(e,t={},a=100,r=1e3){return async function s(n){try{console.log(`Attempt ${n}: Calling API...`);return await axios(e,t)}catch(i){if(n<a)return console.error(`Attempt ${n} failed. Retrying in 1000ms...`),await(o=r,new Promise((e=>setTimeout(e,o)))),s(n+1);throw console.error("All attempts failed. Throwing error..."),new Error("Failed to call API after 100 attempts")}var o}(1)}const Ue=async()=>{let e;try{e=(await Pe("/health-check",{},1e3)).data}catch(t){return console.log("health check err",t),e}},ke=r({__name:"AppDefaultLayout",setup(e){const t=a(!1);return s((()=>{Ue().then((()=>{t.value=!0,postMessage({payload:"removeLoading"},"*")}));document.querySelector("html").setAttribute("main-window","")})),v((()=>{const e=document.querySelector("html");e&&e.removeAttribute("main-window")})),(e,a)=>{const r=y("router-view");return _(t)?(i(),o(C,{key:0,class:"lmd-application",style:{overflow:"hidden"}},{default:c((()=>[p(Oe),p(V,{class:"d-flex justify-center",style:{"min-height":"300px"}},{default:c((()=>[p(r)])),_:1})])),_:1})):f("",!0)}}}),Ne=r({__name:"AppNoSidebarLayout",setup:e=>(s((()=>{document.querySelector("html").setAttribute("running-window",""),Ue().then((()=>{postMessage({payload:"removeLoading"},"*")}))})),v((()=>{const e=document.querySelector("html");e&&e.removeAttribute("running-window")})),(e,t)=>{const a=y("router-view");return i(),o(C,null,{default:c((()=>[p(V,{class:"d-flex justify-center",style:{"min-height":"300px"}},{default:c((()=>[p(a)])),_:1})])),_:1})})}),Ce=r({__name:"AppLiteLayout",setup:e=>(s((()=>{document.querySelector("html").setAttribute("lite-layout","")})),v((()=>{const e=document.querySelector("html");e&&e.removeAttribute("lite-layout")})),(e,t)=>{const a=y("router-view");return i(),o(C,null,{default:c((()=>[p(a)])),_:1})})}),Ve=r({__name:"App",setup(e){const t=me(),a=E((()=>{const e=Z.currentRoute.value?.meta?.requiresSidebar,t=Z.currentRoute.value?.meta?.liteLayout;return!0===t?Ce:!0===e?ke:!1===e?Ne:null}));return(e,r)=>(i(),u(A,null,[_(a)?(i(),o(S(_(a)),{key:0})):f("",!0),p(x,{modelValue:_(t).messages,"onUpdate:modelValue":r[0]||(r[0]=e=>_(t).messages=e),location:"top"},null,8,["modelValue"])],64))}}),xe={en:{...$,$vuetify:{...M}},zhHans:{...B,$vuetify:{...j}}};class Me{static PRIMARY_COLOR="#FA6400"}const je=R(),qe=e=>{const t=e.LMD_LOCALE||le.getDefaultLocale();le.saveLocaleToStorage(t,e);const a=(e=>G({legacy:!1,locale:e,fallbackLocale:"en",messages:xe}))(e.LMD_LOCALE),r=q({defaults:{global:{ripple:!1}},locale:{adapter:F({i18n:a,useI18n:H})},theme:{defaultTheme:"light",themes:{light:{dark:!1,colors:{primary:Me.PRIMARY_COLOR}},dark:{dark:!0,colors:{primary:Me.PRIMARY_COLOR}}}}}),s=L(Ve);s.config.errorHandler=(e,t,a)=>{console.error("Global Error",e,a)},s.use(r).use(a).use(Z).use(je).mount("#app")};re().then((e=>{qe(e)}));export{K as A,te as I,le as L,Me as T,Ee as a,de as b,me as c,fe as d,_e as e,Ae as f,re as g,ne as h,Pe as i,W as j,Q as k,ee as l,ue as m,we as n,ce as o,se as p,oe as q,Z as r,ie as s,ye as u};
