import{d as l,x as e,g as a,G as t,h as o,M as n,N as i,r as s,o as u,i as d,b as r,w as c,u as m,c as g,e as _,t as v,v as f,O as h,k as p,F as D,P as b,Q as w,a as V,R as C,L as y,p as O}from"./index-DDUgBJ1S.js";import{I}from"./IPCChannelName-ChmutG-C.js";const R=l({__name:"global-config-btn",setup(l){const{t:V}=e(),C=a(!1),y=a({}),O=a({}),R=a(!1),x=a(!1),H=t("showToastMessage");o((()=>{window.ipcRenderer?.on(I.OPEN_GLOBAL_CONFIG_DIALOG,((l,...e)=>{N()}))}));const T=async()=>{if(x.value&&y){R.value=!0;try{await b(y.value),await w(O.value)}catch(l){console.error(l)}finally{R.value=!1;const l=V("Common.saveSuccess");console.log("showToastMessage",H),H&&H(l,"success")}}},M=l=>!!l||V("Common.fieldRequired"),N=async()=>{C.value=!0,window.ipcRenderer&&(y.value=await n(),O.value=await i(),console.log("envVars",O.value))};return(l,e)=>{const a=s("v-img"),t=s("v-btn"),o=s("v-card-title"),n=s("v-card-subtitle"),i=s("v-text-field"),b=s("v-card-actions"),w=s("v-form"),V=s("v-card"),I=s("v-dialog");return u(),d(D,null,[r(t,{class:"hover-border",width:"38",height:"38",icon:"",onClick:N},{default:c((()=>[r(a,{width:"36",height:"36",src:"./images/icons/icon-config.png",transition:!1})])),_:1}),r(I,{modelValue:m(C),"onUpdate:modelValue":e[10]||(e[10]=l=>f(C)?C.value=l:null),"min-width":"400","max-width":"800"},{default:c((()=>[r(V,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:l.$t("ConfigDialog.globalConfigTitle")},{append:c((()=>[r(t,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:e[0]||(e[0]=l=>C.value=!1)})])),default:c((()=>[m(y)?(u(),g(w,{key:0,class:"pt-0 pb-3 px-6",modelValue:m(x),"onUpdate:modelValue":e[9]||(e[9]=l=>f(x)?x.value=l:null),onSubmit:h(T,["prevent"])},{default:c((()=>[r(o,null,{default:c((()=>[_(v(l.$t("ConfigDialog.DefaultStorageTitle")),1)])),_:1}),r(n,null,{default:c((()=>[_(v(l.$t("ConfigDialog.DefaultStorageSubtitle")),1)])),_:1}),r(i,{modelValue:m(y).LMD_DATA_ROOT,"onUpdate:modelValue":e[1]||(e[1]=l=>m(y).LMD_DATA_ROOT=l),readonly:m(R),rules:[M],label:l.$t("ConfigDialog.DefaultStoragePathLabel")},null,8,["modelValue","readonly","rules","label"]),r(o,null,{default:c((()=>[_(v(l.$t("ConfigDialog.GlobalVariablesTitle")),1)])),_:1}),r(n,null,{default:c((()=>[_(v(l.$t("ConfigDialog.GlobalVariablesSubtitle")),1)])),_:1}),r(i,{readonly:m(R),rules:[M],modelValue:m(O).PYTHON_HOME,"onUpdate:modelValue":e[2]||(e[2]=l=>m(O).PYTHON_HOME=l),label:"PYTHON_HOME"},null,8,["readonly","rules","modelValue"]),r(i,{readonly:m(R),rules:[M],modelValue:m(O).MINICONDA_DIR,"onUpdate:modelValue":e[3]||(e[3]=l=>m(O).MINICONDA_DIR=l),label:"MINICONDA_DIR"},null,8,["readonly","rules","modelValue"]),r(i,{readonly:m(R),rules:[M],modelValue:m(O).NODE_JS_DIR,"onUpdate:modelValue":e[4]||(e[4]=l=>m(O).NODE_JS_DIR=l),label:"NODE_JS_DIR"},null,8,["readonly","rules","modelValue"]),r(i,{readonly:m(R),rules:[M],modelValue:m(O).HF_MIRROR,"onUpdate:modelValue":e[5]||(e[5]=l=>m(O).HF_MIRROR=l),label:"HF_MIRROR"},null,8,["readonly","rules","modelValue"]),r(i,{readonly:m(R),rules:[M],modelValue:m(O).GITHUB_PROXY,"onUpdate:modelValue":e[6]||(e[6]=l=>m(O).GITHUB_PROXY=l),label:"GITHUB_PROXY"},null,8,["readonly","rules","modelValue"]),r(i,{readonly:m(R),rules:[M],modelValue:m(O).PIP_CACHE_DIR,"onUpdate:modelValue":e[7]||(e[7]=l=>m(O).PIP_CACHE_DIR=l),label:"PIP_CACHE_DIR"},null,8,["readonly","rules","modelValue"]),r(b,{class:"text-center justify-center"},{default:c((()=>[r(t,{variant:"outlined",onClick:e[8]||(e[8]=l=>C.value=!1)},{default:c((()=>[_(v(l.$t("ConfigDialog.close")),1)])),_:1}),r(t,{color:"primary",variant:"flat",type:"submit",loading:m(R)},{default:c((()=>[_(v(l.$t("ConfigDialog.saveConfig")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["modelValue"])):p("",!0)])),_:1},8,["title"])])),_:1},8,["modelValue"])],64)}}}),x=l({__name:"git-info-btn",setup(l){const e=a(!1),t=l=>{l.preventDefault(),e.value=!0};return(l,a)=>{const o=s("v-img"),n=s("v-btn"),i=s("v-card-text"),g=s("v-card"),h=s("v-dialog");return u(),d(D,null,[V("a",{href:"#",class:"d-flex",target:"_blank",onClick:t,style:{"align-items":"center"}},[r(o,{src:"./images/icons/icon-github.png",transition:!1,width:"36",height:"36",class:"github-icon mr-4"}),a[2]||(a[2]=_(" Github > "))]),r(h,{modelValue:m(e),"onUpdate:modelValue":a[1]||(a[1]=l=>f(e)?e.value=l:null),"min-width":"200","max-width":"560"},{default:c((()=>[r(g,{class:"mx-auto px-0 py-0 window-no-drag",width:"100%",title:l.$t("GitDialog.DialogTitle")},{append:c((()=>[r(n,{icon:"mdi-close",class:"ms-auto",size:"compact",text:"Ok",elevation:"0",onClick:a[0]||(a[0]=l=>e.value=!1)})])),default:c((()=>[r(i,null,{default:c((()=>[V("h3",null,v(l.$t("GitDialog.CardTitle")),1),a[3]||(a[3]=V("div",null,[_("Github: "),V("a",{href:"https://github.com/lmdown",target:"_blank"},"https://github.com/lmdown")],-1)),a[4]||(a[4]=V("div",null,[_(" Gitee: "),V("a",{href:"https://gitee.com/lmdown",target:"_blank"},"https://gitee.com/lmdown")],-1))])),_:1})])),_:1},8,["title"])])),_:1},8,["modelValue"])],64)}}}),H={class:"lmd-top-right-controls ga-6 mr-12 window-no-drag"},T=l({__name:"top-right-controls",setup(l){const{locale:e}=C();o((async()=>{let l;try{l=(await n()).LMD_LOCALE}catch(e){l=y.getDefaultLocale()}a(l)}));const a=async l=>{e.value=l;const a=await n();a.LMD_LOCALE=e.value,await b(a)},t=O((()=>y.getLocaleIcon(e.value)));return(l,o)=>{const n=s("VDivider"),i=s("v-img"),g=s("v-btn");return u(),d("div",H,[r(x),r(n,{vertical:"",style:{opacity:"1"},color:"#EBEBF7"}),r(R),r(g,{class:"hover-border",style:{"margin-left":"-6px"},width:"38",height:"38",icon:"",onClick:o[0]||(o[0]=l=>{"zhHans"===e.value?a("en"):a("zhHans")})},{default:c((()=>[r(i,{style:{"margin-left":"16px"},width:"56",height:"36",transition:!1,src:m(t)},null,8,["src"])])),_:1})])}}});export{T as _};
